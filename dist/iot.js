(function(e,t){if(!e.seajs){var i=e.seajs={version:"2.2.3"},a=i.data={},l=B("Object"),s=B("String"),r=Array.isArray||B("Array"),o=B("Function"),d=B("Undefined"),n=0,p=a.events={};i.on=function(e,t){return(p[e]||(p[e]=[])).push(t),i},i.off=function(e,t){if(!e&&!t)return p=a.events={},i;var l=p[e];if(l)if(t)for(var s=l.length-1;s>=0;s--)l[s]===t&&l.splice(s,1);else delete p[e];return i};var c,u=i.emit=function(e,t){var a,l=p[e];if(l)for(l=l.slice();a=l.shift();)a(t);return i},h=/[^?#]*\//,f=/\/\.\//g,g=/\/[^\/]+\/\.\.\//,_=/([^:\/])\/\//g,x=/^([^\/:]+)(\/.+)$/,b=/{([^{]+)}/g,m=/^\/\/.|:\//,y=/^.*?\/\/.*?\//,w=document,v=W(w.URL),k=w.scripts,A=w.getElementById("seajsnode")||k[k.length-1],S=W(((c=A).hasAttribute?c.src:c.getAttribute("src",4))||v);i.resolve=function(e,t){if(!e)return"";var i,l,r;e=function(e){var t=a.vars;return t&&e.indexOf("{")>-1&&(e=e.replace(b,function(e,i){return s(t[i])?t[i]:e})),e}(e=function(e){var t,i=a.paths;return i&&(t=e.match(x))&&s(i[t[1]])&&(e=i[t[1]]+t[2]),e}(e=function(e){var t=a.alias;return t&&s(t[e])?t[e]:e}(e))),l=(i=e).length-1;var d=U(e="#"===(r=i.charAt(l))?i.substring(0,l):".js"===i.substring(l-2)||i.indexOf("?")>0||".css"===i.substring(l-3)||"/"===r?i:i+".js",t);return d=function(e){var t=a.map,i=e;if(t)for(var l=0,s=t.length;l<s;l++){var r=t[l];if((i=o(r)?r(e)||e:e.replace(r[0],r[1]))!==e)break}return i}(d)};var M,z,j=w.head||w.getElementsByTagName("head")[0]||w.documentElement,E=j.getElementsByTagName("base")[0],P=/\.css(?:\?|$)/i,T=+navigator.userAgent.replace(/.*(?:AppleWebKit|AndroidWebKit)\/(\d+).*/,"$1")<536;i.request=function(e,t,i,l){var s=P.test(e),r=w.createElement(s?"link":"script");i&&(r.charset=i),d(l)||r.setAttribute("crossorigin",l),function(e,t,i,l){var s="onload"in e;function r(){e.onload=e.onerror=e.onreadystatechange=null,i||a.debug||j.removeChild(e),e=null,t()}!i||!T&&s?s?(e.onload=r,e.onerror=function(){u("error",{uri:l,node:e}),r()}):e.onreadystatechange=function(){/loaded|complete/.test(e.readyState)&&r()}:setTimeout(function(){!function e(t,i){var a,l=t.sheet;if(T)l&&(a=!0);else if(l)try{l.cssRules&&(a=!0)}catch(e){"NS_ERROR_DOM_SECURITY_ERR"===e.name&&(a=!0)}setTimeout(function(){a?i():e(t,i)},20)}(e,t)},1)}(r,t,s,e),s?(r.rel="stylesheet",r.href=e):(r.async=!0,r.src=e),M=r,E?j.insertBefore(r,E):j.appendChild(r),M=null};var X,I=/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|\/\*[\S\s]*?\*\/|\/(?:\\\/|[^\/\r\n])+\/(?=[^\/])|\/\/.*|\.\s*require|(?:^|[^$])\brequire\s*\(\s*(["'])(.+?)\1\s*\)/g,Y=/\\\\/g,O=i.cache={},C={},L={},N={},F=H.STATUS={FETCHING:1,SAVED:2,LOADING:3,LOADED:4,EXECUTING:5,EXECUTED:6};H.prototype.resolve=function(){for(var e=this.dependencies,t=[],i=0,a=e.length;i<a;i++)t[i]=H.resolve(e[i],this.uri);return t},H.prototype.load=function(){if(!(this.status>=F.LOADING)){this.status=F.LOADING;var e=this.resolve();u("load",e);for(var t,i=this._remain=e.length,a=0;a<i;a++)(t=H.get(e[a])).status<F.LOADED?t._waitings[this.uri]=(t._waitings[this.uri]||0)+1:this._remain--;if(0!==this._remain){var l={};for(a=0;a<i;a++)(t=O[e[a]]).status<F.FETCHING?t.fetch(l):t.status===F.SAVED&&t.load();for(var s in l)l.hasOwnProperty(s)&&l[s]()}else this.onload()}},H.prototype.onload=function(){this.status=F.LOADED,this.callback&&this.callback();var e,t,i=this._waitings;for(e in i)i.hasOwnProperty(e)&&((t=O[e])._remain-=i[e],0===t._remain&&t.onload());delete this._waitings,delete this._remain},H.prototype.fetch=function(e){var t=this.uri;this.status=F.FETCHING;var l={uri:t};u("fetch",l);var s=l.requestUri||t;function r(){i.request(l.requestUri,l.onRequest,l.charset,l.crossorigin)}s&&!L[s]?C[s]?N[s].push(this):(C[s]=!0,N[s]=[this],u("request",l={uri:t,requestUri:s,onRequest:function(){delete C[s],L[s]=!0,X&&(H.save(t,X),X=null);var e,i=N[s];delete N[s];for(;e=i.shift();)e.load()},charset:o(a.charset)?a.charset(s):a.charset,crossorigin:o(a.crossorigin)?a.crossorigin(s):a.crossorigin}),l.requested||(e?e[l.requestUri]=r:r())):this.load()},H.prototype.exec=function(){var e=this;if(e.status>=F.EXECUTING)return e.exports;e.status=F.EXECUTING;var t=e.uri;function i(e){return H.get(i.resolve(e)).exec()}i.resolve=function(e){return H.resolve(e,t)},i.async=function(e,a){return H.use(e,a,t+"_async_"+D()),i};var a=e.factory,l=o(a)?a(i,e.exports={},e):a;return void 0===l&&(l=e.exports),delete e.factory,e.exports=l,e.status=F.EXECUTED,u("exec",e),l},H.resolve=function(e,t){var a={id:e,refUri:t};return u("resolve",a),a.uri||i.resolve(a.id,t)},H.define=function(e,t,i){var a,l,s=arguments.length;1===s?(i=e,e=void 0):2===s&&(i=t,r(e)?(t=e,e=void 0):t=void 0),!r(t)&&o(i)&&(a=i.toString(),l=[],a.replace(Y,"").replace(I,function(e,t,i){i&&l.push(i)}),t=l);var d={id:e,uri:H.resolve(e),deps:t,factory:i};if(!d.uri&&w.attachEvent){var n=function(){if(M)return M;if(z&&"interactive"===z.readyState)return z;for(var e=j.getElementsByTagName("script"),t=e.length-1;t>=0;t--){var i=e[t];if("interactive"===i.readyState)return z=i}}();n&&(d.uri=n.src)}u("define",d),d.uri?H.save(d.uri,d):X=d},H.save=function(e,t){var i=H.get(e);i.status<F.SAVED&&(i.id=t.id||e,i.dependencies=t.deps||[],i.factory=t.factory,i.status=F.SAVED)},H.get=function(e,t){return O[e]||(O[e]=new H(e,t))},H.use=function(t,i,a){var l=H.get(a,r(t)?t:[t]);l.callback=function(){for(var t=[],a=l.resolve(),s=0,r=a.length;s<r;s++)t[s]=O[a[s]].exec();i&&i.apply(e,t),delete l.callback},l.load()},H.preload=function(e){var t=a.preload,i=t.length;i?H.use(t,function(){t.splice(0,i),H.preload(e)},a.cwd+"_preload_"+D()):e()},i.use=function(e,t){return H.preload(function(){H.use(e,t,a.cwd+"_use_"+D())}),i},H.define.cmd={},e.define=H.define,i.Module=H,a.fetchedList=L,a.cid=D,i.require=function(e){var t=H.get(H.resolve(e));return t.status<F.EXECUTING&&(t.onload(),t.exec()),t.exports};var V,R;a.base=(S.match(/^(.+?\/)(\?\?)?(seajs\/)+/)||["",S])[1],a.dir=S,a.cwd=v,a.charset="utf-8",a.history={},a.preload=(V=[],R=location.search.replace(/(seajs-\w+)(&|$)/g,"$1=1$2"),(R+=" "+w.cookie).replace(/(seajs-\w+)=1/g,function(e,t){V.push(t)}),V),i.config=function(e){for(var t in e){var s=e[t],o=a[t];if(a.history[t]=a.history[t]||[],a.history[t].push(G(s)),o&&l(o))for(var d in s)o[d]=s[d];else r(o)?s=o.concat(s):"base"===t&&("/"!==s.slice(-1)&&(s+="/"),s=U(s)),a[t]=s}return u("config",e),i}}function B(e){return function(t){return{}.toString.call(t)=="[object "+e+"]"}}function D(){return n++}function W(e){return e.match(h)[0]}function U(e,t){var i,l=e.charAt(0);if(m.test(e))i=e;else if("."===l)i=function(e){for(e=e.replace(f,"/");e.match(g);)e=e.replace(g,"/");return e=e.replace(_,"$1/")}((t?W(t):a.cwd)+e);else if("/"===l){var s=a.cwd.match(y);i=s?s[0]+e.substring(1):e}else i=a.base+e;return 0===i.indexOf("//")&&(i=location.protocol+i),i}function H(e,t){this.uri=e,this.dependencies=t||[],this.exports=null,this.status=0,this._waitings={},this._remain=0}function G(e){if(l(e)){var t={};for(var i in e)t[i]=e[i];return t}return e}})(this),define("magix5",()=>{let e=0,t=[],i=window,a=document,l=i.setTimeout,s=encodeURIComponent;function r(){}let o=JSON.stringify,d=a.body,n=i.performance,p=n.now.bind(n),c="prototype",u=Object[c].toString,h=e=>u.call(e).slice(8,-1),f=e=>"Object"==h(e),g=Array.isArray,_=t=>(t||"mx_")+e++,x=e=>a.getElementById(e),b=(e,t)=>e.innerHTML=t,m=_(),y={rootId:_(),defaultView:m,error(e){throw e}},w=e=>!e||"object"!=typeof e,v=(e,t,i)=>{if(e&&t&&!(i=e==t))try{i=16==(16&t.compareDocumentPosition(e))}catch(e){}return i},{assign:k,keys:A,hasOwnProperty:S}=Object,M=a.head,z=a.createElement("div"),j=z.getAttribute,E=(e,t)=>j.call(e,t),P=(e,t)=>{t&&!P[e]&&(P[e]=1,b(z,`<style>${t}`),M.appendChild(z.firstChild))},T=(e,i,a,l,s)=>{for(s of(g(e)||(e=[e]),g(i)||(i=i&&[i]||t),e))try{l=s&&s.apply(a,i)}catch(e){y.error(e)}return l},X=(e,t)=>e&&S.call(e,t),I=(e,t)=>{let i,a;if(w(t))"\x1e"==(i=t+"")[0]&&e.has(i)&&(t=e.get(i));else for(i in t)a=t[i],a=I(e,a),t[i]=a;return t},Y=(e,t)=>t.a-e.a||t.b-e.b;function O(e,t,i,a){(a=this).a=[],a.b=t||5,a.c=a.b+(e||20),a.d=i}k(O[c],{get(t){let i=this.a["\x1e"+t];return i&&(i.a++,i.b=e++,i=i.c),i},set(t,i){let a=this,l=a.a,s="\x1e"+t,r=l[s],o=a.b;if(!r){if(l.length>=a.c)for(l.sort(Y);o--;)(r=l.pop()).a>0&&a.del(r.o);r={d:t},l.push(r),l[s]=r}r.c=i,r.a=1,r.b=e++},del(e){e="\x1e"+e;let t=this.a,i=t[e],a=this.d;i&&(i.a=-1,i.c="",delete t[e],a&&T(a,i.d))},has(e){return X(this.a,"\x1e"+e)}});let C,L={bubbles:!0,cancelable:!0},N=[],F=(e,t,i,a,l,s)=>{let r={a:a,b:i,c:t,d:e,e(e){a?T(i,e,s):i(e)}};N.push(r),e.addEventListener(t,r.e,l)},V=(e,t,i,a,l)=>{for(let s,r=N.length;r--;)if((s=N[r]).c==t&&s.a==a&&s.d==e&&s.b===i){N.splice(r,1),e.removeEventListener(t,s.e,l);break}},R=new O,B=e=>{let t,i,a,l,s,r=R.get(e);if(!r){if(l={},-1==(s=e.indexOf("?")))t=e;else if(t=e.substring(0,s),e=e.substring(s+1))for(s of e.split("&"))[i,a]=s.split("="),l[i]=decodeURIComponent(a||"");R.set(e,r={a:t,b:l})}return{path:r.a,params:k({},r.b)}},D=new O,W=(e,t,i)=>(D.has(e)?i=D.get(e):(i=T(Function(`return ${e}`)),e.indexOf("\x1e")>-1&&I(t,i),D.set(e,i)),i),U=0,H=[],G=()=>{let e,t=p();for(;;){if(!(e=H[U-1])){H.length=U=0;break}if(e.apply(H[U],H[U+1]),U+=3,p()-t>32&&H.length>U){l(G);break}}},q=(e,t,i)=>{H.push(e,i,t),U||(U=1,l(G))},K=(e,t,i,a)=>{e?(i=[],m==e?(C||(C=Ge.extend()),t(C)):seajs.use(e,(...e)=>{for(let t of e)i.push(t&&t.__esModule&&t.default||t);t&&q(t,i)})):t()};function Q(){}let J=(e,t,i,a,l)=>(Q[c]=t[c],l=new Q,k(l,i),k(e,a),l.constructor=e,e[c]=l,e),Z=e=>e;let $,ee={fire(e,t){let i,a,l=this,s=l["\x1e"+e],r=0;if(t||(t={}),t.type=e,s)for(i=s.length;r<i;r++)(a=s[r]).f?(a.x=1,T(a.f,t,l),a.x=""):a.x||(s.splice(r--,1),i--);return(s=l[`on${e}`])&&T(s,t,l),l},on(e,t){let i="\x1e"+e;return(this[i]||(this[i]=[])).push({f:t}),this},off(e,t){let i,a="\x1e"+e,l=this,s=l[a];if(t){if(s)for(i of s)if(i.f==t){i.f="";break}}else delete l[a],delete l[`on${e}`];return l}},te={},ie=(e,t,i,a)=>{t.indexOf("\x1e")>0&&(a=te[e])&&I(a.a.a,i)},ae=(e,t)=>{X(te,e)||(te[e]=t,se.fire("add",{vframe:t}))},le=e=>e.b||(e.b=_());function se(e,t){let i=this,a=le(e);i.id=a,i.root=e,i.d=1,i.b={},i.pId=t,i.c=[],ae(a,i)}k(se,{all:()=>te,byId:e=>te[e],byNode:e=>te[e.b]},ee),k(se[c],{mountView(e,t){let i,a,l,s,r,o=this,{id:d,root:n,pId:p}=o;!o.e&&n&&(o.e=1,o.f=n.innerHTML),o.unmountView(),n&&e&&(i=B(e),l=i.path,o.path=e,s=i.params,ie(p,e,s),o.g=l,k(s,t),a=o.d,K(l,e=>{if(a==o.d){if(!e)return y.error(Error(`${d} cannot load:${l}`));r=He(e),l=new e(d,n,o,s,r),o.a=l,Be(l),T(l.init,s,l),q(()=>{l.g(),l.tmpl||(o.e=0,l.h||l.endUpdate())})}}))},unmountView(){let e=this,{a:t,root:i}=e;e.c=[],t&&(e.unmountZone(),e.a=0,t.d>0&&(t.d=0,t.fire("destroy"),t.off("destroy"),Be(t,1),t.owner=t.root=null),t.d--,i&&e.e&&b(i,e.f)),e.d++},mountVframe(e,t,i){let a,l=this,s=l.id,r=l.b,o=le(e);return(a=te[o])||(X(r,o)||(l.h=0),r[o]=o,a=new se(e,s)),a.mountView(t,i),a},mountZone(e){let t,i=this,a=(e=e||i.root).querySelectorAll("[mx-view]");for(t of a)t.a||(t.a=1,i.mountVframe(t,E(t,"mx-view")))},unmountVframe(e,t){let i,a;var l,s;e=e?this.b[t?e:e.b]:this.id,(i=te[e])&&(i.unmountView(),a=i.pId,(s=te[l=e])&&(delete te[l],s.root.a=0,se.fire("remove",{vframe:s}),s.id=s.root=s.pId=s.b=null),(i=te[a])&&X(i.b,e)&&(delete i.b[e],i.h=0))},unmountZone(e){let t,i,a,l=this;for(t in l.b)(a=e?(i=te[t])&&v(i.root,e):1)&&l.unmountVframe(t,1)},children(e){return(e=this).h||(e.h=A(e.b))},parent(e,t){for(t=this,e=e>>>0||1;t&&e--;)t=te[t.pId];return t},invoke(e,t){let i,a,l,s,r,o=this.c;return(a=this.a)&&a.h?i=(l=a[e])&&T(l,t,a):((s=o[r="\x1e"+e])&&(s.r=t===s.a),s={n:e,a:t,k:r},o.push(s),o[r]=s),i}});let re=new O(30,10),oe=/(?:([\w\-]+)\x1e)?([^(]+)\(([\s\S]*)?\)/,de={},ne={},pe={};let ce=(e,i)=>{let a,l,s,r,o,n,p,c,u=[],h=e,f=E(e,`mx-${i}`),g=0;if(f&&((o=re.get(f))||(o={v:(o=f.match(oe)||t)[1],n:o[2],i:o[3]},re.set(f,o)),o=k({},o,{r:f})),o&&!o.v||ne[i]){if(!(c=h.c)){for(p=[h];h!=d&&(h=h.parentNode);){if(te[l=h.b]||(l=h.c)){c=l;break}p.push(h)}if(c)for(f of p)f.c=c}if(c){h=e.b,te[h]&&(g=c=h);do{if((a=te[c])&&(n=a.a)){if(r=(s=n.i)[i])for(h=r.length;h--;)s={r:l=r[h],v:c,n:l},l?!g&&e.matches(l)&&u.push(s):g&&u.unshift(s);if(n.tmpl&&!g)break;g=0}}while(a&&(c=a.pId))}}return o&&u.push(o),u},ue=e=>{let t,i,a,l,s,r,o,n,{target:p,type:c}=e,u=[];for(;p!=d&&!(e.cancelBubble||(i=p.d)&&i[c]);){if(u.push(p),(t=ce(p,c)).length){u=[];for(let{v:i,r:d,n:u,i:h}of t){if(o!=i){if(o&&e.cancelBubble)break;o=i}if(!(l=(a=te[i])&&a.a))break;l.h&&(r=l[s=u+"\x1e"+c])&&(e.eventTarget=p,n=h?W(h,l.a):pe,e.params=n,T(r,e,l))}}p=p.parentNode||d}for(o of u)(i=o.d||(o.d={}))[c]=1},he=(e,t,i)=>{let a=0|de[e],l=i?-1:1;a&&i!==a||(i?V:F)(d,e,ue),de[e]=a+l,t&&(ne[e]=(0|ne[e])+l)};let fe={"&":"amp","<":"lt",">":"gt",'"':"#34","'":"#39","`":"#96"},ge=/[&<>"'\`]/g,_e=e=>""+(null==e?"":e),xe=e=>`&${fe[e]};`,be=e=>_e(e).replace(ge,xe),me={"!":"%21","'":"%27","(":"%28",")":"%29","*":"%2A"},ye=e=>me[e],we=/[!')(*]/g,ve=e=>s(_e(e)).replace(we,ye),ke=/[\\'"]/g,Ae=e=>_e(e).replace(ke,"\\$&"),Se=(e,t,i)=>(e.has(t)||(i="\x1e"+e.size,e.set(t,i),e.set(i,t)),e.get(t)),Me=(e,i)=>{let a,l,s=e.j,r=e.k,o=e.id,d=te[o],n={a:[]},p=e.e,c=e.a,u=t=>{i.a<i.length?Me(e,i):(n=i.slice(),i.a=i.length=0,t&&e.fire("domready"),T(n))};if(i.a=i.length,e.k=0,e.j={},r&&e.d>0&&(a=e.tmpl)){for(l of(e.fire("dompatch"),l=a(p,ze,o,_e,ve,c,Se,Ae,g),Oe(e.root,e.l,l,n,d,s),e.l=l,a=n.b||!e.h,n.a))q(l.g,t,l);a&&e.endUpdate(),u(1)}else u()},ze=(e,t,i,a)=>{let l;if(e){t=t||{};let s,r,o,d,n,p,c="",u={},h="<"+e,f="",g=[];if(i)for(d of i)o=d.a,d.b==Pe&&(o=o?be(o):" "),f+=o,p&&d.b==Pe&&p.b==Pe?p.a+=d.a:(d.d&&(u[d.d]=(u[d.d]||0)+1),d.e&&(s=1),p=d,g.push(d));for(r in t)!1!==(o=t[r])&&null!=o?(!0===o&&(t[r]=o=""),"id"==r?c=o:"mx-view"==r&&o&&!c?c=B(o).path:"mxs"==r?c||(c=o):"mxv"==r&&(s=1),"value"==r&&"textarea"==e?f=o:X(Ee,r)||(h+=` ${r}="${be(o)}"`)):delete t[r];n=h,l={a:h+=a?"/>":`>${f}</${e}>`,c:f,d:c,b:e,e:s||X(je,e),f:n,g:t,h:g,i:u,j:a}}else l={b:t?"\x1e":Pe,a:i+""};return l},je={input:{value:1,checked:1},textarea:{value:1},option:{selected:1}},Ee={mxs:1,mxv:1};let Pe=e;let Te="http://www.w3.org/",Xe={svg:`${Te}2000/svg`,math:`${Te}1998/Math/MathML`},Ie=(e,t,i,a)=>{let l,s,r=0,o=je[t.b],d=i.g,n=t.g;if(a){if(t)for(l in n)X(o,l)||X(d,l)||(r=1,e.removeAttribute(l));for(l in d)X(o,l)||X(Ee,l)||(s=d[l],t&&n[l]===s||(r=1,e.setAttribute(l,s)))}for(l in o)s=X(d,l)?"value"!=l||d[l]:"value"==l&&"",e[l]!=s&&(r=1,e[l]=s);return r&&delete e.d,r},Ye=(e,t,i)=>{let l,s=e.b;return s==Pe?l=a.createTextNode(e.a):(l=a.createElementNS(Xe[s]||t.namespaceURI,s),Ie(l,0,e,1)&&(i.b=1),b(l,e.c)),l},Oe=(e,t,i,a,l,s)=>{if(t){if(t.e||t.c!=i.c){let r,o,d,n,p,c,u=t.h,h=i.h,f=u.length,g=h.length,_=i.i,x=e.childNodes,m={},y=0;for(r=f;r--;)(p=(d=u[r]).d)&&(p=m[p]||(m[p]=[])).push(x[r]);for(r=0;r<g;r++)if(n=h[r],d=u[y++],(p=m[n.d])&&(p=p.pop())){if(p!=x[r]){for(o=y,c=1;o<f;o++,c++)if((d=u[o])&&x[r+c]==p){u.splice(o,1),y--;break}e.insertBefore(p,x[r])}_[d.d]&&_[d.d]--,Ce(p,e,d,n,a,l,s)}else d?m[d.d]&&_[d.d]?(f++,a.b=1,e.insertBefore(Ye(n,e,a),x[r]),y--):Ce(x[r],e,d,n,a,l,s):("\x1e"==n.b?b(e,n.a):e.appendChild(Ye(n,e,a)),a.b=1);for(r=g;r<f;r++)1==(o=x[g]).nodeType&&l.unmountZone(o),e.removeChild(o)}}else a.b=1,b(e,i.c)},Ce=(e,t,i,a,l,s,r)=>{let o=i.g,d=a.g,n=i.b;if(i.e||i.a!=a.a)if(n==a.b){if(n==Pe)l.b=1,e.nodeValue=a.a;else if("\x1e"==n)l.b=1,b(t,a.a);else if(!o.mxs||o.mxs!=d.mxs){let t,p,c,u,h,f,g,_=d["mx-view"],x=a.c,b=i.f!=a.f,m=X(je,n)||b,y=te[e.b],w=_&&B(_);if(m&&(m=Ie(e,i,a,b))&&(l.b=1),_&&y&&y.g==w.path&&(u=y.a)){if(f=x!=i.c,g=_!=y.path,c=o.mxv,!f&&!g&&c)for(c of h=c.split(","))if("#"==c||X(r,c)){g=1;break}(g||f||m)&&((c=u.h&&u.m)?(h=w.params,ie(y.pId,_,h),y.path=_,T(c,h,u)&&l.a.push(u),t=!u.tmpl):(p=1,t=1))}else t=1,p=y;p&&(l.b=1,y.unmountVframe(0,1)),t&&!a.j&&Oe(e,i,a,l,s,r)}}else"\x1e"==i.b?b(t,a.a):(s.unmountZone(e),t.replaceChild(Ye(a,t,l),e)),l.b=1},Le={},Ne=k({get:e=>e?Le[e]:Le,set(e){k(Le,e)}},ee),Fe=/^(\$?)([^<]*)<([^>]+)>(?:&(.+))?$/,Ve=(e,t,i)=>(e.a?i=e:((i=function(e){T(i.a,e,this)}).a=[e],i.b=1),i.a=i.a.concat(t.a||t),i),Re=(e,t,i,a,l)=>{a=e[t],e[t]=e[i]=function(...e){(l=this).d>0&&(l.d++,l.fire("rendercall"),T(a,e,l))}},Be=(e,t)=>{let i,{n:a,i:l,o:s,id:r}=e;for(i in a)he(i,l[i],t);for(i of(a=t?V:F,s))a(i.a,i.b,i.c,r,i.d,e)},De={win:i,doc:a},We=(e,t,i)=>{let a,l,s,r,o={};for(l of e)for(a in l)s=l[a],r=o[a],"ctor"!=a?(Fe.test(a)&&(r?s=Ve(r,s):s.b=1),o[a]=s):i.push(s);for(a in o)X(t,a)||(t[a]=o[a])};function Ue(...e){let t=this.a||(this.a=[]);return We(e,this[c],t),this}let He=e=>{if(!e["\x1e"]){e["\x1e"]=[];let t,i,a,l,s,r,o,d,n,p,u,h=e[c],f={},g=[],_={};for(o in(i=h.mixins)&&We(i,h,e["\x1e"]),h)if(t=h[o],i=o.match(Fe)){if([,r,a,l,u]=i,p={},u)for(d of u=u.split(","))p[d]=!0;for(d of l=l.split(",")){if(s=De[a],n=1,r){if(s){g.push({c:t,a:s,b:d,d:p});continue}n=2,(s=_[d])||(s=_[d]=[]),s[a]||(s[a]=1,s.push(a))}f[d]=f[d]|n,(s=h[d=a+"\x1e"+d])?s.b&&(t.b?h[d]=Ve(t,s):X(h,o)&&(h[d]=t)):h[d]=t}}Re(h,"render","g"),h.n=f,h.o=g,h.i=_,h.m=h.assign}return e["\x1e"]};function Ge(e,t,i,a,l){(l=this).root=t,l.owner=i,l.id=e,l.d=1,l.k=1,l.e={id:e},l.a=new Map,l.f=[],l.j={},(e=Ge.a)&&T(e,a,l)}function qe(){this.id=_("b"),this.a={}}k(Ge,{merge:Ue,extend:function e(t,i){let a=this,l=(t=t||{}).ctor,s=[];function r(e,t,i,l,o,d,n,p){a.call(p=this,e,t,i,l,o),(d=r.a)&&T(d,l,p),(n=s.concat(o)).length&&T(n,l,p)}return l&&s.push(l),r.merge=Ue,r.extend=e,J(r,a,t,i)}}),k(Ge[c],ee,{init:r,render:r,endUpdate(e,t,i,a){(t=this).d>0&&(a=t.h,t.h=1,(i=t.owner).mountZone(e),a||l(t.wrapAsync(((e,t,i)=>{for(t=e.c;t.length;)(i=t.shift()).r||q(e.invoke,[i.n,i.a],e),delete t[i.k]}).bind(i,i))))},wrapAsync(e,t){let i=this,a=i.d;return(...l)=>{if(a>0&&a==i.d)return e.apply(t||i,l)}},observeLocation(e,t){let i;(i=this.b).a=1,f(e)&&(t=e.path,e=e.params),i.b=t,e&&(i.c=(e+"").split(","))},get(e,t){return t=this.e,e&&(t=t[e]),t},set(e,t){let i,a,l,s=this,r=s.e,o=s.j,d=s.k;for(l in e)i=e[l],a=r[l],w(i)&&a===i||X(t,l)||(o[l]=1,d=1),r[l]=i;return s.k=d,s},digest(e,t,i){let a=this.set(e,t),l=a.f;i&&l.push(i),l.a||Me(a,l)}}),k(qe[c],{get(e,t){let i,a=this.a;if(e){let t,i=g(e)?e.slice():(e+"").split(".");for(;(t=i.shift())&&a;)a=a[t];t&&(a=void 0)}return void 0!==t&&(i=h(t))!=h(a)&&(a=t),a},set(e,t){f(e)||(e={[e]:t}),k(this.a,e)}});let Ke=(e,t,i)=>a=>{(i=e[t])&&(delete e[t],T(i,a,i.a))},Qe=(e,t,i,a,l,s)=>{let r=[],o=null,d=0;return function(n,c){let u;d++;let h,f=this,g=f.b,_=g.a;if(r[n+1]=f,c?(o=c,u=1):s.has(_)||(_&&s.set(_,f),g.b=p(),(h=g.c)&&T(h,f,f),u=1),!i.a){let t=d==a;t&&(i.b=0,2==l&&(r[0]=o,T(e,r,i))),1==l&&T(e,[c||null,f,t,n],i)}u&&t.fire("end",{bag:f,error:c})}},Je=(e,t,i,a,l)=>{if(e.a)return e;if(e.b)return e.enqueue(Je.bind(e,e,t,i,a,l));e.b=1,g(t)||(t=[t]);let s=e.constructor,r=0,o=s.d,d=Qe(i,s,e,t.length,a,s.c);for(let e of t)if(e){let t,[i,a]=s.get(e,l),n=i.b.a,p=d.bind(i,r++);n&&o[n]?o[n].push(p):a?(n&&((t=[p]).a=i,o[n]=t,p=Ke(o,n)),s.e(i,p)):p()}return e};function Ze(){this.id=_("s"),this.f=[]}k(Ze[c],{all(e,t){return Je(this,e,t,2)},save(e,t){return Je(this,e,t,2,1)},one(e,t){return Je(this,e,t,1)},enqueue(e){let t=this;return t.a||(t.f.push(e),t.dequeue(t.g)),t},dequeue(...e){let t,i=this;i.b||i.a||(i.b=1,l(()=>{i.b=0,i.a||(t=i.f.shift())&&T(t,i.g=e)}))},destroy(e){(e=this).a=1,e.f=0}});let $e=(e,t,i)=>[o(t),o(e)].join("\x1e"),et=k({add(e){let t,i=this.h;for(t of(g(e)||(e=[e]),e))if(t){let{name:e,cache:a}=t;t.cache=0|a,i[e]=t}},create(e){let t=this.meta(e),i=0|e.cache||t.cache,a=new qe;a.set(t),a.b={c:t.after,a:i&&$e(t,e)},f(e)&&a.set(e);let l=t.before;return l&&T(l,a,a),this.fire("begin",{bag:a}),a},meta(e){return this.h[e.name||e]||e},get(e,t){let i,a,l=this;return t||(i=l.cached(e)),i||(i=l.create(e),a=1),[i,a]},cached(e){let t,i,a=this,l=a.c,s=a.meta(e),r=0|e.cache||s.cache;if(r&&(i=$e(s,e)),i){let e=a.d[i];e?t=e.a:(t=l.get(i))&&p()-t.b.b>r&&(l.del(i),t=0)}return t}},ee);Ze.extend=((e,t,i)=>{function a(){Ze.call(this)}return a.e=e,a.c=new O(t,i),a.d={},a.h={},J(a,Ze,null,et)});let tt={config:(e,t)=>(t=y,e&&(t=f(e)?k(t,e):t[e]),t),boot(e){k(y,e),((e,t)=>($||(e=y.rootId,(t=x(e))||(t=d),$=new se(t)),$))().mountView(y.defaultView)},toMap:(e,t)=>{let i,a={};if(e)for(i of e)a[t&&i?i[t]:i]=t?i:1+(0|a[i]);return a},toTry:T,toUrl:(e,t,i)=>{let a,l,r,o=[];for(l in t)a=t[l]+"",(!i||a||X(i,l))&&(a=s(a),o.push(r=l+"="+a));return r&&(e+=(e&&(~e.indexOf("?")?"&":"?"))+o.join("&")),e},parseUrl:B,guid:_,use:K,dispatch:(e,t,i)=>{let a=new Event(t,L);k(a,i),e.dispatchEvent(a)},guard:Z,type:h,has:X,inside:v,applyStyle:P,Cache:O,View:Ge,Vframe:se,State:Ne,Service:Ze,Event:ee,node:x};return tt.default=tt,tt});let Designer={init(e){let t=document.getElementById("boot").src.replace(/\/[^\/]+$/,"/");seajs.config({paths:{designer:t+"designer",i18n:t+"i18n",gallery:t+"gallery",util:t+"util",panels:t+"panels",elements:t+"elements"},alias:{magix:"magix5"}}),seajs.use(["magix","i18n/index"],(t,i)=>{t.applyStyle("p_",'body,h5,input,p,textarea,ul{margin:0;padding:0}ul{list-style-type:none;list-style-image:none}a{background-color:transparent}a:active,a:hover{outline-width:0}a:focus{outline:1px dotted}html{-webkit-text-size-adjust:100%;-moz-text-size-adjust:100%;-ms-text-size-adjust:100%;text-size-adjust:100%;font-size:62.5%}body{font-size:14px;line-height:1.5}body,button,input,textarea{font-family:helvetica neue,arial,hiragino sans gb,stheiti,wenquanyi micro hei,sans-serif;-ms-text-autospace:ideograph-alpha ideograph-numeric ideograph-parenthesis;-ms-text-spacing:ideograph-alpha ideograph-numeric ideograph-parenthesis;text-spacing:ideograph-alpha ideograph-numeric ideograph-parenthesis}h5{font-size:14px}img{border-style:none;width:auto\\9;height:auto;max-width:100%;vertical-align:top;-ms-interpolation-mode:bicubic}svg:not(:root){overflow:hidden}button,input,textarea{font-family:inherit;font-size:100%;margin:0;vertical-align:middle;*vertical-align:middle}button,input{*overflow:visible}button{text-transform:none}button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;-moz-appearance:button;appearance:button;cursor:pointer}button[disabled],input[disabled]{cursor:not-allowed}input[type=checkbox],input[type=radio]{box-sizing:border-box;padding:0;*height:13px;*width:13px}button::-moz-focus-inner,input::-moz-focus-inner{border-style:none;padding:0}textarea{overflow:auto;resize:vertical}@media screen and (-webkit-min-device-pixel-ratio:0){input{line-height:normal!important}}input::-moz-placeholder,textarea::-moz-placeholder{color:#a9a9a9;opacity:1}label{cursor:pointer}html{box-sizing:border-box}*,:after,:before{box-sizing:inherit}a:focus,button:focus,input:focus,textarea:focus{outline:none;resize:none}a{color:#fa742b;text-decoration:none}a:focus,a:hover{color:#bd361b}a:active,a:focus,a:hover,a:visited{outline:0;text-decoration:none}label{cursor:default;display:inline-block;max-width:100%;font-weight:400}::-ms-clear{display:none}@font-face{font-family:pa;src:url("data:application/x-font-woff;charset=utf-8;base64,d09GRgABAAAAAAcsAAsAAAAACqQAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAADMAAABCsP6z7U9TLzIAAAE8AAAARAAAAFZXOEjOY21hcAAAAYAAAACWAAACCs4hbhBnbHlmAAACGAAAAugAAAO0BG1azWhlYWQAAAUAAAAALwAAADYPpP4TaGhlYQAABTAAAAAcAAAAJAfeA4pobXR4AAAFTAAAABQAAAAkI+kAAGxvY2EAAAVgAAAAFAAAABQEcAVsbWF4cAAABXQAAAAfAAAAIAEYAF1uYW1lAAAFlAAAAUUAAAJtPlT+fXBvc3QAAAbcAAAATwAAAGizaRo4eJxjYGRgYOBikGPQYWB0cfMJYeBgYGGAAJAMY05meiJQDMoDyrGAaQ4gZoOIAgCKIwNPAHicY2Bk/ss4gYGVgYOpk+kMAwNDP4RmfM1gxMjBwMDEwMrMgBUEpLmmMDgwVDy7z9zwv4EhhrmB4RRQmBEkBwA4Ig2aeJzFkbsNwzAMRE+RP0IQwEEG8AReyl1Kl+68g5Eqy7m7NZyj6EZI6viEJ4AnkRJIADWAKAZRAeGNANNLbsh+xDX7FZ6KH7jLuWBmYseeIxeu3PZdZ7+8UkH55TIvIql6raoNWhnNV97fFM57utQt79MRJTEf6ItMjk2OnWN32Ds2SY6OTZiLow6Dq6Neg5uD9gPbdC1VAAB4nH1SO2sUURi9370zd3Zmd+48dh77yr4mO7MmutlsxkkR3DQ2GgtBCAhaCBY2SrAwjUUw5CEo+A/EoAgR1LBpArEUQVBs3MrCYEAbY+xsMnpHV0ghDsM9936cj+9xDhIR+rlDtkkOZVETjaOT6CxCQEehzvAQ1IKwhUfBrom2azESeEFN8uotcgLcOrWcThT6LpWoBgzKMFHrREELB3A87OIp6DhDAPli4ZzZKJnkHii5oLwUn8ZrYFe8ktY9Fp86Om11qtnUfMY086Z5J0VFMYWxoDG46jqyKCs0fihqBXu7cgRXIJMPCmfOq9WieWk1vDbUcGWAhQXIFqvs8bRRMPh/s+Bkzbykq6lcQfWGLZjfTeeymSH/E+If5rNG5AfxURpNJVMiyUFuhCZ9RFzH0oDWx8CvDzCchigcYKcCTmeACc/CqB/vUgqlfh9KlMa7ZxYZa2gNbZH5bJFjg7FFVf1XkPic3j+UfrD3/4RDwT8z3CIH5AbKowZCYuAHXTjegoCBVAa3E006Sa9R2OCxLkzyGAPy9aMkj7bFvc3NPZGfM0uRIH00RqoHmys9Qnorv09vRxKipZneN0H41uPE9qgs7WjVkZecsNwThN7ySg8Br79AhskC9wuSsWPRegCuH062x/l6HIvY8Syss3JTizWPMXirNctkJJ6NZ/mFwXdPa+rwRis3uR6QiEIu4s9cDwQ1wzNqds2YMGrkQry/Gu+Dvgo69EEfvNDfHPwS9pL6v8UKfG7FSuK/KFEMvxBNae0+NTPicyKTtLghwhdRXFsTlaz0jAhAN4j5t/YsbCGCUJbXfYLXD/jz+sAn78lrMoJaaIxTJcpXym3uJbbg6rcwLzQGLegCv0xz6CRL5z1gKpGtR7oQYJpWtUz6nW2/UosOg7agP1Uk2WKfnPQV6pZcejntfGaWLCnw4K7h7Kp2SqZzijInYd1Wv7j6baVQNHBTsD5kNC3zwRKa2CgWFN7eL0lutBh4nGNgZGBgAGLnEJdv8fw2Xxm4WRhA4JrTXQME/d+MhYG5AcjlYGACiQIAFvYJkgB4nGNgZGBgbvjfwBDDwgACQJKRARVwAgBHDwJyeJxjYWBgYH7JwMDCgBsDAB8LAQ0AAAAAAHYA2AEYAT4BWAF8AYoB2nicY2BkYGDgZAhkYGUAASYg5gJCBob/YD4DABGZAXYAeJxlj01OwzAQhV/6B6QSqqhgh+QFYgEo/RGrblhUavdddN+mTpsqiSPHrdQDcB6OwAk4AtyAO/BIJ5s2lsffvHljTwDc4Acejt8t95E9XDI7cg0XuBeuU38QbpBfhJto41W4Rf1N2MczpsJtdGF5g9e4YvaEd2EPHXwI13CNT+E69S/hBvlbuIk7/Aq30PHqwj7mXle4jUcv9sdWL5xeqeVBxaHJIpM5v4KZXu+Sha3S6pxrW8QmU4OgX0lTnWlb3VPs10PnIhVZk6oJqzpJjMqt2erQBRvn8lGvF4kehCblWGP+tsYCjnEFhSUOjDFCGGSIyujoO1Vm9K+xQ8Jee1Y9zed0WxTU/3OFAQL0z1xTurLSeTpPgT1fG1J1dCtuy56UNJFezUkSskJe1rZUQuoBNmVXjhF6XNGJPyhnSP8ACVpuyAAAAHicbccxDoAgDAXQfkQEbsOR6gLVpAykCeH0xrj6tkeOPpn+JThs8NgRcCAiIRNmqMZ6ShjdhvU4hbUu6/4SLnE11pulvFM/RSvRA98yEWMA") format("woff")}.p_{font-family:pa;line-height:1;font-size:16px;font-style:normal;font-weight:400;font-variant:normal;display:inline-block;speak:none;position:relative;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.pa{margin-right:10px}.pb{height:100%}.pc{text-align:center}.pd{float:left}.pe{float:right}.pf{position:absolute}.pg{position:relative}html .ph{display:none}.pi:after,.pi:before{content:" ";display:table}.pi:after{clear:both}.pj{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.pk::-webkit-scrollbar,.pk::-webkit-scrollbar-corner{height:8px;width:8px;background:#fafafa}.pk::-webkit-scrollbar-thumb{background:silver}.pk::-webkit-scrollbar-thumb:hover{background:#949494}.pl{word-wrap:normal;overflow:hidden;text-overflow:ellipsis}.pl,.pm{white-space:nowrap}.pm{outline:none;display:inline-block;font-weight:400;text-align:center;vertical-align:middle;cursor:pointer;background-image:none;background-color:#ccc;padding:4px 14px;font-size:14px;line-height:1;border:0;color:#333;border-radius:2px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.pm:focus,.pm:hover{background-color:#a0a0a0;color:#333}.pn{background-color:#fa742b;color:#fff}.pn:focus,.pn:hover{background-color:#bd361b;color:#fff}.pm[disabled]{background-color:#fbfbfb;color:#333}.pm[disabled]:hover{border-color:#e6e6e6;color:#333}.po{padding:8px 25px;border-bottom:1px solid #e6e6e6;color:#333;margin:0;line-height:1.42857143;background:#fff}.pp{padding:18px 25px}.pq{padding:8px 25px;text-align:left;border-top:1px solid #e6e6e6;background:#fff}.pr{padding:150px 0;margin:0 auto;width:150px;text-align:center;line-height:0}.pr:after,.pr:before{content:""}.pr:after,.pr:before,.ps{width:14px;height:14px;background-color:#ccc;border-radius:100%;display:inline-block;-webkit-animation:p_ 1s ease-in-out infinite both;animation:p_ 1s ease-in-out infinite both}.pr:before{-webkit-animation-delay:-.32s;animation-delay:-.32s}.ps{margin:0 10px;-webkit-animation-delay:-.16s;animation-delay:-.16s}@-webkit-keyframes p_{0%,80%,to{-webkit-transform:scale(0);transform:scale(0)}40%{-webkit-transform:scale(1);transform:scale(1)}}@keyframes p_{0%,80%,to{-webkit-transform:scale(0);transform:scale(0)}40%{-webkit-transform:scale(1);transform:scale(1)}}::-webkit-input-placeholder{color:#999}:-ms-input-placeholder{color:#999}::-ms-input-placeholder{color:#999}::placeholder{color:#999}::-moz-selection{background-color:rgba(243,123,99,.6)}::selection{background-color:rgba(243,123,99,.6)}.pt,.pu{caret-color:#fa742b;display:inline-block;height:22px;padding:3px 4px;border-radius:2px;box-sizing:border-box;box-shadow:none;border:1px solid #e6e6e6;background-color:#fff;color:#333;width:140px;vertical-align:middle;max-width:100%;outline:none;transition:border-color .25s}.pt:hover,.pu:hover{border-color:#ccc}.pt:focus,.pu:focus,.pv,.pv:hover{border-color:#fa742b!important}.pu{height:auto}.pt[disabled],.pu[disabled]{background-color:#fbfbfb}.pt[disabled]:hover,.pu[disabled]:hover{cursor:not-allowed;border-color:#e6e6e6}@font-face{font-family:pb;src:url(//at.alicdn.com/t/font_890516_eswgcdxwbm7.eot);src:url(//at.alicdn.com/t/font_890516_eswgcdxwbm7.eot#iefix) format("embedded-opentype"),url(//at.alicdn.com/t/font_890516_eswgcdxwbm7.woff2) format("woff2"),url(//at.alicdn.com/t/font_890516_eswgcdxwbm7.woff) format("woff"),url(//at.alicdn.com/t/font_890516_eswgcdxwbm7.ttf) format("truetype"),url(//at.alicdn.com/t/font_890516_eswgcdxwbm7.svg#iconfont) format("svg")}.pw{font-family:pb;line-height:1;font-size:16px;font-style:normal;font-weight:400;font-variant:normal;display:inline-block;speak:none;position:relative;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}#app,body,html{height:100%;overflow:hidden}body{min-width:1100px}.px{font-size:12px}.py{margin-right:2px}.pz{-webkit-transform:rotate(180deg);transform:rotate(180deg)}.pA{-webkit-transform:rotate(90deg);transform:rotate(90deg)}.pB{-webkit-transform:scaleX(-1);transform:scaleX(-1)}.pC{margin-left:100px}.pD{margin-right:50px}.pE{display:flex;align-items:center}.pF{position:-webkit-sticky;position:sticky;top:0}');let a=navigator.language.toLowerCase();try{let e=window.localStorage;e&&(a=e.getItem("l.lang")||a)}catch(e){}t.config(e),t.config({lang:a});let l=i.default;t.View.merge({ctor(){this.set({i18n:l})},_dC(e,t){t=t||150;let i,a=Date.now();return(...l)=>{let s=Date.now();clearTimeout(i),s-a>t?(a=s,e.apply(this,l)):i=setTimeout(()=>{e.apply(this,l)},t-(s-a))}}}),document.title=l("l"),t.boot({defaultPath:"/index",defaultView:"designer/index",rootId:"app",error(e){setTimeout(()=>{throw e},0)}})})}};define("gallery/mx-color/index",["magix","../mx-dragdrop/index","../mx-monitor/index"],(e,t,i)=>{let a,l,s,r,o,d,n,p,c,u,h,f,g={class:"paM"},_={xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%"},x={class:"paE pg"},b={class:"paR"};Object.defineProperty(t,"__esModule",{value:!0});const m=e("magix"),y=e("../mx-dragdrop/index"),w=e("../mx-monitor/index");m.default.applyStyle("ph",'.paD{position:relative;height:22px;border:1px solid #e6e6e6;border-radius:2px;display:flex;align-items:center;cursor:pointer;padding:1px;transition:border-color .25s}.paD:hover{border-color:#ccc}.paE,.paF{background:#fff;background-image:linear-gradient(45deg,#eee 25%,transparent 0,transparent 75%,#eee 0),linear-gradient(45deg,#eee 25%,transparent 0,transparent 75%,#eee 0);background-position:0 0,6px 6px;background-size:12px 12px}.paF{min-width:18px;height:18px;text-indent:-100000em;border:1px solid #ccc;position:relative}.paG{padding:3px 4px}.paF:after{content:" ";display:block;right:0;bottom:0;position:absolute;border-color:transparent #ccc;border-style:solid;border-width:6px 6px 0 0}.paH{position:absolute;border-radius:2px;z-index:300;border:1px solid #e6e6e6;background-color:#fff;display:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;padding:2px}.paI-bottom{top:100%;margin-top:4px}.paI-top{bottom:100%;margin-bottom:4px}.paJ{width:176px}.paK{border:1px solid #000;float:left;width:12px;height:12px;margin:-1px 0 0 -1px;position:relative}.paL:before{content:" ";position:absolute;left:2px;top:2px;border:1px inset #e8e8e8;width:6px;height:6px}.paM{margin:5px 0;height:150px}.paN{position:relative;float:left;width:148px;height:148px}.paO{position:absolute;width:8px;height:8px;box-shadow:0 0 0 1.5px #fff,inset 0 0 1px 1px rgba(0,0,0,.3),0 0 1px 2px rgba(0,0,0,.4);border-radius:50%;left:-4px;top:-4px}.paP{width:18px;height:148px;position:relative;float:left;margin-left:10px}.paQ{position:absolute;left:2px;top:-2px;height:4px;width:14px;box-shadow:0 0 0 1.5px #fff,inset 0 0 1px 1px rgba(0,0,0,.3),0 0 1px 2px rgba(0,0,0,.4);background:#fff}.paR{height:25px}.paS{width:80px}.paT,.paS{margin-right:5px;vertical-align:middle}.paT{width:30px;border-radius:2px;height:22px;display:inline-block;border:1px solid #ddd}.paU{position:absolute;right:5px;top:4px;font-size:12px;opacity:.2}.paU:hover{opacity:.5}.paE{width:174px;height:12px;margin-bottom:5px}.paV{height:100%}.paW{position:absolute;left:-2px;top:2px;height:8px;width:4px;box-shadow:0 0 0 1.5px #fff,inset 0 0 1px 1px rgba(0,0,0,.3),0 0 1px 2px rgba(0,0,0,.4);background:#fff}.paX{cursor:not-allowed;background-color:#fbfbfb}.paX:hover{border-color:#e6e6e6}.paX:hover .paU{opacity:.1}.paX .paF{opacity:.4}.paX .paU{opacity:.1}');let v=["d81e06","f4ea2a","1afa29","1296db","13227a","d4237a","ffffff","e6e6e6","dbdbdb","cdcdcd","bfbfbf","8a8a8a","707070","515151","2c2c2c","000000","ea986c","eeb174","f3ca7e","f9f28b","c8db8c","aad08f","87c38f","83c6c2","7dc5eb","87a7d6","8992c8","a686ba","bd8cbb","be8dbd","e89abe","e8989a","e16632","e98f36","efb336","f6ef37","afcd51","7cba59","36ab60","1baba8","17ace3","3f81c1","4f68b0","594d9c","82529d","a4579d","db649b","dd6572","d84e06","e0620d","ea9518","f4ea2a","8cbb1a","2ba515","0e932e","0c9890","1295db","0061b2","0061b0","004198","122179","88147f","d3227b","d6204b"],k=(e,t,i)=>{let a,l,s,r,o;e=e%360/60,a=l=s=i-(o=i*t);let d=255*(a+=[o,r=o*(1-Math.abs(e%2-1)),0,0,r,o][e=~~e]),n=255*(l+=[r,o,o,r,0,0][e]),p=255*(s+=[0,0,r,o,o,r][e]);return{r:d,g:n,b:p,hex:"#"+(16777216|p|n<<8|d<<16).toString(16).slice(1)}};t.default=m.default.View.extend({tmpl:(e,t,i,m,y,w,v,k)=>{let A,S,M,z,j,E,P,T,X,I,Y=[],{disabled:O,id:C,text:L,textWidth:N,color:F,clear:V,i18n:R,placement:B,align:D,renderUI:W,shortcuts:U,alpha:H,current:G}=e;if(S=[],L&&(j=[t(0,0,L)],z="",N&&(z+="width:"+m(N)+"px"),M=[t("div",{class:"paG pj","mx-click":i+"\x1e_bA()",style:z},j)],S.push(...M)),M=[t(0,0,"picker")],z="",F&&(z+="background:"+m(F)+";"),L||(z+="width:100%"),S.push(t("div",{class:"paF pj","mx-click":i+"\x1e_bA()",style:z},M)),V&&F&&(j=[t(0,0,"\ue67f")],M=[t("i",{class:"p_ paU","mx-click":i+"\x1e_bB()",title:m(R("aS"))},j)],S.push(...M)),M=[],W){j=[],E=[];for(let e=0,a=U,l=a.length;e<l;e++){let l=a[e];P=[t("li",{class:"paK",id:"sc_"+m(l)+"_"+m(C),style:"background:#"+m(l),"mx-click":i+"\x1e_bx({color:'#"+k(l)+"'})"})],E.push(...P)}j.push(t("ul",{class:"paJ pi",id:"scs_"+m(C)},E)),I=a?[a]:[a=t("stop",{mxs:"py:_",offset:"0%","stop-color":"#000000","stop-opacity":"1"})],l?I.push(l):I.push(l=t("stop",{mxs:"py:a",offset:"100%","stop-color":"#CC9A81","stop-opacity":"0"})),X=[t("lineargradient",{id:"gb_"+m(C),x1:"0%",y1:"100%",x2:"0%",y2:"0%"},I)],I=s?[s]:[s=t("stop",{mxs:"py:b",offset:"0%","stop-color":"#FFFFFF","stop-opacity":"1"})],l?I.push(l):I.push(l=t("stop",{mxs:"py:a",offset:"100%","stop-color":"#CC9A81","stop-opacity":"0"})),X.push(t("lineargradient",{id:"gw_"+m(C),x1:"0%",y1:"100%",x2:"100%",y2:"100%"},I)),T=[t("defs",0,X),t("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#gw_"+m(C)+")"}),t("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#gb_"+m(C)+")"})],P=[t("svg",_,T),t("div",{class:"paO",id:"ci_"+m(C)})],E=[t("div",{class:"paN",id:"cz_"+m(C),"mx-mousedown":i+"\x1e_bt()"},P)],I=r?[r]:[r=t("stop",{mxs:"py:c",offset:"0%","stop-color":"#FF0000","stop-opacity":"1"})],o?I.push(o):I.push(o=t("stop",{mxs:"py:d",offset:"13%","stop-color":"#FF00FF","stop-opacity":"1"})),d?I.push(d):I.push(d=t("stop",{mxs:"py:e",offset:"25%","stop-color":"#8000FF","stop-opacity":"1"})),n?I.push(n):I.push(n=t("stop",{mxs:"py:f",offset:"38%","stop-color":"#0040FF","stop-opacity":"1"})),p?I.push(p):I.push(p=t("stop",{mxs:"py:g",offset:"50%","stop-color":"#00FFFF","stop-opacity":"1"})),c?I.push(c):I.push(c=t("stop",{mxs:"py:h",offset:"63%","stop-color":"#00FF40","stop-opacity":"1"})),u?I.push(u):I.push(u=t("stop",{mxs:"py:i",offset:"75%","stop-color":"#0BED00","stop-opacity":"1"})),h?I.push(h):I.push(h=t("stop",{mxs:"py:j",offset:"88%","stop-color":"#FFFF00","stop-opacity":"1"})),f?I.push(f):I.push(f=t("stop",{mxs:"py:k",offset:"100%","stop-color":"#FF0000","stop-opacity":"1"})),X=[t("lineargradient",{id:"ghsv_"+m(C),x1:"0%",y1:"100%",x2:"0%",y2:"0%"},I)],T=[t("defs",0,X),t("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#ghsv_"+m(C)+")"})],P=[t("svg",_,T),t("div",{class:"paQ",id:"si_"+m(C)})],E.push(t("div",{class:"paP","mx-mousedown":i+"\x1e_bu()"},P)),j.push(t("div",g,E)),H&&(T=[t("div",{class:"paW",id:"ai_"+m(C)})],P=[t("div",{class:"paV pg",id:"at_"+m(C),"mx-mousedown":i+"\x1e_bv()"},T)],E=[t("div",x,P)],j.push(...E)),E=[t("span",{class:"paT",id:"bc_"+m(C)}),t("input",{class:"pt paS",readonly:!0,id:"v_"+m(C),value:m(G)},0,1)],P=[t(0,0,"\u786e\u5b9a")],E.push(t("button",{mxs:"py:l",class:"pm pn",type:"button","mx-click":i+"\x1e_bw();"},P)),j.push(t("div",b,E)),M.push(...j)}return S.push(t("div",{id:"bd_"+m(C),class:"paH paI-"+m(B),style:m(D)+":-1px"},M)),A="paD",O&&(A+=" paX"),Y.push(t("div",{"mx-contextmenu":i+"\x1e_B()",id:"root_"+m(C),class:A},S)),t(i,0,Y)},mixins:[y.default],init(e){this.set({shortcuts:v}),w.default._bj(),this.on("destroy",()=>{w.default._ax(this),w.default._bk()}),this.assign(e)},assign(e){return this._aa=e.color,this._bl=e.alpha+""=="true",this._bm={h:0,s:1,v:1},this.set({clear:e.clear+""=="true",text:e.text||"",disabled:e.disabled+""=="true",align:e.align||"left",textWidth:e.textWidth||0,placement:e.placement||"bottom"}),!0},render(){this.digest({alpha:this._bl,color:this._aa,current:this._aa})},_bp(e,t){let i=this,a=i._bm;a.h=e.h,a.s=e.s,a.v=e.v;let l=k(e.h,e.s,e.v).hex,s=m.default.node("cz_"+i.id),r=s.clientWidth,o=k(e.h,1,1);if(s.style.background=o.hex,i._bn=l,i._bo(),!t){let e=m.node("scs_"+i.id).querySelector('li[class$="paL"]');e&&e.classList.remove("paL");let t=m.node("si_"+i.id),l=t.clientHeight/2,s=Math.round(a.h*r/360-l),o=m.node("ci_"+i.id),d=o.clientWidth/2;t.style.top=s+"px",s=Math.round((1-a.v)*r-d);let n=Math.round(a.s*r-d);o.style.left=n+"px",o.style.top=s+"px"}let d=m.node("sc_"+l.substr(1,6)+"_"+i.id);d&&d.classList.add("paL")},_bs(e){let t=this,i=parseInt(e.substr(1,2),16);isNaN(i)&&(i=255);let a=parseInt(e.substr(3,2),16);isNaN(a)&&(a=255);let l=parseInt(e.substr(5,2),16);isNaN(l)&&(l=255);let s=((e,t,i)=>{let a,l,s,r;return e/=255,t/=255,i/=255,{h:a=(a=0==(r=(s=Math.max(e,t,i))-Math.min(e,t,i))?null:s==e?(t-i)/r+(t<i?6:0):s==t?(i-e)/r+2:(e-t)/r+4)%6*60,s:l=0===r?0:r/s,v:s}})(i,a,l),r=parseInt(e.substr(7,2),16);isNaN(r)&&(r=255),t._bq=("0"+r.toString(16)).slice(-2),t._bp(s),t._bl&&t._br(r)},_br(e){let t=m.node("ai_"+this.id);e/=255,e*=m.node("at_"+this.id).clientWidth,e-=t.clientWidth/2,t.style.left=e+"px"},_bo(){let e=this,t=m.node("bc_"+e.id),i=e._bn;e._bl&&(m.node("at_"+e.id).style.background="linear-gradient(to right, "+i+"00 0%,"+i+" 100%)",i+=e._bq),t.style.background=i,m.node("v_"+e.id).value=i},"_B<contextmenu>"(e){e.preventDefault()},"_bt<mousedown>"(e){let t=this,i=m.node("cz_"+t.id).clientWidth,a=m.node("ci_"+t.id).clientWidth/2,l=e.eventTarget.getBoundingClientRect(),s=e.pageX-l.left-window.pageXOffset,r=e.pageY-l.top-window.pageYOffset,o=s/i,d=(i-r)/i;t._bp({h:t._bm.h,s:o,v:d});let n=m.node("ci_"+t.id),p=getComputedStyle(n),c=p.left,u=p.top,h=parseInt(c,10),f=parseInt(u,10),g=e;t._x(e,e=>{let l=e.pageY-g.pageY,s=e.pageX-g.pageX;(l+=f)<=-a?l=-a:l>=i-a&&(l=i-a),(s+=h)<=-a?s=-a:s>=i-a&&(s=i-a),n.style.left=s+"px",n.style.top=l+"px";let r=(s+a)/i,o=(i-(l+a))/i;t._bp({h:t._bm.h,s:r,v:o})})},"_bu<mousedown>"(e){let t=this,i=e.eventTarget,a=m.node("si_"+t.id),l=m.node("cz_"+t.id).clientWidth,s=a.clientHeight/2,r=i.getBoundingClientRect(),o=(e.pageY-r.top-window.scrollY)/l*360;t._bp({h:o,s:t._bm.s,v:t._bm.v});let d=parseInt(getComputedStyle(a).top,10);t._x(e,i=>{let r=i.pageY-e.pageY;(r+=d)<=-s?r=-s:r>=l-s&&(r=l-s),a.style.top=r+"px";let o=(r+s)/l*360;t._bp({h:o,s:t._bm.s,v:t._bm.v},!0)})},"_bv<mousedown>"(e){let t=e.eventTarget,i=this,a=m.node("ai_"+i.id),l=m.node("at_"+i.id).clientWidth,s=a.clientWidth/2,r=t.getBoundingClientRect(),o=(e.pageX-r.left)/l*255|0;i._bq=("0"+o.toString(16)).slice(-2),i._br(o),i._bo();let d=getComputedStyle(a),n=parseInt(d.left,10);i._x(e,t=>{let r=t.pageX-e.pageX;(r+=n)<=-s?r=-s:r>=l-s&&(r=l-s),a.style.left=r+"px";let o=Math.round((r+s)/l*255);i._bq=("0"+o.toString(16)).slice(-2),i._bo()})},"_bw<click>"(){let e=this;e._z();let t=m.node("v_"+e.id).value;t!=e._aa&&(e.digest({color:t,current:t}),m.default.dispatch(e.root,"input",{color:e._aa=t}))},"_bx<click>"(e){this._bs(e.params.color),e.eventTarget.classList.add("paL")},_by(e){return m.default.inside(e,this.root)},_y(){let e=m.node("bd_"+this.id);"none"==getComputedStyle(e).display&&(e.style.display="block",w.default._ay(this),m.node("root_"+this.id).classList.add("pv"),this._bz||(this.digest({renderUI:!0},null,()=>{this._bs(this._aa)}),this._bz=1))},_z(){let e=m.node("bd_"+this.id);"none"!=getComputedStyle(e).display&&(m.node("root_"+this.id).classList.remove("pv"),e.style.display="none",w.default._ax(this))},"_bA<click>"(){if(this.get("disabled"))return;let e=m.node("bd_"+this.id);"none"==getComputedStyle(e).display?this._y():this._z()},"_bB<click>"(){if(this.get("disabled"))return;let e=this;if(e._bz){let t=m.node("v_"+e.id).value;e._z(),e.digest({color:"",current:t})}else e.digest({color:""});m.default.dispatch(e.root,"input",{color:e._aa=""})}})}),define("gallery/mx-dialog/alert",["magix","../../i18n/index"],(e,t,i)=>{let a={class:"po"},l={class:"pp",style:"word-break:break-all;"},s={class:"pq pi"};Object.defineProperty(t,"__esModule",{value:!0});const r=e("magix"),o=e("../../i18n/index");t.default=r.default.View.extend({tmpl:(e,t,i)=>{let r,o,d=[],{title:n,body:p,i18n:c}=e;return o=[t(0,0,n)],r=[t("h5",0,o)],d.push(t("div",a,r)),r=[t(0,0,p)],d.push(t("div",l,r)),o=[t(0,0,c("aU"))],r=[t("button",{"mx-click":i+"\x1e_bw();",class:"pm pn pe",type:"button"},o)],d.push(t("div",s,r)),t(i,0,d)},init(e){this._bC=e.dialog,this._bD=e.body,this._bE=e.title||o.default("aT"),this._bF=e.enterCallback},render(){this.digest({body:this._bD,title:this._bE})},"_bw<click>"(){let e=this;e._bC.close(),e._bF&&r.default.toTry(e._bF)}})}),define("gallery/mx-dialog/confirm",["magix","../../i18n/index"],(e,t,i)=>{let a={class:"po"},l={class:"pp",style:"word-break:break-all;"},s={class:"pq pi"};Object.defineProperty(t,"__esModule",{value:!0});const r=e("magix"),o=e("../../i18n/index");t.default=r.default.View.extend({tmpl:(e,t,i)=>{let r,o,d=[],{title:n,body:p,i18n:c}=e;return o=[t(0,0,n)],r=[t("h5",0,o)],d.push(t("div",a,r)),r=[t(0,0,p)],d.push(t("div",l,r)),o=[t(0,0,c("aV"))],r=[t("button",{type:"button","mx-click":i+"\x1e_bH()",class:"pm pe"},o)],o=[t(0,0,c("aU"))],r.push(t("button",{type:"button","mx-click":i+"\x1e_bw()",class:"pm pn pa pe"},o)),d.push(t("div",s,r)),t(i,0,d)},init(e){let t=this;t._bC=e.dialog,t._bD=e.body,t._bE=e.title||o.default("aT"),t._bF=e.enterCallback,t._bG=e.cancelCallback},render(){this.digest({body:this._bD,title:this._bE})},"_bw<click>"(){let e=this;e._bC.close(),e._bF&&r.default.toTry(e._bF)},"_bH<click>"(){let e=this;e._bC.close(),e._bG&&r.default.toTry(e._bG)}})}),define("gallery/mx-dialog/index",["magix","./alert","./confirm"],(e,t,i)=>{let a;Object.defineProperty(t,"__esModule",{value:!0});const l=e("magix");e("./alert"),e("./confirm"),l.default.applyStyle("pi",".paY{position:absolute}.paZ{position:relative;background-color:#fff;border-radius:2px;border:1px solid #e6e6e6}.pb_{position:absolute;cursor:pointer;opacity:.2;z-index:1;top:7px;right:10px}.pb_:focus,.pb_:hover{opacity:.5}.pba{position:fixed;top:0;right:0;left:0;bottom:0;background-color:#000;opacity:.2}.pbb{-webkit-filter:blur(3px);filter:blur(3px)}.pbc{-webkit-animation:pc .3s;animation:pc .3s;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}.pbd{position:absolute;right:10px;top:0;width:1px;height:0}.pbe{padding:80px 0}@-webkit-keyframes pc{0%{opacity:0}to{opacity:.2}}@keyframes pc{0%{opacity:0}to{opacity:.2}}.pbf{-webkit-animation:pd .2s;animation:pd .2s;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}@-webkit-keyframes pd{0%{opacity:.2}to{opacity:0}}@keyframes pd{0%{opacity:.2}to{opacity:0}}.pbg{margin-bottom:50px;min-height:60px}.pbh{position:fixed;width:100%;height:100%;overflow:auto;left:0;top:0}.pbi{-webkit-animation:pe .3s;animation:pe .3s;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}@-webkit-keyframes pe{0%{margin-top:-50px;opacity:0}to{margin-top:0;opacity:1}}@keyframes pe{0%{margin-top:-50px;opacity:0}to{margin-top:0;opacity:1}}.pbj{-webkit-animation:pf .2s;animation:pf .2s;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}@-webkit-keyframes pf{0%{margin-top:0;opacity:1}to{margin-top:-50px;opacity:0}}@keyframes pf{0%{margin-top:0;opacity:1}to{margin-top:-50px;opacity:0}}");let s=500,r=[];t.default=l.default.View.extend({tmpl:(e,t,i,l)=>{let s,r,o,d,n,p=[],{removeClass:c,zIndex:u,id:h,left:f,top:g,width:_,closable:x}=e;return s="pba",c||(s+=" pbc"),p.push(t("div",{style:"z-index:"+l(u-1),id:"mask_"+l(h),class:s})),o=[t("input",{id:"focus_"+l(h),class:"pbd"},0,1)],d=[t(0,0,"\ue67f")],o.push(t("span",{class:"p_ pb_ "+l(x?"":"ph"),"mx-click":i+"\x1e_bK()"},d)),a?d=[a]:(n=[t("span",{class:"ps"})],d=[a=t("div",{mxs:"pB:_",class:"pr pbe"},n)]),o.push(t("div",{class:"paZ pbg",id:"cnt_"+l(h)},d)),s="paY",c||(s+=" pbi"),r=[t("div",{id:"body_"+l(h),style:"left:"+l(f)+"px;top:"+l(g)+"px;width:"+l(_)+"px;",class:s},o)],p.push(t("div",{class:"pbh",style:"z-index:"+l(u)+";"},r)),t(i,0,p)},init(e){let t=this,i=l.default.node("app"),a=t.root;t.on("destroy",()=>{(e=>{for(let t,i=r.length-1;i>=0;i--)if((t=r[i]).id==e.id){r.splice(i,1);break}})(t),500==(s-=2)&&i.classList.remove("pbb"),l.default.dispatch(a,"close"),a.parentNode.removeChild(a)}),l.default.has(e,"closable")||(e.closable=!0),t.set(e),500==s&&i.classList.add("pbb"),s+=2,r.push(t)},render(){let e=this;e.digest({zIndex:s},null,()=>{let t=e.get();setTimeout(e.wrapAsync(()=>{e.root.style.display="block",l.default.node("focus_"+e.id).focus()}),30),e.owner.mountVframe(l.default.node("cnt_"+e.id),t.view,t),setTimeout(e.wrapAsync(()=>{e.digest({removeClass:!0})}),300)})},_bI(e){let t=l.default.node("cnt_"+this.id);l.default.Vframe.byNode(t).invoke("fire",["unload",e])},_bJ(){let e,t=this.id;(e=l.default.node("body_"+t)).classList.add("pbj"),(e=l.default.node("mask_"+t)).classList.add("pbf")},"_bK<click>"(){l.default.dispatch(this.root,"dlg_close")},"$doc<keyup>"(e){if(27==e.keyCode){let e=r[r.length-1];e==this&&e.get("closable")&&l.default.dispatch(this.root,"dlg_close")}}},{_bM(e,t){let i=l.default.guid("dlg_");document.body.insertAdjacentHTML("beforeend",'<div id="'+i+'" style="display:none" />');let a,s=l.default.node(i),r=e.owner.mountVframe(s,"gallery/mx-dialog/index",t);return s.addEventListener("dlg_close",()=>{if(!s._bL&&!a){let e=()=>{s._bL=1,r.invoke("_bJ"),setTimeout(()=>{r.unmountVframe()},200)},t={p:0,prevent(){a=1},resolve(){t.p=1,a=0,e()},reject(){t.p=1,a=0}};r.invoke("_bI",[t]),a||t.p||e()}}),s},alert(e,t,i){this.confirm(e,t,null,i,"alert")},confirm(e,t,i,a,l){this.mxDialog("gallery/mx-dialog/"+(l||"confirm"),{body:e,cancelCallback:i,enterCallback:t,title:a,modal:!0,width:300,closable:!1,left:(window.innerWidth-300)/2,top:Math.max((window.innerHeight-220)/2,0)})},mxDialog(e,t){let i,a,s=this,r={view:e};return l.default.use(e,s.wrapAsync(o=>{let d="$dlg_"+e;s[d]||(s[d]=1,Object.assign(r,o.dialogOptions),Object.assign(r,t),r.width||(r.width=500),r.left||(r.left=(window.innerWidth-r.width)/2),r.top||(r.top=100),r.dialog={close(){i&&l.default.dispatch(i,"dlg_close")}},(i=s._bM(s,r)).addEventListener("close",()=>{delete s[d],a&&a()}))})),{close(){i&&l.default.dispatch(i,"dlg_close")},whenClose(e){a=e}}}})}),define("gallery/mx-dragdrop/index",[],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let a=window.getComputedStyle,l=e=>{(e=window.getSelection)&&e().removeAllRanges()},s=e=>{e.preventDefault()},r=["mousemove"],o=["mouseup","pointercancel","touchcancel"],d=["keydown","mousewheel","DOMMouseScroll","fullscreenchange"];t.default={ctor(){let e=this;e.on("destroy",()=>{e._bN()})},_bN(e){let t=this,i=t._bO;if(i){let a;for(a of(delete t._bO,r))document.removeEventListener(a,t._bP);for(a of o)document.removeEventListener(a,t._bQ);for(a of d)document.removeEventListener(a,s);window.removeEventListener("blur",t._bQ);let l=i._bR;i._bS&&l(e)}},_x(e,t,i){let a=this;if(a._bN(),e){l(),a._bO={_bR:i,_bS:!!i};let e,n=!!t;for(e of(a._bT=0,a._bQ=(e=>{a._bT=1,a._bN(e)}),a._bP=(e=>{n&&t(e)}),r))document.addEventListener(e,a._bP);for(e of o)document.addEventListener(e,a._bQ);for(e of d)document.addEventListener(e,s,{passive:!1});window.addEventListener("blur",a._bQ)}},_K(e,t){let i=null;if(document.elementFromPoint)for(!s._bU&&a&&(s._bU=!0,s._bV=null!==document.elementFromPoint(-1,-1)),s._bV&&(e+=window.pageXOffset,t+=window.pageYOffset),i=document.elementFromPoint(e,t);i&&3==i.nodeType;)i=i.parentNode;return i},_bW:l}}),define("gallery/mx-dropdown/index",["magix","../mx-monitor/index"],(e,t,i)=>{let a,l={class:"pbr"};Object.defineProperty(t,"__esModule",{value:!0});const s=e("magix"),r=e("../mx-monitor/index");s.default.applyStyle("pj",'.pbk{outline:0;position:relative;min-width:50px;width:100%;background-color:#fff;border:1px solid #e6e6e6;border-radius:2px;display:inline-block;vertical-align:middle;height:22px;transition:all .25s}.pbk:hover{border-color:#ccc}.pbl{color:#333;position:relative;width:100%;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;padding:0 20px 0 3px}.pbm{cursor:not-allowed;background-color:#fbfbfb}.pbm:hover{border-color:#e6e6e6}.pbm .pbl{cursor:not-allowed}.pbn{position:absolute;right:0;top:0;font-size:20px;color:#ccc;transition:all .25s}.pbo .pbn{-webkit-transform:rotate(180deg);transform:rotate(180deg);top:0}.pbk[tabindex="0"]:focus,.pbo,.pbo:hover{border-color:#fa742b}.pbp{height:20px;line-height:21px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.pbq{color:#999}.pbr{position:absolute;top:100%;left:-1px;right:-1px;margin-top:4px;border-radius:2px;z-index:300;border:1px solid #e6e6e6;background-color:#fff;display:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.pbo .pbr{display:block}.pbs{overflow:auto;max-height:196px;padding:2px 0}.pbt{padding:0 2px;margin:2px 0}.pbu{cursor:pointer;color:#666;display:block;width:100%;padding:0 5px;height:20px;line-height:20px;border-radius:2px}.pbu:hover{color:#333;background-color:#f0f0f0}.pbv,.pbv:active,.pbv:focus,.pbv:hover{color:#fff;background-color:#fa742b}'),t.default=s.default.View.extend({tmpl:(e,t,i,s,r,o,d)=>{let n,p,c,u,h,f,g,_,x,b=[],{disabled:m,id:y,selectedText:w,selected:v,emptyText:k,rList:A,list:S,textKey:M,valueKey:z}=e;if(p=[],u=[t(0,0,w)],n="pbp",""!==v&&v!=k||(n+=" pbq"),c=[t("span",{class:n},u)],a?c.push(a):(u=[t(0,0,"\ue692")],c.push(a=t("span",{mxs:"pC:_",class:"p_ pbn"},u))),p.push(t("div",{class:"pbl","mx-click":i+"\x1e_bA()",title:s(w)},c)),A){f=[];for(let e=0,a=S,l=a.length;e<l;e++){let l=a[e];g=[];let r=l,p=l;M&&z&&(h="",r=l[M],h+=" ",p=l[z]);let c=p+""==v+"";x=[t(0,0,r)],n="pbu pl",c&&(n+=" pbv"),_=[t("span",{"mx-click":i+"\x1e_bX({item:'"+d(o,l)+"'})",class:n},x)],g.push(t("li",{title:s(r),active:c,class:"pbt"},_)),f.push(...g)}u=[t("ul",{class:"pbs",id:"list_"+s(y)},f)],c=[t("div",l,u)],p.push(...c)}return n="pbk",m&&(n+=" pbm"),b.push(t("div",{id:"dd_"+s(y),class:n},p)),t(i,0,b)},init(e){r.default._bj(),this.on("destroy",()=>{r.default._ax(this),r.default._bk()}),this.assign(e)},assign(e){let t=e.selected,i=e.textKey||"",a=e.valueKey||"",l=e.emptyText||"",r=e.disabled+""=="true",o=e.list||[];o=o.slice();let d=s.default.toMap(o,a);if(l)if(i&&a){if(!d[""]){let e={};e[i]=l,e[a]="",o.unshift(e),d[""]=e}}else d[l]||(o.unshift(l),d[l]=l);t||!l||i||a||(t=l),t&&d[t]||(t=d[t]||o[0],i&&a&&(t=t[a]));let n=i&&a?d[t][i]:t;return this.set({selected:t,selectedText:n,list:o,textKey:i,valueKey:a,emptyText:l,disabled:r}),!0},render(){this.digest()},_by(e){return s.default.inside(e,this.root)},_y(){let e=this,t=s.default.node("dd_"+e.id);if(!t.classList.contains("pbo")){t.classList.add("pbo");let i=()=>{let i=(t=s.default.node("list_"+e.id)).querySelector("li[active]");i&&i.scrollIntoViewIfNeeded&&i.scrollIntoViewIfNeeded()};e.get("rList")?i():e.digest({rList:!0},null,i),r.default._ay(e)}},_z(){let e=this,t=s.default.node("dd_"+e.id);t.classList.contains("pbo")&&(t.classList.remove("pbo"),r.default._ax(e))},"_bA<click>"(){let e=this,t=s.default.node("dd_"+e.id);t.classList.contains("pbo")?e._z():t.classList.contains("pbm")||e._y()},"_bX<click>"(e){let t=this;t._z();let i=t.get("valueKey"),a=t.get("textKey"),l=t.get("selected"),r=e.params.item,o=r,d=r;a&&i&&(d=r[a],o=r[i]),l!==o&&(t.digest({selected:o,selectedText:d}),s.default.dispatch(t.root,"change",{item:r,value:i?r[i]:r,text:a?r[a]:r}))}})}),define("gallery/mx-font/align",["magix"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix");a.default.applyStyle("pk",".pbw{display:inline-block;height:25px;line-height:25px;vertical-align:bottom}.pbx{width:20px;margin:0 1px;text-align:center;height:20px;line-height:20px;cursor:pointer;background:#e0e0e0;border-radius:2px}.pbx:hover{background:#ccc}.pby,.pby:hover{background:#fa742b;color:#fff}.pbz,.pbz .pbx{cursor:not-allowed;opacity:.7}.pbz .pbx,.pbz .pbx:hover{background:#e9e9e9}.pbz .pby,.pbz .pby:hover{background:#fb955d}"),t.default=a.default.View.extend({tmpl:(e,t,i,a)=>{let l,s,r,o=[],{disabled:d,i18n:n,value:p}=e;return r=[t(0,0,"\ue687")],l="pd pbx pw","flex-start"==p.h&&(l+=" pby"),s=[t("li",{title:a(n("aW")),"mx-click":i+"\x1e_aw({type:'h',v:'flex-start'})",class:l},r)],r=[t(0,0,"\ue68a")],l="pd pbx pw","center"==p.h&&(l+=" pby"),s.push(t("li",{title:a(n("aX")),"mx-click":i+"\x1e_aw({type:'h',v:'center'})",class:l},r)),r=[t(0,0,"\ue686")],l="pd pbx pw","flex-end"==p.h&&(l+=" pby"),s.push(t("li",{title:a(n("aY")),"mx-click":i+"\x1e_aw({type:'h',v:'flex-end'})",class:l},r)),r=[t(0,0,"\ue614")],l="pd pbx pw","flex-start"==p.v&&(l+=" pby"),s.push(t("li",{title:a(n("aZ")),"mx-click":i+"\x1e_aw({type:'v',v:'flex-start'})",class:l},r)),r=[t(0,0,"\ue613")],l="pd pbx pw","center"==p.v&&(l+=" pby"),s.push(t("li",{title:a(n("b_")),"mx-click":i+"\x1e_aw({type:'v',v:'center'})",class:l},r)),r=[t(0,0,"\ue612")],l="pd pbx pw","flex-end"==p.v&&(l+=" pby"),s.push(t("li",{title:a(n("ba")),"mx-click":i+"\x1e_aw({type:'v',v:'flex-end'})",class:l},r)),l="pj pbw",d&&(l+=" pbz"),o.push(t("ul",{class:l},s)),t(i,0,o)},init(e){this.assign(e)},assign(e){return this._bY=e.value,this.set({value:e.value,disabled:e.disabled}),!0},render(){this.digest()},"_aw<click>"(e){let t=this;if(t.get("disabled"))return;let i=t._bY,{type:l,v:s}=e.params;i[l]=s,t._bY=i,t.digest({value:i}),a.default.dispatch(t.root,"input",{value:i})}})}),define("gallery/mx-font/style",["magix"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix");a.default.applyStyle("pk",".pbw{display:inline-block;height:25px;line-height:25px;vertical-align:bottom}.pbx{width:20px;margin:0 1px;text-align:center;height:20px;line-height:20px;cursor:pointer;background:#e0e0e0;border-radius:2px}.pbx:hover{background:#ccc}.pby,.pby:hover{background:#fa742b;color:#fff}.pbz,.pbz .pbx{cursor:not-allowed;opacity:.7}.pbz .pbx,.pbz .pbx:hover{background:#e9e9e9}.pbz .pby,.pbz .pby:hover{background:#fb955d}"),t.default=a.default.View.extend({tmpl:(e,t,i,a)=>{let l,s,r,o=[],{disabled:d,i18n:n,value:p}=e;return r=[t(0,0,"\ue749")],l="pd pbx pw",p.bold&&(l+=" pby"),s=[t("li",{title:a(n("bb")),"mx-click":i+"\x1e_aw({key:'bold'})",class:l},r)],r=[t(0,0,"\ue65f")],l="pd pbx pw",p.italic&&(l+=" pby"),s.push(t("li",{title:a(n("bc")),"mx-click":i+"\x1e_aw({key:'italic'})",class:l},r)),r=[t(0,0,"\ue62e")],l="pd pbx pw",p.underline&&(l+=" pby"),s.push(t("li",{title:a(n("bd")),"mx-click":i+"\x1e_aw({key:'underline'})",class:l},r)),l="pj pbw",d&&(l+=" pbz"),o.push(t("ul",{class:l},s)),t(i,0,o)},init(e){this.assign(e)},assign(e){return this._bY=e.value,this.set({value:e.value,disabled:e.disabled}),!0},render(){this.digest()},"_aw<click>"(e){let t=this;if(t.get("disabled"))return;let i=t._bY,{key:l}=e.params;i[l]=!i[l],t._bY=i,t.digest({value:i}),a.default.dispatch(t.root,"input",{value:i})}})}),define("gallery/mx-menu/index",["magix","../mx-monitor/index"],(e,t,i)=>{let a,l={class:"pbB pj"};Object.defineProperty(t,"__esModule",{value:!0});const s=e("magix"),r=e("../mx-monitor/index");s.default.applyStyle("pl",".pbA{z-index:400}.pbB{background-color:#fff;border:1px solid #e6e6e6;border-radius:2px;cursor:default;padding:2px 0;box-shadow:0 1px 3px 1px rgba(0,0,0,.06)}.pbC{height:22px;line-height:22px;cursor:default;border-radius:2px;padding:0 8px;margin:2px}.pbD{color:#fff;background-color:#fa742b}.pbE{height:1px;background:#eee;margin:4px 0}.pbF{color:#ccc;cursor:not-allowed}"),t.default=s.default.View.extend({tmpl:(e,t,i,s,r,o,d)=>{let n,p,c,u,h,f,g=[],{width:_,id:x,list:b,disabled:m,textKey:y}=e;p=[];for(let e=0,l=b,r=l.length;e<r;e++){let r=l[e];c=[],r.spliter?(u=a?[a]:[a=t("li",{mxs:"pF:_",class:"pbE"})],c.push(...u)):(f=[t(0,0,r[y])],h="pl pbC ",m[r.id]&&(h+=" pbF"),u=[t("li",{"mx-mouseover":i+"\x1e_cf({d:"+s(m[r.id]||0)+"})","mx-mouseout":i+"\x1e_cf({d:"+s(m[r.id]||0)+"});","mx-click":i+"\x1e_bX({item:'"+d(o,r)+"',d:"+s(m[r.id]||0)+"})",title:s(r[y]),class:h},f)],c.push(...u)),p.push(...c)}return n=[t("ul",l,p)],g.push(t("div",{style:"width:"+s(_)+"px;position:absolute;left:-10000px;top:-10000px",class:"pbA",id:"cnt_"+s(x),"mx-contextmenu":i+"\x1e_B()"},n)),t(i,0,g)},init(e){let t=this;t.assign(e),r.default._bj(),t.on("destroy",()=>{r.default._ax(t),r.default._bk()})},assign(e){let t=this,i=e.width||140,a=e.valueKey||"id",l=e.textKey||"text";return t._bZ=e.list,t._c_=i,t._ca=a,t._cb=l,t._cc=e.disabled||{},t._cd=e.picked,!0},render(){let e=this;e.digest({disabled:e._cc,list:e._bZ,width:e._c_,valueKey:e._ca,textKey:e._cb})},_by(e){return s.default.inside(e,this.root)},_y(e){let t=this;if(!t._ce){t._ce=1;let i=s.node("cnt_"+t.id),a=i.clientWidth,l=i.clientHeight,o=e.pageX,d=e.pageY;o+a>window.innerWidth&&(o-=a)<0&&(o=0),d+l>window.innerHeight&&(d-=l)<0&&(d=0),i.style.left=o+"px",i.style.top=d+"px",r.default._ay(t)}},_z(){let e=this;if(e._ce){e._ce=!1,s.node("cnt_"+e.id).style.left="-10000px",r.default._ax(e)}},"_cf<mouseover,mouseout>"(e){if(e.params.d)return;let t=e.eventTarget;!s.default.inside(e.relatedTarget,t)&&t.classList["mouseout"==e.type?"remove":"add"]("pbD")},"_bX<click>"(e){if(e.params.d)return;this._z();let t=this._cd;t&&t(e.params.item)},"_B<contextmenu>"(e){e.preventDefault()}},{show(e,t,i){let a="ctx_"+e.id,l=s.node(a),r=l&&s.default.Vframe.byNode(l);r?(r.invoke("assign",[i]),r.invoke("render"),r.invoke("_y",[t])):(document.body.insertAdjacentHTML("beforeend",`<div id="${a}"></div>`),(r=e.owner.mountVframe(s.node(a),"gallery/mx-menu/index",i)).invoke("_y",[t]))}})}),define("gallery/mx-monitor/index",[],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let a=0,l=[],s=["mousedown","keyup","touchstart","pointerstart"],r=e=>{for(let t=l.length;t--;){let i=l[t];if(i._cg)l.splice(t,1);else{let t=i._ch;"resize"!=e.type&&t._by(e.target)||t._z()}}},o=e=>{let t=l[e.id];t&&(t._cg=!0),delete l[e.id]};t.default={_ay(e){o(e);let t={_ch:e};l.push(t),l[e.id]=t},_ax:o,_bj(){if(!a){for(let e of s)document.addEventListener(e,r);window.addEventListener("resize",r)}a++},_bk(){if(a>0&&!--a){for(let e of s)document.removeEventListener(e,r);window.removeEventListener("resize",r)}}}}),define("gallery/mx-number/index",["magix"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix");a.default.applyStyle("pm",'.pbG{width:100%;border:none;height:100%;background-color:transparent;color:#333;display:block}.pbH,.pbI{width:20px;height:50%;position:absolute;right:1px;border:2px solid #fff;border-radius:2px;cursor:pointer}.pbH:hover,.pbI:hover{background-color:#f0f0f0}.pbI{top:1px}.pbH{bottom:1px}.pbJ:after{width:0;height:0;position:absolute;top:0;right:0;bottom:0;left:0;border-left:4px solid transparent;border-right:4px solid transparent;content:"";display:block;margin:auto}.pbH:after{border-top:4px solid #ccc}.pbI:after{border-bottom:4px solid #ccc}.pbH.pbK,.pbI.pbK{cursor:not-allowed;border-color:transparent}.pbH.pbK:hover,.pbI.pbK:hover{background-color:transparent}'),t.default=a.default.View.extend({tmpl:(e,t,i,a)=>{let l,s=[],{id:r,disabled:o}=e;return s.push(t("input",{class:"pbG",id:"ipt_"+a(r),"mx-focusin":i+"\x1e_cA()","mx-focusout":i+"\x1e_cC()","mx-change":i+"\x1e_cz()","mx-keydown":i+"\x1e_cH()",disabled:o,autocomplete:"off","mx-input":i+"\x1e_cI()"},0,1)),l="pbI pbJ pj",o&&(l+=" pbK"),s.push(t("span",{"mx-click":i+"\x1e_cv({i:1})","mx-mousedown":i+"\x1e_cG({i:1})","mx-contextmenu":i+"\x1e_B()",class:l})),l="pbH pbJ pj",o&&(l+=" pbK"),s.push(t("span",{"mx-click":i+"\x1e_cv()","mx-mousedown":i+"\x1e_cG()","mx-contextmenu":i+"\x1e_B()",class:l})),t(i,0,s)},init(e){this.assign(e)},assign(e){let t=this,i=e.value;void 0===i&&(i=""),""!==i&&(i=+i);let l=t._ci!==i,s=t._cj;return t._ci=i,t._ck=+e.step||1,t._cl=e.empty+""=="true",t._cm=e.format+""=="true",t._cj=t.root.hasAttribute("disabled"),t._cn=a.default.has(e,"max")?+e.max:Number.MAX_VALUE,t._co=a.default.has(e,"min")?+e.min:-Number.MAX_VALUE,t._cp=+e.ratio||10,t._cq=e.fixed||0,l||s!=t._cj},render(){let e=this;e.digest({disabled:e._cj},null,()=>{e._cr()})},_cr(){let e=this,t=e._ci;""!==t&&(t=e._cs(t),e._cm&&(t=t.toFixed(e._cq))),e._ct=a.node("ipt_"+e.id),e._ct.value=t},_cs(e){let t=this;if((e=+e)||0===e){let i=t._cn,a=t._co;e>i?e=i:e<a&&(e=a),e=+e.toFixed(t._cq)}return isNaN(e)?t._cl?"":0:e},_cu(e,t){let i=this;if(""!==e||!i._cl)return(e=i._cs(e))!==i._ci&&(t||(i._ct.value=e),a.default.dispatch(i.root,"input",{value:i._ci=e})),i._ci;a.default.dispatch(i.root,"input",{value:i._ci=e})},_cv(e,t){let i=this._ci;""===i&&(i=0);let a=this._ck,l=i;t&&(a*=this._cp),e?l+=a:l-=a,this._cu(l)},_cw(){let e=this._ct;e&&(e.focus(),e.selectionStart=e.selectionEnd=e.value.length)},_cy(){let e=this;e.root.classList.add("pv"),a.default.has(e,"_cx")||(e._cx=e._ci)},"_cz<change>"(e){e.stopPropagation()},"_cA<focusin>"(){this._cy()},"_cC<focusout>"(e){let t=this;t._cB||(t.root.classList.remove("pv"),t._cr(),t._cx!=t._ci&&a.default.dispatch(t.root,"change",{value:t._ci}),delete t._cx)},"_cv<click>"(e){let t=this;t._cj||t._cD||(t._cv(e.params.i,e.shiftKey),t._cw())},"_cG<mousedown>"(e){let t=this;if(!t._cj){t._cB=!0,t._cy();let i=e.params.i;t._cE=setTimeout(t.wrapAsync(()=>{t._cF=setInterval(t.wrapAsync(()=>{t._cD=!0,t._cv(i),t._cw()}),50)}),300)}},"_cH<keydown>"(e){if(38==e.keyCode||40==e.keyCode){e.preventDefault();let t=this;if(!t._cj){let i=e.eventTarget.value;if(""===i)t._ci="";else{let e=Number(i);(e||0===e)&&e!=t._ci&&(t._ci=e)}t._cv(38==e.keyCode,e.shiftKey)}}},"_B<contextmenu>"(e){e.preventDefault()},"_cI<input>"(e){e.stopPropagation();let t=e.eventTarget;this._cu(t.value,!0)},"$doc<mouseup>"(){let e=this;clearTimeout(e._cE),clearInterval(e._cF),delete e._cB,setTimeout(e.wrapAsync(()=>{delete e._cD}),0)}})}),define("gallery/mx-picture/index",["magix","../mx-dialog/index"],(e,t,i)=>{let a={class:"pbM"};Object.defineProperty(t,"__esModule",{value:!0});const l=e("magix"),s=e("../mx-dialog/index");l.default.applyStyle("pn",".pbL{height:100px;padding:4px;border:1px solid #e6e6e6;background:#fff;cursor:pointer;margin:4px 0}.pbM{line-height:92px;text-align:center;color:#999}.pbN{min-height:500px}.pbO{width:100px;height:100px;margin:4px;overflow:hidden;border:1px solid #e6e6e6;cursor:pointer;padding:4px}.pbO:hover{border-color:#999}.pbP{width:100%;height:100%;background-position:50%;background-repeat:no-repeat;background-size:contain}.pbQ{width:100px;margin:0 5px;height:25px}.pbR{margin:30px 0}.pbS{font-size:16px}.pbT{position:absolute;right:3px;top:2px;opacity:.2}.pbT:hover{opacity:.5}.pbU{background:#fbfbfb;cursor:not-allowed}.pbU .pbT,.pbU .pbT:hover{opacity:.1}.pbV{margin-bottom:10px;border-bottom:1px solid #fca576}.pbW{float:left;height:25px;line-height:25px;padding:0 4px;cursor:pointer;margin:0 5px -1px;transition:all .25s}.pbX{background:#fca576;border-radius:4px 4px 0 0}"),t.default=l.default.View.extend({tmpl:(e,t,i,l)=>{let s,r,o,d,n,p=[],{disabled:c,src:u,i18n:h}=e;return r=[],u?(n=[t(0,0,"\ue67f")],d=[t("i",{class:"p_ pbT","mx-click":c?null:i+"\x1e_cL()",title:l(h("be"))},n)],o=[t("div",{class:"pbP",style:"background-image:url('"+l(u)+"')"},d)],r.push(...o)):(d=[t(0,0,h("bf"))],o=[t("div",a,d)],r.push(...o)),s="pbL pg",c&&(s+=" pbU"),p.push(t("div",{"mx-click":c?null:i+"\x1e_cK()",class:s},r)),t(i,0,p)},mixins:[s.default],init(e){this.assign(e)},assign(e){return this.set(e),!0},render(){this.digest()},"_cK<click>"(){let e=this;e.mxDialog("gallery/mx-picture/list",{width:932,done(t){e.digest(t),e._cJ(t)}})},_cJ(e){l.default.dispatch(this.root,"change",e)},"_cL<click>"(e){e.stopPropagation(),this.digest({src:""}),this._cJ({src:"",width:0,height:0})}})}),define("gallery/mx-picture/list",["magix","../../designer/service","../../i18n/index"],(e,t,i)=>{let a={class:"po pF"},l={class:"pp pi pbN"},s={class:"pc pbR pbS"},r={class:"pi pbV"},o={class:"pc pbQ pl"};Object.defineProperty(t,"__esModule",{value:!0});const d=e("magix"),n=e("../../designer/service"),p=e("../../i18n/index");t.default=d.default.View.extend({mixins:[n.default],tmpl:(e,t,i,d,n,p,c,u)=>{let h,f,g,_,x,b,m=[],{i18n:y,error:w,list:v,cIndex:k}=e;if(f=[t(0,0,y("bh"))],h=[t("h5",0,f)],m.push(t("div",a,h)),h=[],w)g=[t(0,0,w.msg)],f=[t("div",s,g)],h.push(...f);else{f=[],g=[];for(let e=0,a=v,l=a.length;e<l;e++){b=[t(0,0,a[e].title)],x="pbW",e==k&&(x+=" pbX"),_=[t("div",{"mx-click":e==k?null:i+"\x1e_cO({to:"+d(e)+"})",class:x},b)],g.push(..._)}f.push(t("div",r,g));for(let e=0,a=v[k].list,l=a.length;e<l;e++){let l=a[e];b=[t("div",{class:"pbP",style:"background-image:url('"+d(l.src)+"')"})],_=[t("div",{class:"pbO","mx-click":i+"\x1e_cN({src:'"+u(l.src)+"'})"},b)],b=[t(0,0,l.title)],_.push(t("div",o,b)),g=[t("div",{class:"pd",title:d(l.title)},_)],f.push(...g)}h.push(...f)}return m.push(t("div",l,h)),t(i,0,m)},init(e){this._bC=e.dialog,this._cM=e.done,this.set({cIndex:0})},render(){this.fetch("_ak",(e,t)=>{this.digest({error:e,list:t.get("data",[])})})},"_cN<click>"(e){let t=this,i=new Image,a=t._cM,l=e.params.src;i.onerror=t.wrapAsync(()=>{t.alert(p.default("bg"))}),i.onload=t.wrapAsync(()=>{let e=i.width,s=i.height;t._bC.close(),a({src:l,width:e,height:s})}),i.src=l},"_cO<click>"(e){let{to:t}=e.params;this.digest({cIndex:t})}})}),define("gallery/mx-pointer/cursor",["magix"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix"),l=a.default.guid("cursor_");a.default.applyStyle("po",".pbY{opacity:0;background:#fff;position:fixed;left:0;right:0;top:0;bottom:0;z-index:10000}");const s=document.body;t.default={_y(e){let t=getComputedStyle(e);this._aA(t.cursor)},_aA(e){let t=a.node(l);t||(document.body.insertAdjacentHTML("beforeend",`<div class="pbY" id="${l}"/>`),t=a.node(l)),t.style.cursor=e,t.style.display="block"},_z(){let e=a.node(l);e&&(e.style.display="none")},_J(e){s.style.cursor=e},_L(){s.style.cursor="auto"}}}),define("gallery/mx-pointer/follower",["magix"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix");a.default.applyStyle("pp",".pbZ{background:#fa742b;position:absolute;opacity:.6;left:-1000px;top:-1000px;width:30px;height:30px;text-align:center;line-height:30px;color:#fff;border-radius:2px;z-index:5000;pointer-events:none}");let l=a.default.guid("de_");t.default={_aL(e){let t=a.node(l);t||(document.body.insertAdjacentHTML("beforeend",`<div class="pbZ pw" id="${l}"/>`),t=a.node(l)),t.innerHTML=e},_y(e){let t=a.node(l).style;t.left=e.pageX+10+"px",t.top=e.pageY+18+"px"},_z(){let e=a.node(l).style;e.left="-1000px",e.top="-1000px"}}}),define("gallery/mx-pointer/select",["magix"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix");a.default.applyStyle("pq",".pc_{position:absolute;border:1px dashed #fa742b;display:none;pointer-events:none}");let l=a.default.guid("set_");t.default={_I(){a.node(l)||document.body.insertAdjacentHTML("beforeend",`<div id="${l}" class="pc_"></div>`)},_aL(e,t,i,s){let r=a.node(l).style;r.left=e+"px",r.top=t+"px",r.width=i+"px",r.height=s+"px",r.display="block"},_z(){a.node(l).style.display="none"}}}),define("gallery/mx-runner/fx",["./index"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("./index");let l=e=>e,s=Date.now,r=function(e,t){let i=this;i._cP&&!t||(t=t||l,i._cP=((e,a)=>e+(a-e)*t(i._cQ/i._cR))),i._cS=[],i._cT=e};Object.assign(r.prototype,{_cY(e,t){let i=this;i._cg||(i._cS.push({_cU:e,_cV:t}),i._cW||i._cX())},_cX(){let e=this,t=e._cS.shift();t?(e._cR=t._cU,e._cZ=t._cV,e._d_=s(),e._cW||a.default._da(e._cT,e._cW=(t=>{e._cQ=Date.now()-e._d_,e._cQ>e._cR&&(e._cQ=e._cR,t=1);try{e._cZ(e._cP)}catch(e){t=e}t&&e._cX()}))):e._db()},_db(){let e=this;e._cW&&(a.default._dc(e._cW),delete e._cW)},_dd(){this._db(),this._cS=[],this._cg=1}}),t.default={_de(e,t){let i=new r(e,t);return this.on("destroy",()=>{i._dd()}),i}}}),define("gallery/mx-runner/index",["magix"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix");let l=window.requestAnimationFrame||(e=>setTimeout(e,16)),s=window.cancelAnimationFrame||clearTimeout,r=Date.now;t.default={_cS:[],_da(e,t){this._cS.push({i:e||15,f:t,n:r()}),this._cX()},_dc(e){let t=this._cS;for(let i,a=0;a<t.length;a++)if(!(i=t[a]).r&&i.f==e){i.r=1;break}},_cX(){let e=this;if(!e._df){let t=()=>{let i=e._cS;for(let e,t,l=0;l<i.length;l++)(e=i[l]).r?i.splice(l--,1):(t=r())-e.n>=e.i&&(e.n=t,a.default.toTry(e.f));i.length?e._df=l(t):(s(e._df),delete e._df)};e._df=l(t)}}}}),define("i18n/index",["magix","./zh-cn"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix"),l=e("./zh-cn"),s={"zh-cn":l.default,zh:l.default},r=a.default.has,o=/\{(\d+)\}/g;t.default=((e,...t)=>{let i=(a.default.config("lang")||navigator.language).toLowerCase();r(s,i)||(i="zh-cn");let l=s[i],d=r(l,e)?l[e]:e;return t.length&&(d=d.replace(o,(e,i,a)=>(i|=0,t.length>i?(a=t[i],r(l,a)?l[a]:a):e))),d})}),define("i18n/zh-cn",[],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={l:"\u7269\u8054\u7f51\u8bbe\u8ba1\u5668",aT:"\u63d0\u793a",aU:"\u786e\u5b9a",aV:"\u53d6\u6d88",x:"\u653e\u5927",w:"\u7f29\u5c0f",_:"\u5220\u9664\u8f85\u52a9\u7ebf",a:"\u6309\u4e0b\u62d6\u52a8\u53ef\u79fb\u52a8\u8f85\u52a9\u7ebf",s:"\u64a4\u9500(Ctrl+Z)",t:"\u91cd\u505a(Ctrl+Y,Ctrl+Shift+Z)",bi:"\u6309\u4e0b\u79fb\u52a8\u9762\u677f",bj:"\u6309\u4e0b\u62d6\u52a8\u6539\u53d8\u9762\u677f\u5bbd\u5ea6",bk:"\u6309\u4e0b\u62d6\u52a8\u6539\u53d8\u9762\u677f\u9ad8\u5ea6",bl:"\u5143\u7d20",bm:"\u5c5e\u6027",bn:"\u6570\u636e\u6e90",bo:"\u6982\u89c8\u56fe",v:"\u6253\u5f00{0}\u9762\u677f",u:"\u5173\u95ed{0}\u9762\u677f",bp:"\u5c55\u5f00{0}\u9762\u677f",bq:"\u6298\u53e0{0}\u9762\u677f",ah:"\u6309\u4e0b\u62d6\u52a8\u65cb\u8f6c\u5143\u7d20",ai:"\u6309\u4e0b\u62d6\u52a8\u6539\u53d8\u5143\u7d20\u5bbd\u5ea6",aj:"\u6309\u4e0b\u62d6\u52a8\u6539\u53d8\u5143\u7d20\u9ad8\u5ea6",ak:"\u6309\u4e0b\u62d6\u52a8\u6539\u53d8\u5143\u7d20\u5bbd\u5ea6\u548c\u9ad8\u5ea6",br:"\u7c7b\u578b\uff1a",U:"X\u5750\u6807\uff1a",V:"Y\u5750\u6807\uff1a",L:"\u5bbd\uff1a",W:"\u9ad8\uff1a",X:"\u65cb\u8f6c\u89d2\u5ea6\uff1a",Y:"\u80cc\u666f\u989c\u8272\uff1a",aN:"\u6587\u5b57\u989c\u8272\uff1a",c:"\u5168\u9009",f:"\u7c98\u8d34",d:"\u590d\u5236",e:"\u526a\u5207",k:"\u5220\u9664",g:"\u4e0a\u79fb\u4e00\u5c42",i:"\u79fb\u81f3\u9876\u5c42",h:"\u4e0b\u79fb\u4e00\u5c42",j:"\u79fb\u81f3\u5e95\u5c42",m:"\u5de6\u5bf9\u9f50",o:"\u53f3\u5bf9\u9f50",p:"\u4e0a\u5bf9\u9f50",r:"\u4e0b\u5bf9\u9f50",q:"\u5782\u76f4\u5c45\u4e2d\u5bf9\u9f50",n:"\u6c34\u5e73\u5c45\u4e2d\u5bf9\u9f50",bg:"\u83b7\u53d6\u56fe\u7247\u5c3a\u5bf8\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5\uff5e\uff5e",be:"\u6e05\u9664\u56fe\u7247",bf:"\u70b9\u51fb\u9009\u62e9\u56fe\u7247",bh:"\u56fe\u7247\u5e93",aS:"\u6e05\u9664\u989c\u8272",aL:"\u5b57\u53f7\uff1a",as:"\u5168\u5c4f\u663e\u793a\uff1a",av:"\u80cc\u666f\u56fe\u7247\uff1a",R:"\u989c\u8272\uff1a",aw:"\u5e73\u94fa\u65b9\u5f0f\uff1a",ax:"\u62c9\u4f38\u94fa\u6ee1",ay:"\u539f\u59cb\u5c3a\u5bf8",az:"\u6a2a\u5411\u5e73\u94fa",aA:"\u5782\u76f4\u5e73\u94fa",aB:"\u53cc\u5411\u5e73\u94fa",at:"\u81ea\u9002\u5e94",au:"\u5168\u5c4f\u94fa\u6ee1",S:"\u9501\u5b9a\u7f16\u8f91\uff1a",aK:"\u6587\u672c",ar:"\u9875\u9762",ap:"\u76f4\u7ebf",C:"\u8d1d\u585e\u5c14",aG:"\u77e9\u5f62",al:"\u56fe\u7247",ac:"\u5706\u5f62",aI:"\u5e73\u94fa\u56fe",a_:"\u6298\u7ebf\u56fe",aa:"\u4eea\u8868\u76d8",T:"\u67f1\u72b6\u56fe",ab:"\u997c\u56fe",aJ:"\u8bf7\u9009\u62e9\u5e73\u94fa\u56fe\u7247",ao:"\u8bf7\u9009\u62e9\u56fe\u7247",M:"\u900f\u660e\u5ea6\uff1a",aM:"\u5b57\u95f4\u8ddd\uff1a",aQ:"\u5185\u5bb9\uff1a",aO:"\u6837\u5f0f\uff1a",aP:"\u6392\u5217\uff1a",bb:"\u52a0\u7c97",bc:"\u659c\u4f53",bd:"\u4e0b\u5212\u7ebf",aW:"\u6c34\u5e73\u5c45\u5de6",aX:"\u6c34\u5e73\u5c45\u4e2d",aY:"\u6c34\u5e73\u5c45\u53f3",aZ:"\u5782\u76f4\u5c45\u4e0a",b_:"\u5782\u76f4\u5c45\u4e2d",ba:"\u5782\u76f4\u5c45\u4e0b",aq:"\u957f\uff1a",am:"\u56fe\u7247\uff1a",af:"\u8fb9\u6846\u989c\u8272\uff1a",ag:"\u586b\u5145\u989c\u8272\uff1a",N:"\u7ebf\u7c7b\u578b\uff1a",ae:"\u8fb9\u6846\u7c7b\u578b\uff1a",ad:"\u8fb9\u6846\u5bbd\u5ea6\uff1a",aH:"\u5706\u89d2\uff1a",O:"\u5b9e\u7ebf",Q:"\u865a\u7ebf",P:"\u70b9\u7ebf",aC:"\u56fe\u7247\u5bbd\uff1a",aD:"\u56fe\u7247\u9ad8\uff1a",an:"\u8fd8\u539f\u5c3a\u5bf8\uff1a",Z:"\u56fe\u8868\u6807\u9898\uff1a",aE:"\u6c34\u5e73(%)\uff1a",aF:"\u5782\u76f4(%)\uff1a",bs:"\u56fe\u7247\u81ea\u8eab\u5bbd\u9ad8",aR:"\u8bf7\u8f93\u5165\u5185\u5bb9",y:"\u4ee5\u9009\u4e2d\u5143\u7d20\u6700\u5927\u5bbd\u5ea6(\u6309\u4e0bshift\u5219\u662f\u6700\u5c0f\u5bbd\u5ea6)\u540c\u6b65\u5bbd\u5ea6",z:"\u4ee5\u9009\u4e2d\u5143\u7d20\u6700\u5927\u9ad8\u5ea6(\u6309\u4e0bshift\u5219\u662f\u6700\u5c0f\u9ad8\u5ea6)\u540c\u6b65\u9ad8\u5ea6",B:"\u5782\u76f4\u5747\u5206\u6392\u5217",A:"\u6c34\u5e73\u5747\u5206\u6392\u5217",D:"\u8d77\u59cb\u70b9X\uff1a",E:"\u8d77\u59cb\u70b9Y\uff1a",F:"\u63a7\u5236\u70b91X\uff1a",G:"\u63a7\u5236\u70b91Y\uff1a",H:"\u63a7\u5236\u70b92X\uff1a",I:"\u63a7\u5236\u70b92Y\uff1a",J:"\u7ed3\u675f\u70b9X\uff1a",K:"\u7ed3\u675f\u70b9Y\uff1a",b:"\u4fdd\u5b58\u5185\u5bb9"}}),define("util/bezier",[],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let a=(e,t,i,a,l)=>t*(1-e)*(1-e)*(1-e)+3*i*e*(1-e)*(1-e)+3*a*e*e*(1-e)+l*e*e*e,l=(e,t,i,a)=>{let l=-2*(3*e-6*t+3*i),s=4*Math.pow(3*e-6*t+3*i,2)-36*(a-e+3*t-3*i)*(t-e),r=6*(a-e+3*t-3*i);if(s>0){let e=Math.sqrt(s),t=(l+e)/r,i=(l-e)/r;if(t>=0&&i>=0&&t<=1&&i<=1)return[t,i,0,1];if(t>=0&&t<=1)return[t,0,1];if(i>=0&&i<=1)return[i,0,1]}return[0,1]};t.default=(e=>{let{x:t,y:i,width:s,height:r}=(e=>{let t=l(e.startX,e.ctrl1X,e.ctrl2X,e.endX),i=l(e.startY,e.ctrl1Y,e.ctrl2Y,e.endY),s=[],r=[];for(let i of t)s.push(a(i,e.startX,e.ctrl1X,e.ctrl2X,e.endX));for(let t of i)r.push(a(t,e.startY,e.ctrl1Y,e.ctrl2Y,e.endY));let o=Math.min(...s),d=Math.max(...s),n=Math.min(...r);return{x:o,y:n,width:d-o,height:Math.max(...r)-n}})(e);e.x=t,e.y=i,e.width=s,e.height=r})}),define("util/converter",["magix"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix");t.default={_aK({x:e,y:t}){let i=a.node("stage_canvas").getBoundingClientRect();return{x:e-=i.left,y:t-=i.top}},_dg({x:e,y:t}){let i=a.node("stage_canvas").getBoundingClientRect();return{x:e+=i.left,y:t+=i.top}},_b_:e=>e/a.State.get("_c")|0,_ba:e=>e*a.State.get("_c")}}),define("util/transform",[],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a={lt:0,mt:1,rt:2,rm:3,rb:4,mb:5,lb:6,lm:7};t.default={_aD({x:e,y:t,width:i,height:a},l){let s=Math.sqrt(Math.pow(i,2)+Math.pow(a,2))/2,r=i?Math.round(180*Math.atan(a/i)/Math.PI):0,o=180-l-r,d=r-l,n=90-l,p=l,c=i/2,u=a/2,h=e+c,f=t+u,g={x:h+s*Math.cos(o*Math.PI/180),y:f-s*Math.sin(o*Math.PI/180)},_={x:h+u*Math.cos(n*Math.PI/180),y:f-u*Math.sin(n*Math.PI/180)},x={x:h+s*Math.cos(d*Math.PI/180),y:f-s*Math.sin(d*Math.PI/180)},b={x:h+c*Math.cos(p*Math.PI/180),y:f+c*Math.sin(p*Math.PI/180)},m={x:h-s*Math.cos(o*Math.PI/180),y:f+s*Math.sin(o*Math.PI/180)},y={x:h-u*Math.sin(p*Math.PI/180),y:f+u*Math.cos(p*Math.PI/180)},w={x:h-s*Math.cos(d*Math.PI/180),y:f+s*Math.sin(d*Math.PI/180)},v={x:h-c*Math.cos(p*Math.PI/180),y:f-c*Math.sin(p*Math.PI/180)},k=Math.min(g.x,x.x,m.x,w.x),A=Math.max(g.x,x.x,m.x,w.x),S=Math.min(g.y,x.y,m.y,w.y),M=Math.max(g.y,x.y,m.y,w.y);return{point:[g,_,x,b,m,y,w,v],width:A-k,height:M-S,left:k,right:A,top:S,bottom:M}},_be(e,t){let i={},l={},s=a[t],r=0,o=s-4;return o<0&&(o=s+4),{current:{index:s,point:l=e[s]},opposite:{index:r=o,point:i=e.slice(o,o+1)[0]}}},_dG(e,t){let{x:i,y:a,width:l,height:s,scale:r}=e,o={x:0,y:0},d=l*(r.x-1),n=s*(r.y-1),p=l+d,c=s+n,u=i-d/2,h=a-n/2;if(t){let e=[{x:i,y:a},{x:i+l,y:a},{x:i+l,y:a+s},{x:i,y:a+s}],r=[{x:u,y:h},{x:u+p,y:h},{x:u+p,y:h+c},{x:u,y:h+c}];o.x=e[t].x-r[t].x,o.y=e[t].y-r[t].y}return{x:u+o.x,y:h+o.y,width:p,height:c}},_bf(e,t,i,a){let l=this._dG({x:e.x,y:e.y,width:e.width,height:e.height,scale:t}),s=l.width,r=l.height,o=this._aD(l,e.rotate),d=i.point[a].x-o.point[a].x+o.left,n=i.point[a].y-o.point[a].y+o.top;return{left:d+o.width/2-s/2,top:n+o.height/2-r/2,width:s,height:r}},_dD({x:e,y:t,width:i,height:a},l){if(0==i)return{x:e,y:t};let s=e+i/2,r=t+a/2,o=Math.sqrt(i*i/2/2+a*a/2/2),d=180*Math.atan(a/i)/Math.PI+l+180;return{x:s+o*Math.cos(d*Math.PI/180),y:r+o*Math.sin(d*Math.PI/180)}}}}),define("panels/index",["magix"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix");let l=[{title:"bl",icon:"&#xe629;",width:100,height:270,left:25,top:90,show:!0,resizeY:!0,id:"p-elements",view:"panels/elements/index"},{title:"bm",icon:"&#xe7a1;",width:240,height:120,right:10,top:90,show:!0,resizeY:!0,id:"p-props",view:"panels/props/index"},{title:"bo",icon:"&#xe7ad;",width:180,height:124,show:!0,left:25,bottom:10,id:"p-overview",view:"panels/overview/index",fixedSize:!0}],s=a.default.toMap(l,"id");t.default={_Z(){for(let e of l)e.show&&this._dp(e.id,!0);a.State.fire("m")},_dp(e,t){let i=s[e];if(!i.opened){if(i.opened=1,i.eId)a.node(i.eId).style.display="block";else{i.eId=a.default.guid("panel_");let e=a.node(a.default.config("rootId"));e.insertAdjacentHTML("beforeend",`<div id="${i.eId}"></div>`);let t=a.Vframe.byNode(e);i.close=(()=>{this._dq(i.id)}),t.mountVframe(a.node(i.eId),"panels/panel",i)}if(!t){a.State.fire("m"),a.Vframe.byNode(a.node(i.eId)).invoke("_y")}}},_dq(e){let t=s[e];if(t.opened){t.opened=0;let e=a.node(t.eId);e.style.display="none",a.State.fire("m"),a.Vframe.byNode(e).invoke("_z")}},_aW(e){s[e].opened?this._dq(e):this._dp(e)},_aV:()=>l}}),define("panels/panel",["magix","../gallery/mx-pointer/cursor","../gallery/mx-dragdrop/index"],(e,t,i)=>{let a={class:"pcn pj pi"},l={class:"pw px py"},s={class:"pe pE pb"};Object.defineProperty(t,"__esModule",{value:!0});const r=e("magix"),o=e("../gallery/mx-pointer/cursor"),d=e("../gallery/mx-dragdrop/index");r.default.applyStyle("pt",".pcm{background:hsla(0,0%,100%,.93);position:absolute;box-shadow:0 2px 4px 0 rgba(0,0,0,.3)}.pcn{font-size:12px;height:18px;line-height:18px;background:#fa742b;color:#fff}.pco{padding:0 5px;cursor:move;width:calc(100% - 36px)}.pcp{width:16px;height:14px;margin:0 1px;font-size:11px;cursor:pointer;display:inline-flex;justify-content:center;align-items:center;border-radius:2px}.pcp:hover{background:#e64e30}.pcq{overflow:hidden;transition:height .25s}.pcr{transition:none}.pcs{width:calc(100% - 2px);overflow:auto;float:left}.pct{width:2px;float:right;cursor:ew-resize}.pcu,.pct{background:#fafafa}.pcu{height:2px;cursor:ns-resize}.pcv{scroll-behavior:smooth}.pcv::-webkit-scrollbar,.pcv::-webkit-scrollbar-corner{height:2px;width:2px;background:#fafafa}");let n=[],p={_ay(e){n.push(e)},_ax(e){for(let t=n.length;t--;)if(n[t]==e){n.splice(t,1);break}this._dv()},_dv(){for(let e=n.length;e--;)n[e]._dw(300+e)},_dx(e){if(n[n.length-1]!=e){for(let t=n.length;t--;)if(n[t]==e){n.splice(t,1);break}n.push(e),this._dv()}}};t.default=r.default.View.extend({tmpl:(e,t,i,r)=>{let o,d,n,p,c,u,h=[],{width:f,left:g,right:_,top:x,bottom:b,zIndex:m,id:y,i18n:w,icon:v,title:k,shrink:A,fixedSize:S,height:M,resizeX:z,view:j,resizeY:E}=e;return c=[t(0,1,v)],p=[t("i",l,c),t(0,0,w(k))],n=[t("div",{class:"pco pd",title:r(w("bi")),"mx-mousedown":i+"\x1e_dz()"},p)],c=[t(0,0,"\ue73a")],u="pw pcp",A&&(u+=" pz"),p=[t("i",{"mx-click":i+"\x1e_dB()",title:r(w(A?"bp":"bq",k)),class:u},c)],c=[t(0,0,"\ue635")],p.push(t("i",{class:"pw pcp","mx-click":i+"\x1e_bK()",title:r(w("u",k))},c)),n.push(t("div",s,p)),d=[t("div",a,n)],(n=[]).push(t("div",{style:"width:"+r(z?"calc(100% - 2px)":"100%"),class:"pcs pk pcv pb","mx-view":r(j)})),z||(p=[t("div",{class:"pct pj pb",title:r(w("bj")),"mx-mousedown":i+"\x1e_bg({w:1})"})],n.push(...p)),d.push(t("div",{class:"pcq",id:"c_"+r(y),style:"height:"+r(A?0:S?`${M}px`:`calc(100vh - ${M}px)`)},n)),u="pcu pj",!A&&E||(u+=" ph"),d.push(t("div",{title:r(w("bk")),"mx-mousedown":i+"\x1e_bg({h:1})",class:u})),o="width:"+r(f)+"px;",o+=null!=g?"left:"+r(g):"right:"+r(_),o+="px;",o+=null!=x?"top:"+r(x)+"px":"bottom:"+r(b)+"px",o+=";z-index:"+r(m)+";",h.push(t("div",{class:"pcm",id:"p_"+r(y),"mx-mousedown":i+"\x1e_dA()",style:o},d)),t(i,0,h)},mixins:[d.default],init(e){p._ay(this),this.on("destroy",()=>{p._ax(this)}),this._dy=e.close,this.set({icon:e.icon,title:e.title,width:e.width,height:e.height,left:e.left,top:e.top,right:e.right,bottom:e.bottom,view:e.view,fixedSize:e.fixedSize,resizeX:e.resizeX,resizeY:e.resizeY})},render(){this.digest({zIndex:300+n.length})},"_dz<mousedown>"(e){let t=r.node("p_"+this.id).style,i=this.get("left"),a=this.get("width"),l=0;null==i&&(l=1,i=this.get("right"));let s=this.get("top"),d=0;null==s&&(d=1,s=this.get("bottom"));let n=l?"right":"left",p=d?"bottom":"top",c=0,u=e.eventTarget;this._x(e,r=>{c||(c=1,o.default._y(u));let h=(l?e.pageX-r.pageX:r.pageX-e.pageX)+i;h<0?h=0:h+a>window.innerWidth&&(h=window.innerWidth-a);let f=(d?e.pageY-r.pageY:r.pageY-e.pageY)+s;f<0?f=0:f+18>window.innerHeight&&(f=window.innerHeight-18),t[n]=h+"px",t[p]=f+"px",this.set({[n]:h,[p]:f})},()=>{o.default._z()})},"_bg<mousedown>"(e){let{w:t}=e.params,i=this.get("width"),a=this.get("height"),l=this.get("right"),s=r.node("c_"+this.id);s.classList.add("pcr");let d=s.style,n=r.node("p_"+this.id).style,p=0,c=e.eventTarget;this._x(e,s=>{if(p||(p=1,o.default._y(c)),t){let t=s.pageX-e.pageX;t+i<100&&(t=100-i);let r=t+i;n.width=r+"px",(l||0===a)&&(n.right=l-t+"px",this.set({right:l-t})),this.set({width:r})}else{let t=e.pageY-s.pageY+a;d.height=`calc(100vh - ${t}px)`,this.digest({height:t})}},()=>{o.default._z(),s.classList.remove("pcr")})},_dw(e){r.node("p_"+this.id).style.zIndex=e},"_dA<mousedown>"(){p._dx(this)},_y(){p._dx(this)},_z(){},"_dB<click>"(){this.digest({shrink:!this.get("shrink")})},"_bK<click>"(){let e=this._dy;e&&r.default.toTry(e)}})}),define("panels/data/index",["magix"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix");t.default=a.default.View.extend({tmpl:(e,t,i)=>{let a=[];return a.push(t(0,0,"data source panel")),t(i,0,a)},render(){this.digest()}})}),define("panels/elements/index",["magix","../../util/converter","../../designer/stage-elements"],(e,t,i)=>{let a={class:"pw pcd"},l={class:"pl"};Object.defineProperty(t,"__esModule",{value:!0});const s=e("magix"),r=e("../../util/converter"),o=e("../../designer/stage-elements");s.default.applyStyle("pr",".pca{padding:5px 2px}.pcb{display:flex;align-items:center;padding:0 2px;color:#333;height:22px;line-height:22px;cursor:pointer;margin:1px 0}.pcb:hover{background:#f0f0f0}.pcc,.pcc:hover{background:#fcb58f}.pcd{margin:0 4px 0 2px;font-size:12px}.pce{border:2px solid #fa742b}.pcf-top{box-shadow:0 -1px #fa742b}.pcf-bottom{box-shadow:0 1px #fa742b}");let d=s.default.guid("rp_"),n={_I(){s.node(d)||document.body.insertAdjacentHTML("beforeend",`<div class="pf pce" id="${d}"></div>`)},_y(e){let t=s.node(d).style,{props:i}=e,a=r.default._dg(i);t.left=a.x+"px",t.top=a.y+"px",t.width=i.width+"px",t.height=i.height+"px",t.borderWidth=2*s.State.get("_c")+"px";let l=i.rotate||0;t.transform=`rotate(${l}deg)`},_z(){s.node(d).style.left="-10000px"}};t.default=s.default.View.extend({tmpl:(e,t,i,s,r,o,d)=>{let n,p,c,u,h,f=[],{elements:g,selectedMap:_,drag:x,index:b,onTop:m,i18n:y}=e;n=[];for(let e=g.length;e--;){let r=g[e];h=[t(0,1,r.ctrl.icon)],u=[t("i",a,h)],h=[t(0,0,y(r.ctrl.title))],u.push(t("div",l,h)),c="pcb",_[r.id]&&(c+=" pcc"),x&&e==b&&(c+=" pcf-"+s(m?"top":"bottom")),p=[t("div",{"mx-mouseover":i+"\x1e_dh({element:'"+d(o,r)+"'})","mx-mouseout":i+"\x1e_di()","mx-click":i+"\x1e_dj({element:'"+d(o,r)+"'})","mx-dragstart":i+"\x1e_dm({index:"+s(e)+"})","mx-dragover":i+"\x1e_dn({index:"+s(e)+"})",draggable:"true",class:c},u)],n.push(...p)}return f.push(t("div",{class:"pca pj","mx-dragend":i+"\x1e_do()"},n)),t(i,0,f)},init(){n._I();let e=this.render.bind(this);s.State.on("_",e),s.State.on("i",e),s.State.on("l",e)},render(){let e=s.State.get("_F"),t=s.State.get("_X");this.digest({selectedMap:t,elements:e})},"_dh<mouseover>"(e){if(!s.default.inside(e.relatedTarget,e.eventTarget)){let{element:t}=e.params;n._y(t)}},"_di<mouseout>"(e){s.default.inside(e.relatedTarget,e.eventTarget)||n._z()},"_dj<click>"(e){let{element:t}=e.params;o.default._az(e,t)},"_dm<dragstart>"(e){this._dk=e.params.index,this._dl=e.eventTarget,e.dataTransfer.effectAllowed="all",e.dataTransfer.setData("text/plain","fix ff")},"_dn<dragover>"(e){let t=this;if(e.preventDefault(),t._dl!=e.eventTarget){e.dataTransfer.dropEffect="move";let i=e.eventTarget.getBoundingClientRect(),a=i.top+i.height/2>e.pageY,l=e.params.index;t.digest({onTop:a,drag:!0,index:l})}else e.dataTransfer.dropEffect="none",t.digest({drag:!1})},"_do<dragend>"(e){let t=this,i=t.get();if(i.drag){let e=t._dk,a=i.elements[e];i.elements.splice(i.index+(i.onTop?1:0),0,a),i.index<e?i.elements.splice(e+1,1):i.elements.splice(e,1),t.set({elements:i.elements}),s.State.fire("i")}t.digest({drag:!1})}})}),define("panels/overview/index",["magix","../../gallery/mx-dragdrop/index"],(e,t,i)=>{let a={class:"pci"};Object.defineProperty(t,"__esModule",{value:!0});const l=e("magix"),s=e("../../gallery/mx-dragdrop/index");l.default.applyStyle("ps",".pcg{transition:all .25s}.pch{transition:width,height .25s}.pci{padding:2px 0}.pcj{background:#edeef3;position:relative;overflow:hidden;box-shadow:inset 1px 1px 6px 2px #dadada}.pck{position:absolute;box-shadow:inset 0 0 1px 1px #fa742b;cursor:move}.pcl{background:#fcb58f;position:absolute;border:1px dotted #fff}");let r=[50,240,50,120],o=[180,120],d=window.requestIdleCallback||(e=>{setTimeout(e,500)}),n=window.cancelIdleCallback||clearTimeout;t.default=l.default.View.extend({mixins:[s.default],tmpl:(e,t,i,l)=>{let s,r,o,d,n,p=[],{width:c,height:u,centerMargin:h,page:f,pageWidth:g,pageHeight:_,canvasMargin:x,elements:b,ratio:m,id:y,left:w,top:v,viewportWidth:k,viewportHeight:A}=e;o=[];for(let e=0,i=b,a=i.length;e<a;e++){let{id:a,props:s,type:r}=i[e],p=Math.max(s.width*m,1),c=Math.max(s.height*m,1);n="left:"+l(s.x*m)+"px;top:"+l(s.y*m)+"px;width:"+l(p)+"px;height:"+l(c)+"px;transform:rotate("+l(s.rotate)+"deg);","circle"==r&&(n+="border-radius:50%;"),d=[t("div",{id:l(y)+"_"+l(a),class:"pcl pcg",style:n})],o.push(...d)}return r=[t("div",{style:"position:relative;background:"+l(f.background)+";width:"+l(g)+"px;height:"+l(_)+"px;margin:"+l(x)},o),t("div",{class:"pck pch",style:"left:"+l(w)+"px;top:"+l(v)+"px;width:"+l(k)+"px;height:"+l(A)+"px;","mx-mousedown":i+"\x1e_du()"})],s=[t("div",{class:"pcj pcg",style:"width:"+l(c)+"px;height:"+l(u)+"px;margin:"+l(h)},r)],p.push(t("div",a,s)),t(i,0,p)},init(){let e=l.node("stage"),t=this._dr.bind(this);l.State.on("_",t),l.State.on("a",t),l.State.on("b",t),l.State.on("i",t),l.State.on("k",t),l.State.on("n",t),e.addEventListener("scroll",this._ds.bind(this))},_dr(){n(this._dt),this._dt=d(this.render.bind(this))},_ds(){let e=l.node("stage"),t=this.get("ratio");if(t){let i=this.get("width"),a=this.get("height"),l=this.get("viewportWidth"),s=this.get("viewportHeight");this.digest({left:Math.min(e.scrollLeft*t,i-l),top:Math.min(e.scrollTop*t,a-s)})}},render(){let e=this.wrapAsync(()=>{if(!l.node("stage_canvas"))return void d(e);let t=l.State.get("_d"),i=l.State.get("_c"),a=l.node("stage"),s=a.scrollWidth,n=a.scrollHeight,p=o[0],c=p/s,u=c*n;u>o[1]&&(p=(c=(u=o[1])/n)*s);let h=c*t.width*i,f=c*t.height*i,g="";for(let e of r)g+=c*e+"px ";let _=`${(o[1]-u)/2}px ${(o[0]-p)/2}px`,x=Math.min(a.offsetWidth,s)*c,b=Math.min(a.offsetHeight,n)*c;this.set({width:p,height:u,page:t,pageWidth:h,pageHeight:f,ratio:c,elements:l.State.get("_F"),viewportHeight:b,viewportWidth:x,canvasMargin:g,centerMargin:_}),this._ds()});e()},"_du<mousedown>"(e){let t=this.get("left"),i=this.get("top"),a=this.get("viewportWidth"),s=this.get("viewportHeight"),r=this.get("width"),o=this.get("height"),d=l.node("stage"),n=this.get("ratio");this._x(e,l=>{let p=t+l.pageX-e.pageX,c=i+l.pageY-e.pageY;p<0?p=0:p>r-a&&(p=r-a),c<0?c=0:c>o-s&&(c=o-s),d.scrollLeft=p/n,d.scrollTop=c/n})},"$win<resize>"(){this._dr()}})}),define("panels/props/index",["magix","../../designer/props","../../designer/history","../../util/transform","../../util/bezier"],(e,t,i)=>{let a,l,s,r={class:"pcw"},o={class:"pcx"},d={class:"pcy"},n={class:"pcD"};Object.defineProperty(t,"__esModule",{value:!0});const p=e("magix"),c=e("../../designer/props"),u=e("../../designer/history"),h=e("../../util/transform"),f=e("../../util/bezier");p.default.applyStyle("pu",'.pcw{padding:4px;min-width:200px}.pcx{line-height:28px;display:flex;align-items:center}.pcy{width:80px;text-align:right}.pcz{height:1px;line-height:1px;margin:5px 0;background:rgba(0,0,0,.2);background:-webkit-gradient(linear,left top,right top,from(rgba(165,69,243,0)),color-stop(.5,rgba(125,118,132,.33)),to(rgba(165,69,243,0)))}.pcA{width:140px}.pcB{height:90px}.pcC{align-items:flex-start}.pcD{display:flex;align-items:center;cursor:pointer}.pcE{visibility:hidden;position:absolute}.pcF{width:32px;height:16px;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;display:inline-block;border-radius:22px;background:#ccc}.pcF:before{content:"";width:12px;height:12px;position:absolute;left:0;margin:2px;border-radius:50%;background:#fff;transition:all .25s}.pcE:checked+.pcF{background:#fa742b}.pcE:checked+.pcF:before{left:100%;margin-left:-14px}.pcE:disabled+.pcF{background:#e6e6e6;cursor:not-allowed}'),t.default=p.default.View.extend({tmpl:(e,t,i,p,c,u,h,f)=>{let g,_,x,b,m,y,w,v,k,A,S,M=[],{elements:z,i18n:j,props:E}=e;if(1==z.length){let e=z[0];x=[],m=[t(0,0,j("br"))],b=[t("span",d,m)],m=[t(0,0,j(e.ctrl.title))],b.push(t("span",0,m)),x.push(t("li",o,b));for(let s=0,r=e.ctrl.props,o=r.length;s<o;s++){let o=r[s];if(b=[],o.type==E._ab)m=a?[a]:[a=t("li",{mxs:"pN:_",class:"pcz"})],b.push(...m);else{m=[];let a=e.props[o.key];o.read&&(a=o.read(a)),o.ifShow&&!o.ifShow(e.props)||(v=[],k=[t(0,0,j(o.tip))],v.push(t("span",d,k)),o.type==E._a_?(A="gallery/mx-number/index?value="+h(u,a),null!=(g=o.max)&&(A+="&max="+c(g)),null!=(g=o.step)&&(A+="&step="+c(g)),null!=(g=o.fixed)&&(A+="&fixed="+c(g)),null!=(g=o.min)&&(A+="&min="+c(g)),k=[t("div",{mxv:"elements",class:"pcA pt pg",disabled:e.props.locked,"mx-input":i+"\x1e_dE({key:'"+f(o.key)+"',use:'value',element:'"+h(u,e)+"',write:'"+h(u,o.write)+"',bezier:'"+h(u,o.bezier)+"'})","mx-view":A})],v.push(...k)):o.type==E._aa?(k=[t("div",{mxv:"elements",class:"pcA","mx-input":i+"\x1e_dE({key:'"+f(o.key)+"',use:'color',element:'"+h(u,e)+"'})","mx-view":"gallery/mx-color/index?clear="+c(o.clear)+"&color="+h(u,a)+"&align=right&disabled="+c(e.props.locked)+"&alpha="+c(o.alpha)})],v.push(...k)):o.type==E._ac?(S=[t("input",{class:"pcE",type:"checkbox",checked:e.props[o.key],"mx-change":i+"\x1e_dE({key:'"+f(o.key)+"',native:'checked',element:'"+h(u,e)+"',refresh:'"+h(u,o.refresh)+"'})"},0,1)],l?S.push(l):S.push(l=t("i",{mxs:"pN:a",class:"pcF"})),k=[t("label",n,S)],v.push(...k)):o.type==E._af?(k=[t("textarea",{class:"pu pcA pcB",disabled:e.props.locked,"mx-input":i+"\x1e_dE({key:'"+f(o.key)+"',native:'value',element:'"+h(u,e)+"'})",value:p(a)})],v.push(...k)):o.type==E._ad?(k=[t("div",{mxv:"elements",class:"pcA","mx-input":i+"\x1e_dE({key:'"+f(o.key)+"',use:'value',element:'"+h(u,e)+"'})","mx-view":"gallery/mx-font/style?disabled="+h(u,e.props.locked)+"&value="+h(u,a)})],v.push(...k)):o.type==E._ae?(k=[t("div",{mxv:"elements",class:"pcA","mx-input":i+"\x1e_dE({key:'"+f(o.key)+"',use:'value',element:'"+h(u,e)+"'})","mx-view":"gallery/mx-font/align?disabled="+h(u,e.props.locked)+"&value="+h(u,a)})],v.push(...k)):o.type==E._ah?(A="gallery/mx-dropdown/index?",(g=e.props.locked)&&(A+="disabled="+h(u,g)),A+="&selected="+c(a)+"&list="+h(u,o.items)+"&textKey=text&valueKey=value",k=[t("div",{mxv:"elements",class:"pcA","mx-change":i+"\x1e_dE({key:'"+f(o.key)+"',use:'value',element:'"+h(u,e)+"'})","mx-view":A})],v.push(...k)):o.type==E._ag?(k=[t("div",{mxv:"elements",class:"pcA","mx-change":i+"\x1e_dE({key:'"+f(o.key)+"',use:'src',refresh:'"+h(u,o.refresh)+"',element:'"+h(u,e)+"',write:'"+h(u,o.write)+"'})","mx-view":"gallery/mx-picture/index?src="+c(a)+"&disabled="+h(u,e.props.locked)})],v.push(...k)):o.type==E._ai?(S=[t(0,0,j("bs"))],k=[t("button",{class:"pm pn",disabled:e.props.locked,"mx-click":i+"\x1e_dF({key:'"+f(o.key)+"',element:'"+h(u,e)+"'})"},S)],v.push(...k)):o.type==E._aj&&(k=[t("input",{class:"pt",disabled:e.props.locked,"mx-input":i+"\x1e_dE({key:'"+f(o.key)+"',native:'value',element:'"+h(u,e)+"'})"},0,1)],v.push(...k)),w="pcx",o.dockTop&&(w+=" pcC"),y=[t("li",{class:w},v)],m.push(...y)),b.push(...m)}x.push(...b)}_=[t("ul",r,x)],M.push(..._)}else _=s?[s]:[s=t("div",{mxs:"pN:b","mx-view":"panels/props/page"})],M.push(..._);return t(i,0,M)},init(){let e=this._dC(this.render.bind(this),100);p.State.on("l",e),p.State.on("k",e),p.State.on("_",e)},render(){this.digest({scale:p.State.get("_c"),props:c.default,elements:p.State.get("_P")})},"_dE<input,change>"(e){let{key:t,use:i,element:a,refresh:l,native:s,write:r,bezier:o}=e.params;if(i||s){let d,n=a.props,p="width"==t||"height"==t;p&&(d=h.default._dD(n,n.rotate));let c=s?e.eventTarget[s]:e[i];if(r&&(c=r(c,n,e)),n[t]=c,p){let e=h.default._dD(n,n.rotate);n.x+=d.x-e.x,n.y+=d.y-e.y,l=!0}o&&f.default(n)}l&&this.render(),p.State.fire("n");let d=p.node(a.id),n=p.Vframe.byNode(d);n&&n.invoke("_aL",[a]),u.default._t("a"+t,500)},"_dF<click>"(e){let{key:t,element:i}=e.params,a=i.props,l=h.default._dD(a,a.rotate),s=new Image;s.onload=(()=>{a.width=s.width,a.height=s.height;let e=h.default._dD(a,a.rotate);a.x+=l.x-e.x,a.y+=l.y-e.y,this.render(),p.State.fire("n");let r=p.node(i.id),o=p.Vframe.byNode(r);o&&o.invoke("_aL",[i]),u.default._t("a"+t,500)}),s.src=a[t]}})}),define("panels/props/page",["magix","../../designer/history","../../designer/props"],(e,t,i)=>{let a,l={class:"pcw"},s={class:"pcx"},r={class:"pcy"};Object.defineProperty(t,"__esModule",{value:!0});const o=e("magix"),d=e("../../designer/history"),n=e("../../designer/props");t.default=o.default.View.extend({tmpl:(e,t,i,o,d,n,p,c)=>{let u,h,f,g,_,x,b,m,y=[],{i18n:w,ctrl:v,props:k,page:A}=e;h=[],g=[t(0,0,w("br"))],f=[t("span",r,g)],g=[t(0,0,w(v.title))],f.push(t("span",0,g)),h.push(t("li",s,f));for(let e=0,l=v.props,s=l.length;e<s;e++){let s=l[e];f=[],s.type==k._ab?(g=a?[a]:[a=t("li",{mxs:"pO:_",class:"pcz"})],f.push(...g)):s.ifShow&&!s.ifShow(A)||(x=[],b=[t(0,0,w(s.tip))],x.push(t("span",r,b)),s.type==k._a_?(m="gallery/mx-number/index?value="+p(n,A[s.key]),null!=(u=s.max)&&(m+="&max="+d(u)),m+="&step="+d(s.step),null!=(u=s.fixed)&&(m+="&fixed="+d(u)),null!=(u=s.min)&&(m+="&min="+d(u)),b=[t("div",{mxv:"page,ctrl",class:"pcA pt pg","mx-input":i+"\x1e_dE({key:'"+c(s.key)+"',use:'value'})","mx-view":m})],x.push(...b)):s.type==k._aa?(b=[t("div",{mxv:"page,ctrl",class:"pcA","mx-input":i+"\x1e_dE({key:'"+c(s.key)+"',use:'color'})","mx-view":"gallery/mx-color/index?clear="+d(s.clear)+"&color="+p(n,A[s.key])+"&align=right&alpha="+d(s.alpha)})],x.push(...b)):s.type==k._ag?(b=[t("div",{class:"pcA","mx-change":i+"\x1e_dE({key:'"+c(s.key)+"',use:'src',refresh:'"+p(n,s.refresh)+"',write:'"+p(n,s.write)+"'})","mx-view":"gallery/mx-picture/index?src="+d(A[s.key])})],x.push(...b)):s.type==k._ah&&(b=[t("div",{mxv:"ctrl",class:"pcA","mx-change":i+"\x1e_dE({key:'"+c(s.key)+"',use:'value',refresh:'"+p(n,s.refresh)+"'})","mx-view":"gallery/mx-dropdown/index?selected="+d(A[s.key])+"&list="+p(n,s.items)+"&textKey=text&valueKey=value"})],x.push(...b)),_="pcx",s.dockTop&&(_+=" pcC"),g=[t("li",{class:_},x)],f.push(...g)),h.push(...f)}return y.push(t("ul",l,h)),t(i,0,y)},init(){let e=this.render.bind(this);o.State.on("_",e)},render(){this.digest({props:n.default,ctrl:o.State.get("_Y"),page:o.State.get("_d")})},"_dE<input,change>"(e){let{key:t,use:i,refresh:a,write:l}=e.params,s=o.State.get("_d");s[t]=e[i],l&&l(e[i],s,e),d.default._t("b",500),o.State.fire("b"),a&&this.render()}})}),define("elements/designer",["magix","../gallery/mx-dragdrop/index","../gallery/mx-pointer/cursor","../designer/history","../util/transform","../util/converter","../util/bezier"],(e,t,i)=>{let a,l={style:"position:absolute;pointer-events:none;overflow:visible;"};Object.defineProperty(t,"__esModule",{value:!0});const s=e("magix"),r=e("../gallery/mx-dragdrop/index"),o=e("../gallery/mx-pointer/cursor"),d=e("../designer/history"),n=e("../util/transform"),p=e("../util/converter"),c=e("../util/bezier");s.default.applyStyle("pg",'.pat{left:50%;top:50%;position:absolute}.pat:before{width:1px;height:5px;left:0;top:-2px}.pat:after,.pat:before{content:" ";position:absolute;background:red}.pat:after{width:5px;height:1px;left:-2px;top:0}.pau{border:1px dotted hsla(0,0%,86.7%,.4);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.pav{border:1px solid #fa742b}.paw{border:1px solid #999}.pax{fill:#fff;stroke:#fa742b;pointer-events:all;stroke-width:1px;cursor:pointer;transition:stroke-width .25s}.pax:hover{stroke-width:2px}.pay{fill:none;stroke:#fa742b;stroke-width:1px}.paz{border-right:3px solid #fa742b;right:-2px}.paA,.paB{border-bottom:3px solid #fa742b;bottom:-2px}.paB{border-right:3px solid #fa742b;right:-2px}.paC{cursor:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAMAAADXqc3KAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAABvUExURUdwTP///9XV1R0dHf///3Nzc////////////////1ZWVq+vr/T09PX19QQEBP///////8XFxf///////////wYGBv///+jo6P///4aGhqioqMzMzP///2BgYP///////////zExMf///wAAAP///xLps0AAAAAjdFJOUwCxxOdixRDmzSDMv8/Z+tz5wWpXWPk3zALCv8KnyXZVMNuNPnv3CwAAAJ1JREFUKM/NkckOwyAMRFkDBMhC9qWr+//fWCIV1WlzrjoXS36yxmMT8hdqqKoUvRAjMtw22kvecem1GjTuK1vApmI+wQMBbQFy5li+QQRaX4AtRX+vbntAJeRl9HTTx4TiwESs61DXNUPmVQeujzVrQwh43TTxpeRBslVfMUhbiXKWyiAwvnIsMcdyJkfJYdpNvG/ltDm+bjP+8KFP8ggL+zQLGxwAAAAASUVORK5CYII=") 14 14,pointer;top:-3px;right:-3px;width:6px;height:6px;border-radius:50%;background:#fa742b}');const u={0:1,2:1,4:1,6:1,1:2,5:2,3:3,7:3};let h={};s.State.on("l",()=>{for(let e in h){let t=s.Vframe.byId(e);t&&(t.invoke("_bc"),t.invoke("render"))}}),t.default=s.default.View.extend({tmpl:(e,t,i,s,r,o,d)=>{let n,p,c,u,h,f,g,_,x,b=[],{element:m,view:y,id:w,onlyMove:v,fullscreen:k,selected:A,count:S,i18n:M}=e,z=m.props,j=m.ctrl,E=m.type;b.push(t("div",{mxv:"element,onlyMove",class:"pj","mx-view":s(y)+"?props="+d(o,z)+"&onlyMove="+d(o,v),id:"entity_"+s(w)}));let P=z.rotate%360;if(u=[],!k&&!z.locked){if(h=[],A){if(f=[],a?f.push(a):f.push(a=t("div",{mxs:"ps:_",class:"pat"})),1==S&&j.modifier&&j.modifier.rotate){if((g=[]).push(t("div",{class:"paC pf","mx-mousedown":i+"\x1e_bd()",title:s(M("ah"))})),j.modifier){_=[],n="";let e=Math.min(20,z.height-3)-4;n+=" ";let a=Math.min(20,z.width)-4;n+=" ";let l=Math.max(Math.min(a,e)-2,0);n+=" ",a=Math.min(a,z.width-l-6),n+=" ",e=Math.min(e,z.height-l-6-3),n+=" ";let r=(z.height-e-l+3)/2;if(j.modifier.width&&(p="height:"+s(Math.max(e,0))+"px;top:"+s(r)+"px;cursor:",P<=22.5||P>337.5||P>157.5&&P<=202.5?p+="ew":P<=67.5||P>202.5&&P<=247.5?p+="nwse":P<=112.5||P>247.5&&P<=292.5?p+="ns":(P<=157.5||P>292.5&&P<=337.5)&&(p+="nesw"),p+="-resize",x=[t("div",{class:"pf paz",title:s(M("ai")),"mx-mousedown":i+"\x1e_bg({key:'rm'})",style:p})],_.push(...x)),j.modifier.height){let e=(z.width-a-l)/2;p="width:"+s(Math.max(a,0))+"px;left:"+s(e)+"px;cursor:",P<=22.5||P>337.5||P>157.5&&P<=202.5?p+="ns":P<=67.5||P>202.5&&P<=247.5?p+="nesw":P<=112.5||P>247.5&&P<=292.5?p+="ew":(P<=157.5||P>292.5&&P<=337.5)&&(p+="nwse"),p+="-resize",x=[t("div",{class:"pf paA",title:s(M("aj")),"mx-mousedown":i+"\x1e_bg({key:'mb'})",style:p})],_.push(...x)}j.modifier.width&&j.modifier.height&&(p="",0==l&&(p+="display:none;"),p+="width:"+s(l)+"px;height:"+s(l)+"px;cursor:",P<=22.5||P>337.5||P>157.5&&P<=202.5?p+="nwse":P<=67.5||P>202.5&&P<=247.5?p+="ns":P<=112.5||P>247.5&&P<=292.5?p+="nesw":(P<=157.5||P>292.5&&P<=337.5)&&(p+="ew"),p+="-resize;",x=[t("div",{class:"pf paB",title:s(M("ak")),"mx-mousedown":i+"\x1e_bg({key:'rb'})",style:p})],_.push(...x)),g.push(..._)}f.push(...g)}h.push(...f)}u.push(...h)}return p="left:"+s(z.x)+"px;top:"+s(z.y)+"px;width:"+s(z.width)+"px;height:"+s(z.height)+"px;",P&&(p+="transform:rotate("+s(P)+"deg);"),c="pf pj",k||(c+=" pau"),A&&!k&&"bezier"!=E&&(c+=" ",z.locked?c+="paw":c+="pav"),b.push(t("div",{id:"mask_"+s(m.id),style:p,class:c},u)),"bezier"==E&&A&&!k&&(h=[t("path",{d:"M"+s(z.startX)+" "+s(z.startY)+" L"+s(z.ctrl1X)+" "+s(z.ctrl1Y)+" M"+s(z.ctrl2X)+" "+s(z.ctrl2Y)+" L"+s(z.endX)+" "+s(z.endY),class:"pay"},0,1),t("circle",{"mx-mousedown":i+"\x1e_bi({key:'start'})",r:"4",cx:s(z.startX),cy:s(z.startY),class:"pax"}),t("circle",{"mx-mousedown":i+"\x1e_bh({key:'ctrl1'})",r:"4",cx:s(z.ctrl1X),cy:s(z.ctrl1Y),class:"pax"}),t("circle",{"mx-mousedown":i+"\x1e_bi({key:'end'})",r:"4",cx:s(z.endX),cy:s(z.endY),class:"pax"}),t("circle",{"mx-mousedown":i+"\x1e_bh({key:'ctrl2'})",r:"4",cx:s(z.ctrl2X),cy:s(z.ctrl2Y),class:"pax"})],u=[t("svg",l,h)],b.push(...u)),t(i,0,b)},mixins:[r.default],ctor(e){this.assign(e),h[this.id]=1,this.on("destroy",()=>{delete h[this.id]})},_bc(){let e=s.State.get("_X"),t=s.State.get("_P").length,i=this.get().element.id;this.set({selected:s.has(e,i),count:t})},assign(e){return this.set(e),this._bc(),!0},render(){this.digest()},_aL(e){this.digest({element:e,onlyMove:!1})},"_bd<mousedown>"(e){e.stopPropagation();let t=this.get("element"),i=t.props;s.State.fire("j",{show:1});let a=i.x+i.width/2,l=i.y+i.height/2,r=p.default._aK({x:e.pageX,y:e.pageY}),n=i.rotate,c=Math.atan2(r.y-l,r.x-a)-n*Math.PI/180,u=!1;this._x(e,d=>{u||o.default._y(e.eventTarget),u=!0,r=p.default._aK({x:d.pageX,y:d.pageY});let n=Math.atan2(r.y-l,r.x-a);n=180*(n-c)/Math.PI,i.rotate=(360+(0|n))%360,this.digest({element:t,onlyMove:!0}),s.State.fire("k")},()=>{o.default._z(),u&&d.default._t(),s.State.fire("j")})},"_bg<mousedown>"(e){if(e.button)return;e.stopPropagation();let t=this,i=t.get("element"),{props:a,ctrl:l}=i;s.State.fire("j",{show:1});let r=a.rotate||0,{key:p}=e.params;r=(r+360)%360,0==a.width&&(a.width=.01),0==a.height&&(a.height=.01);let c=a.width,h=a.height,f=a.x,g=a.y,_=0,x=0,b=Number.MAX_VALUE,m=Number.MAX_VALUE;for(let e of l.props)"width"==e.key?(s.default.has(e,"max")&&(b=e.max),s.default.has(e,"min")&&(_=e.min)):"height"==e.key&&(s.default.has(e,"max")&&(m=e.max),s.default.has(e,"min")&&(x=e.min));let y=n.default._aD(a,r),w=n.default._be(y.point,p),{opposite:v,current:k}=w,A=v.index,S=v.point,M=k.point,z=S.x,j=S.y,E=Math.abs(M.x-z),P=Math.abs(M.y-j),T={x:f,y:g,rotate:r,width:c,height:h},X=e.pageX,I=e.pageY,Y=!1;t._x(e,l=>{Y||o.default._y(e.eventTarget);let d={x:1,y:1};Y=!0;let p=E>P,c=1,h=l.pageX-X,f=l.pageY-I;0==A||7==A?p&&r>90&&r<270?h=-h:!p&&r>180&&r<360&&(f=-f):0!=A&&1!=A||(p&&r>45&&r<135?h=-h:!p&&r>90&&r<270&&(f=-f)),(c=p?(h+E)/E:(f+P)/P)<0&&(c=0);let g=u[A];1===g?d.x=d.y=c:2===g?d.y=c:3===g&&(d.x=c);let w=n.default._bf(T,d,y,A),v=w.width,k=w.height;v<_?v=_:v>b&&(v=b),k<x?k=x:k>m&&(k=m),v==a.width&&k==a.height||(a.x=w.left,a.y=w.top,a.width=v,a.height=k,t.digest({element:i,onlyMove:!1}),s.State.fire("k"))},()=>{Y&&(d.default._t(),o.default._z()),s.State.fire("j")})},"_bh<mousedown>"(e){e.stopPropagation();let t=this.get("element"),i=t.props;s.State.fire("j",{show:1});let a=!1,l=e.params.key,r=i[`${l}X`],n=i[`${l}Y`];this._x(e,d=>{a||o.default._y(e.eventTarget),a=!0;let p=d.pageX-e.pageX,u=d.pageY-e.pageY;i[`${l}X`]=r+p,i[`${l}Y`]=n+u,c.default(i),this.digest({element:t,onlyMove:!0}),s.State.fire("k")},()=>{o.default._z(),a&&d.default._t(),s.State.fire("j")})},"_bi<mousedown>"(e){e.stopPropagation();let t=this.get("element"),i=t.props,a=e.params.key,l=i[`${a}X`],r=i[`${a}Y`];s.State.fire("j",{show:1});let n=!1;this._x(e,d=>{n||o.default._y(e.eventTarget),n=!0;let p=d.pageX-e.pageX,u=d.pageY-e.pageY;i[`${a}X`]=l+p,i[`${a}Y`]=r+u,c.default(i),this.digest({element:t,onlyMove:!0}),s.State.fire("k")},()=>{o.default._z(),n&&d.default._t(),s.State.fire("j")})}})}),define("elements/index",["magix","./line/designer","./bezier/designer","./rect/designer","./circle/designer","./text/designer","./image/designer","./repeat/designer","./page/designer","./chart-line/designer","./chart-meter/designer","./chart-bar/designer","./chart-pie/designer"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix"),l=e("./line/designer"),s=e("./bezier/designer"),r=e("./rect/designer"),o=e("./circle/designer"),d=e("./text/designer"),n=e("./image/designer"),p=e("./repeat/designer"),c=e("./page/designer"),u=e("./chart-line/designer"),h=e("./chart-meter/designer"),f=e("./chart-bar/designer"),g=e("./chart-pie/designer");let _=[l.default,s.default,r.default,o.default,d.default,n.default,p.default,u.default,h.default,f.default,g.default],x=a.toMap(_,"type"),b=[l.default,s.default,r.default,o.default,d.default,n.default,p.default,{spliter:!0},{icon:"&#xe629;",title:"\u56fe\u8868",subs:[u.default,h.default,f.default,g.default]}];t.default={_G:()=>b,_V:()=>c.default,_W(e){let t={},i=e=>{for(let a of e){let e=x[a.type];if(a.ctrl=e,t[a.id]=a,"layout"==a.role)for(let e of a.props.columns)i(e.elements)}};return i(e),{elements:e,map:t}}}}),define("elements/bezier/designer",["../../designer/props","../../i18n/index","../../util/converter","../designer"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("../../designer/props"),l=e("../../i18n/index"),s=e("../../util/converter"),r=e("../designer");t.default=r.default.extend({ctor(){this.set({view:"elements/bezier/index"})}},{type:"bezier",role:"bezier",title:"C",icon:"&#xe71b;",scales:["x","y","width","height","startX","startY","endX","endY","ctrl1X","ctrl1Y","ctrl2X","ctrl2Y"],moved:[{key:"x",use:"x"},{key:"y",use:"y"},{key:"ctrl1X",use:"x"},{key:"ctrl1Y",use:"y"},{key:"ctrl2X",use:"x"},{key:"ctrl2Y",use:"y"},{key:"startX",use:"x"},{key:"startY",use:"y"},{key:"endX",use:"x"},{key:"endY",use:"y"}],json:{startX:s.default._b_,startY:s.default._b_,endX:s.default._b_,endY:s.default._b_,ctrl1X:s.default._b_,ctrl1Y:s.default._b_,ctrl2X:s.default._b_,ctrl2Y:s.default._b_,alpha:1,linetype:1,linewidth:1,color:1},getProps:(e,t)=>({alpha:1,x:e,y:t,startX:e,startY:t,endX:e+300,endY:t+100,ctrl1X:e+50,ctrl1Y:t+50,ctrl2X:e+250,ctrl2Y:t+50,width:300,height:100,linetype:"solid",linewidth:1,color:"#000000",locked:!1}),props:[{tip:"D",key:"startX",type:a.default._a_,read:s.default._b_,write:s.default._ba,bezier:1},{tip:"E",key:"startY",type:a.default._a_,read:s.default._b_,write:s.default._ba,bezier:1},{tip:"F",key:"ctrl1X",type:a.default._a_,read:s.default._b_,write:s.default._ba,bezier:1},{tip:"G",key:"ctrl1Y",type:a.default._a_,read:s.default._b_,write:s.default._ba,bezier:1},{tip:"H",key:"ctrl2X",type:a.default._a_,read:s.default._b_,write:s.default._ba,bezier:1},{tip:"I",key:"ctrl2Y",type:a.default._a_,read:s.default._b_,write:s.default._ba,bezier:1},{tip:"J",key:"endX",type:a.default._a_,read:s.default._b_,write:s.default._ba,bezier:1},{tip:"K",key:"endY",type:a.default._a_,read:s.default._b_,write:s.default._ba,bezier:1},{type:a.default._ab},{tip:"L",key:"linewidth",type:a.default._a_,min:0,max:20},{tip:"M",key:"alpha",type:a.default._a_,step:.1,fixed:1,min:0,max:1},{tip:"N",key:"linetype",type:a.default._ah,items:[{text:l.default("O"),value:"solid"},{text:l.default("P"),value:"dotted"},{text:l.default("Q"),value:"dashed"}]},{tip:"R",key:"color",type:a.default._aa},{type:a.default._ab},{tip:"S",key:"locked",type:a.default._ac,refresh:!0,free:!0}]})}),define("elements/bezier/index",["magix"],(e,t,i)=>{let a={style:"position:absolute;pointer-events:none;overflow:visible;"};Object.defineProperty(t,"__esModule",{value:!0});const l=e("magix");t.default=l.default.View.extend({tmpl:(e,t,i,l)=>{let s,r,o=[],{props:d}=e;return r="fill:none;stroke:"+l(d.color)+";stroke-width:"+l(d.linewidth)+";opacity:"+l(d.alpha)+";","solid"!=d.linetype&&(r+="stroke-dasharray:"+l("dotted"==d.linetype?2:4)+",2"),s=[t("path",{d:"M"+l(d.startX)+","+l(d.startY)+" C"+l(d.ctrl1X)+" "+l(d.ctrl1Y)+" "+l(d.ctrl2X)+" "+l(d.ctrl2Y)+" "+l(d.endX)+","+l(d.endY),style:r},0,1)],o.push(t("svg",a,s)),t(i,0,o)},init(e){this.assign(e)},assign(e){return this.set(e),!0},render(){this.digest()}})}),define("elements/chart-bar/designer",["../../designer/props","../../util/converter","../designer"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("../../designer/props"),l=e("../../util/converter"),s=e("../designer");t.default=s.default.extend({ctor(){this.set({view:"elements/chart-bar/index"})}},{type:"chart-bar",role:"chart-bar",title:"T",icon:"&#xe603;",modifier:{width:1,height:1,rotate:1},scales:["x","y","width","height"],moved:[{key:"x",use:"x"},{key:"y",use:"y"}],json:{x:l.default._b_,y:l.default._b_,width:l.default._b_,height:l.default._b_,alpha:1,title:1,rotate:1,background:1},getProps:(e,t)=>({background:"",alpha:1,width:500,height:300,x:e,y:t,title:"",rotate:0,locked:!1}),props:[{tip:"U",type:a.default._a_,key:"x",read:l.default._b_,write:l.default._ba},{tip:"V",type:a.default._a_,key:"y",read:l.default._b_,write:l.default._ba},{tip:"L",type:a.default._a_,key:"width",min:0,read:l.default._b_,write:l.default._ba},{tip:"W",key:"height",type:a.default._a_,min:0,read:l.default._b_,write:l.default._ba},{tip:"X",type:a.default._a_,key:"rotate",min:-360,max:360},{type:a.default._ab},{tip:"M",key:"alpha",type:a.default._a_,step:.1,fixed:1,min:0,max:1},{tip:"Y",type:a.default._aa,key:"background",alpha:!0,clear:!0},{tip:"Z",key:"title",type:a.default._aj},{type:a.default._ab},{tip:"S",key:"locked",type:a.default._ac,refresh:!0,free:!0}]})}),define("elements/chart-bar/index",["magix"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix");t.default=a.default.View.extend({tmpl:(e,t,i,a)=>{let l,s=[],{props:r,id:o}=e;return l="position:absolute;left:"+a(r.x)+"px;top:"+a(r.y)+"px;height:"+a(r.height)+"px;opacity:"+a(r.alpha)+";width:"+a(r.width)+"px;transform:rotate("+a(r.rotate)+"deg);",r.background&&(l+="background:"+a(r.background)+";"),s.push(t("div",{id:"chart_"+a(o),style:l})),t(i,0,s)},init(e){this.assign(e)},assign(e){return this.set(e),!0},render(){if(this.digest(),this.get("onlyMove"))return;let e=this.get("props");this._bb||(this._bb=echarts.init(a.node("chart_"+this.id)),this.on("destroy",()=>{this._bb.dispose()}));let t=this._bb;t.setOption({title:{text:e.title},tooltip:{trigger:"axis"},xAxis:{data:[1,2,3,4,5]},yAxis:{type:"value"},series:[{data:[120,300,400,220,40],type:"bar"},{data:[90,200,600,100,50],type:"bar"}]},!0),t.resize()}})}),define("elements/chart-line/designer",["../../designer/props","../../util/converter","../designer"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("../../designer/props"),l=e("../../util/converter"),s=e("../designer");t.default=s.default.extend({ctor(){this.set({view:"elements/chart-line/index"})}},{type:"chart-line",role:"chart-line",title:"a_",icon:"&#xe64b;",modifier:{width:1,height:1,rotate:1},scales:["x","y","width","height"],moved:[{key:"x",use:"x"},{key:"y",use:"y"}],json:{x:l.default._b_,y:l.default._b_,width:l.default._b_,height:l.default._b_,alpha:1,title:1,rotate:1,background:1},getProps:(e,t)=>({background:"",alpha:1,width:500,height:300,x:e,y:t,title:"",rotate:0,locked:!1}),props:[{tip:"U",type:a.default._a_,key:"x",read:l.default._b_,write:l.default._ba},{tip:"V",type:a.default._a_,key:"y",read:l.default._b_,write:l.default._ba},{tip:"L",type:a.default._a_,key:"width",min:0,read:l.default._b_,write:l.default._ba},{tip:"W",key:"height",type:a.default._a_,min:0,read:l.default._b_,write:l.default._ba},{tip:"X",type:a.default._a_,key:"rotate",min:-360,max:360},{type:a.default._ab},{tip:"M",key:"alpha",type:a.default._a_,step:.1,fixed:1,min:0,max:1},{tip:"Y",type:a.default._aa,key:"background",alpha:!0,clear:!0},{tip:"Z",key:"title",type:a.default._aj},{type:a.default._ab},{tip:"S",key:"locked",type:a.default._ac,refresh:!0,free:!0}]})}),define("elements/chart-line/index",["magix"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix");t.default=a.default.View.extend({tmpl:(e,t,i,a)=>{let l,s=[],{props:r,id:o}=e;return l="position:absolute;left:"+a(r.x)+"px;top:"+a(r.y)+"px;height:"+a(r.height)+"px;opacity:"+a(r.alpha)+";width:"+a(r.width)+"px;transform:rotate("+a(r.rotate)+"deg);",r.background&&(l+="background:"+a(r.background)+";"),s.push(t("div",{id:"chart_"+a(o),style:l})),t(i,0,s)},init(e){this.assign(e)},assign(e){return this.set(e),!0},render(){if(this.digest(),this.get("onlyMove"))return;let e=this.get("props");this._bb||(this._bb=echarts.init(a.node("chart_"+this.id)),this.on("destroy",()=>{this._bb.dispose()}));let t=this._bb;t.setOption({title:{text:e.title},tooltip:{trigger:"axis"},xAxis:{data:[1,2,3,4,5]},yAxis:{type:"value"},series:[{data:[120,300,400,220,40],type:"line"},{data:[90,200,600,100,50],type:"line"}]},!0),t.resize()}})}),define("elements/chart-meter/designer",["../../designer/props","../../util/converter","../designer"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("../../designer/props"),l=e("../../util/converter"),s=e("../designer");t.default=s.default.extend({ctor(){this.set({view:"elements/chart-meter/index"})}},{type:"chart-meter",role:"chart-meter",title:"aa",icon:"&#xeb94;",modifier:{width:1,height:1,rotate:1},scales:["x","y","width","height"],moved:[{key:"x",use:"x"},{key:"y",use:"y"}],json:{x:l.default._b_,y:l.default._b_,width:l.default._b_,height:l.default._b_,alpha:1,rotate:1,background:1},getProps:(e,t)=>({background:"",alpha:1,width:500,height:300,x:e,y:t,rotate:0,locked:!1}),props:[{tip:"U",type:a.default._a_,key:"x",read:l.default._b_,write:l.default._ba},{tip:"V",type:a.default._a_,key:"y",read:l.default._b_,write:l.default._ba},{tip:"L",type:a.default._a_,key:"width",min:0,read:l.default._b_,write:l.default._ba},{tip:"W",key:"height",type:a.default._a_,min:0,read:l.default._b_,write:l.default._ba},{tip:"X",type:a.default._a_,key:"rotate",min:-360,max:360},{type:a.default._ab},{tip:"M",key:"alpha",type:a.default._a_,step:.1,fixed:1,min:0,max:1},{tip:"Y",type:a.default._aa,key:"background",alpha:!0,clear:!0},{type:a.default._ab},{tip:"S",key:"locked",type:a.default._ac,refresh:!0,free:!0}]})}),define("elements/chart-meter/index",["magix"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix");t.default=a.default.View.extend({tmpl:(e,t,i,a)=>{let l,s=[],{props:r,id:o}=e;return l="position:absolute;left:"+a(r.x)+"px;top:"+a(r.y)+"px;height:"+a(r.height)+"px;opacity:"+a(r.alpha)+";width:"+a(r.width)+"px;transform:rotate("+a(r.rotate)+"deg);",r.background&&(l+="background:"+a(r.background)+";"),s.push(t("div",{id:"chart_"+a(o),style:l})),t(i,0,s)},init(e){this.assign(e)},assign(e){return this.set(e),!0},render(){if(this.digest(),this.get("onlyMove"))return;this.get("props");this._bb||(this._bb=echarts.init(a.node("chart_"+this.id)),this.on("destroy",()=>{this._bb.dispose()}));let e=this._bb;e.setOption({series:[{type:"gauge",detail:{formatter:"{value}%"},data:[{value:50,name:"\u5b8c\u6210\u7387"}]}]},!0),e.resize()}})}),define("elements/chart-pie/designer",["../../designer/props","../../util/converter","../designer"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("../../designer/props"),l=e("../../util/converter"),s=e("../designer");t.default=s.default.extend({ctor(){this.set({view:"elements/chart-pie/index"})}},{type:"chart-pie",role:"chart-pie",title:"ab",icon:"&#xe6d4;",modifier:{width:1,height:1,rotate:1},scales:["x","y","width","height"],moved:[{key:"x",use:"x"},{key:"y",use:"y"}],getProps:(e,t)=>({background:"",alpha:1,width:500,height:300,x:e,y:t,title:"",rotate:0,locked:!1}),props:[{tip:"U",type:a.default._a_,key:"x",read:l.default._b_,write:l.default._ba},{tip:"V",type:a.default._a_,key:"y",read:l.default._b_,write:l.default._ba},{tip:"L",type:a.default._a_,key:"width",min:0,read:l.default._b_,write:l.default._ba},{tip:"W",key:"height",type:a.default._a_,min:0,read:l.default._b_,write:l.default._ba},{tip:"X",type:a.default._a_,key:"rotate",min:-360,max:360},{type:a.default._ab},{tip:"M",key:"alpha",type:a.default._a_,step:.1,fixed:1,min:0,max:1},{tip:"Y",type:a.default._aa,key:"background",alpha:!0,clear:!0},{tip:"Z",key:"title",type:a.default._aj},{type:a.default._ab},{tip:"S",key:"locked",type:a.default._ac,refresh:!0,free:!0}]})}),define("elements/chart-pie/index",["magix"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix");t.default=a.default.View.extend({tmpl:(e,t,i,a)=>{let l,s=[],{props:r,id:o}=e;return l="position:absolute;left:"+a(r.x)+"px;top:"+a(r.y)+"px;height:"+a(r.height)+"px;opacity:"+a(r.alpha)+";width:"+a(r.width)+"px;transform:rotate("+a(r.rotate)+"deg);",r.background&&(l+="background:"+a(r.background)+";"),s.push(t("div",{id:"chart_"+a(o),style:l})),t(i,0,s)},init(e){this.assign(e)},assign(e){return this.set(e),!0},render(){if(this.digest(),this.get("onlyMove"))return;let e=this.get("props");this._bb||(this._bb=echarts.init(a.node("chart_"+this.id)),this.on("destroy",()=>{this._bb.dispose()}));let t=this._bb;t.setOption({title:{text:e.title,x:"center"},series:[{data:[{value:120,name:"pie1"},{vaue:300,name:"pie2"},{value:400,name:"pie3"},{value:220,name:"pie4"},{value:40,name:"pie5"}],type:"pie",name:"test"}]},!0),t.resize()}})}),define("elements/circle/designer",["../../designer/props","../../i18n/index","../../util/converter","../designer"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("../../designer/props"),l=e("../../i18n/index"),s=e("../../util/converter"),r=e("../designer");t.default=r.default.extend({ctor(){this.set({view:"elements/circle/index"})}},{type:"circle",role:"circle",title:"ac",icon:"&#xe654;",modifier:{width:1,height:1,rotate:1},scales:["x","y","width","height"],moved:[{key:"x",use:"x"},{key:"y",use:"y"}],json:{x:s.default._b_,y:s.default._b_,width:s.default._b_,height:s.default._b_,alpha:1,title:1,rotate:1,fillcolor:1,borderwidth:1,bordertype:1,bordercolor:1},getProps:(e,t)=>({fillcolor:"",alpha:1,width:150,height:150,x:e,y:t,rotate:0,borderwidth:1,bordertype:"solid",bordercolor:"#000000",locked:!1}),props:[{tip:"U",type:a.default._a_,key:"x",read:s.default._b_,write:s.default._ba},{tip:"V",type:a.default._a_,key:"y",read:s.default._b_,write:s.default._ba},{tip:"L",type:a.default._a_,key:"width",min:0,read:s.default._b_,write:s.default._ba},{tip:"W",key:"height",type:a.default._a_,min:0,read:s.default._b_,write:s.default._ba},{tip:"X",type:a.default._a_,key:"rotate",min:-360,max:360},{type:a.default._ab},{tip:"M",key:"alpha",type:a.default._a_,step:.1,fixed:1,min:0,max:1},{tip:"ad",key:"borderwidth",type:a.default._a_,min:0},{tip:"ae",key:"bordertype",type:a.default._ah,items:[{text:l.default("O"),value:"solid"},{text:l.default("P"),value:"dotted"},{text:l.default("Q"),value:"dashed"}]},{tip:"af",key:"bordercolor",type:a.default._aa},{tip:"ag",key:"fillcolor",clear:!0,alpha:!0,type:a.default._aa},{type:a.default._ab},{tip:"S",key:"locked",type:a.default._ac,refresh:!0,free:!0}]})}),define("elements/circle/index",["magix"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix");t.default=a.default.View.extend({tmpl:(e,t,i,a)=>{let l,s=[],{props:r}=e;return l="position:absolute;border-radius:50%;left:"+a(r.x)+"px;top:"+a(r.y)+"px;",r.borderwidth&&(l+="border:"+a(r.borderwidth)+"px "+a(r.bordertype)+" "+a(r.bordercolor)+";"),r.fillcolor&&(l+="background:"+a(r.fillcolor)+";"),l+="height:"+a(r.height)+"px;opacity:"+a(r.alpha)+";width:"+a(r.width)+"px;transform:rotate("+a(r.rotate)+"deg);",s.push(t("div",{style:l})),t(i,0,s)},init(e){this.assign(e)},assign(e){return this.set(e),!0},render(){this.digest()}})}),define("elements/image/designer",["../../designer/props","../../util/converter","../designer"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("../../designer/props"),l=e("../../util/converter"),s=e("../designer");t.default=s.default.extend({ctor(){this.set({view:"elements/image/index"})}},{type:"image",role:"image",title:"al",icon:"&#xe650;",modifier:{width:1,height:1,rotate:1},scales:["x","y","width","height"],moved:[{key:"x",use:"x"},{key:"y",use:"y"}],json:{x:l.default._b_,y:l.default._b_,width:l.default._b_,height:l.default._b_,alpha:1,image:1,rotate:1},getProps:(e,t)=>({height:100,alpha:1,x:e,y:t,rotate:0,width:200,image:"",locked:!1}),props:[{tip:"U",type:a.default._a_,key:"x",read:l.default._b_,write:l.default._ba},{tip:"V",type:a.default._a_,key:"y",read:l.default._b_,write:l.default._ba},{tip:"L",type:a.default._a_,key:"width",min:0,read:l.default._b_,write:l.default._ba},{tip:"W",key:"height",type:a.default._a_,min:0,read:l.default._b_,write:l.default._ba},{tip:"X",type:a.default._a_,key:"rotate",min:-360,max:360},{type:a.default._ab},{tip:"M",key:"alpha",type:a.default._a_,step:.1,fixed:1,min:0,max:1},{tip:"am",key:"image",refresh:!0,type:a.default._ag,write:(e,t,i)=>(e||(i.width=200,i.height=100),t.width=i.width,t.height=i.height,e)},{tip:"an",type:a.default._ai,key:"image",ifShow:e=>e.image},{type:a.default._ab},{tip:"S",key:"locked",type:a.default._ac,refresh:!0,free:!0}]})}),define("elements/image/index",["magix"],(e,t,i)=>{let a={style:"display:flex;align-items:center;justify-content:center;height:100%"};Object.defineProperty(t,"__esModule",{value:!0});const l=e("magix");t.default=l.default.View.extend({tmpl:(e,t,i,l)=>{let s,r,o,d=[],{props:n,i18n:p}=e;return s=[],n.image?(r=[t("img",{style:"width:100%;height:100%",src:l(n.image)},0,1)],s.push(...r)):(o=[t(0,0,p("ao"))],r=[t("div",a,o)],s.push(...r)),d.push(t("div",{style:"position:absolute;left:"+l(n.x)+"px;top:"+l(n.y)+"px;height:"+l(n.height)+"px;opacity:"+l(n.alpha)+";width:"+l(n.width)+"px;transform:rotate("+l(n.rotate)+"deg);"},s)),t(i,0,d)},init(e){this.assign(e)},assign(e){return this.set(e),!0},render(){this.digest()}})}),define("elements/line/designer",["../../designer/props","../../i18n/index","../../util/converter","../designer"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("../../designer/props"),l=e("../../i18n/index"),s=e("../../util/converter"),r=e("../designer");t.default=r.default.extend({ctor(){this.set({view:"elements/line/index"})}},{type:"line",role:"line",title:"ap",icon:"&#xe601;",modifier:{width:1,height:1,rotate:1},scales:["x","y","width","height"],moved:[{key:"x",use:"x"},{key:"y",use:"y"}],json:{x:s.default._b_,y:s.default._b_,width:s.default._b_,height:s.default._b_,alpha:1,title:1,rotate:1,linetype:1,color:1},getProps:(e,t)=>({height:1,alpha:1,x:e,y:t,rotate:0,width:200,linetype:"solid",color:"#000000",locked:!1}),props:[{tip:"U",type:a.default._a_,key:"x",read:s.default._b_,write:s.default._ba},{tip:"V",type:a.default._a_,key:"y",read:s.default._b_,write:s.default._ba},{tip:"aq",type:a.default._a_,key:"width",min:0,read:s.default._b_,write:s.default._ba},{tip:"X",type:a.default._a_,key:"rotate",min:-360,max:360},{type:a.default._ab},{tip:"M",key:"alpha",type:a.default._a_,step:.1,fixed:1,min:0,max:1},{tip:"W",key:"height",type:a.default._a_,min:0,max:100,read:s.default._b_,write:s.default._ba},{tip:"N",key:"linetype",type:a.default._ah,items:[{text:l.default("O"),value:"solid"},{text:l.default("P"),value:"dotted"},{text:l.default("Q"),value:"dashed"}]},{tip:"R",key:"color",type:a.default._aa},{type:a.default._ab},{tip:"S",key:"locked",type:a.default._ac,refresh:!0,free:!0}]})}),define("elements/line/index",["magix"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix");t.default=a.default.View.extend({tmpl:(e,t,i,a)=>{let l=[],{props:s}=e;return l.push(t("div",{style:"position:absolute;left:"+a(s.x)+"px;top:"+a(s.y)+"px;border-top:"+a(s.height)+"px "+a(s.linetype)+" "+a(s.color)+";opacity:"+a(s.alpha)+";width:"+a(s.width)+"px;transform:rotate("+a(s.rotate)+"deg);"})),t(i,0,l)},init(e){this.assign(e)},assign(e){return this.set(e),!0},render(){this.digest()}})}),define("elements/page/designer",["../../designer/props","../../i18n/index","../../designer/const"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("../../designer/props"),l=e("../../i18n/index"),s=e("../../designer/const");t.default={title:"ar",getProps:()=>({width:s.default._D,height:s.default._E,background:"#ffffff",backgroundImage:"",backgroundRepeat:"full",backgroundWidth:0,backgroundHeight:0,scaleType:"auto",hor:0,ver:0}),props:[{tip:"L",key:"width",type:a.default._a_,min:0},{tip:"W",key:"height",type:a.default._a_,min:0},{tip:"as",key:"scaleType",type:a.default._ah,items:[{text:l.default("at"),value:"auto"},{text:l.default("au"),value:"full"}]},{type:a.default._ab},{tip:"Y",key:"background",type:a.default._aa},{tip:"av",key:"backgroundImage",type:a.default._ag,refresh:!0,write:(e,t,i)=>(t.backgroundWidth=i.width,t.backgroundHeight=i.height,e)},{tip:"aw",key:"backgroundRepeat",type:a.default._ah,items:[{text:l.default("ax"),value:"full"},{text:l.default("ay"),value:"no-repeat"},{text:l.default("az"),value:"repeat-x"},{text:l.default("aA"),value:"repeat-y"},{text:l.default("aB"),value:"repeat"}],refresh:!0,ifShow:e=>e.backgroundImage},{tip:"aC",key:"backgroundWidth",type:a.default._a_,min:0,ifShow(e){let t=e.backgroundImage,i=e.backgroundRepeat;return t&&"full"!==i}},{tip:"aD",key:"backgroundHeight",type:a.default._a_,min:0,ifShow(e){let t=e.backgroundImage,i=e.backgroundRepeat;return t&&"full"!=i}},{tip:"aE",key:"hor",type:a.default._a_,ifShow:e=>"full"!=e.backgroundRepeat},{tip:"aF",key:"ver",type:a.default._a_,ifShow:e=>"full"!=e.backgroundRepeat}]}}),define("elements/rect/designer",["../../designer/props","../../i18n/index","../../util/converter","../designer"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("../../designer/props"),l=e("../../i18n/index"),s=e("../../util/converter"),r=e("../designer");t.default=r.default.extend({ctor(){this.set({view:"elements/rect/index"})}},{type:"rect",role:"rect",title:"aG",icon:"&#xe6c7;",modifier:{width:1,height:1,rotate:1},scales:["x","y","width","height"],moved:[{key:"x",use:"x"},{key:"y",use:"y"}],json:{x:s.default._b_,y:s.default._b_,width:s.default._b_,height:s.default._b_,alpha:1,rotate:1,fillcolor:1,borderwidth:1,bordertype:1,bordercolor:1,radius:1},getProps:(e,t)=>({fillcolor:"",height:100,alpha:1,x:e,y:t,rotate:0,width:200,borderwidth:1,bordertype:"solid",bordercolor:"#000000",radius:0,locked:!1}),props:[{tip:"U",type:a.default._a_,key:"x",read:s.default._b_,write:s.default._ba},{tip:"V",type:a.default._a_,key:"y",read:s.default._b_,write:s.default._ba},{tip:"L",type:a.default._a_,key:"width",min:0,read:s.default._b_,write:s.default._ba},{tip:"W",key:"height",type:a.default._a_,min:0,read:s.default._b_,write:s.default._ba},{tip:"X",type:a.default._a_,key:"rotate",min:-360,max:360},{type:a.default._ab},{tip:"M",key:"alpha",type:a.default._a_,step:.1,fixed:1,min:0,max:1},{tip:"ad",key:"borderwidth",type:a.default._a_,min:0},{tip:"ae",key:"bordertype",type:a.default._ah,items:[{text:l.default("O"),value:"solid"},{text:l.default("P"),value:"dotted"},{text:l.default("Q"),value:"dashed"}]},{tip:"af",key:"bordercolor",type:a.default._aa},{tip:"ag",key:"fillcolor",clear:!0,alpha:!0,type:a.default._aa},{tip:"aH",key:"radius",type:a.default._a_,min:0},{type:a.default._ab},{tip:"S",key:"locked",type:a.default._ac,refresh:!0,free:!0}]})}),define("elements/rect/index",["magix"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix");t.default=a.default.View.extend({tmpl:(e,t,i,a)=>{let l,s=[],{props:r}=e;return l="position:absolute;left:"+a(r.x)+"px;top:"+a(r.y)+"px;",r.borderwidth&&(l+="border:"+a(r.borderwidth)+"px "+a(r.bordertype)+" "+a(r.bordercolor)+";"),r.fillcolor&&(l+="background:"+a(r.fillcolor)+";"),l+="height:"+a(r.height)+"px;opacity:"+a(r.alpha)+";width:"+a(r.width)+"px;transform:rotate("+a(r.rotate)+"deg);",r.radius&&(l+="border-radius:"+a(r.radius)+"px;"),s.push(t("div",{style:l})),t(i,0,s)},init(e){this.assign(e)},assign(e){return this.set(e),!0},render(){this.digest()}})}),define("elements/repeat/designer",["../../designer/props","../../i18n/index","../../util/converter","../designer"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("../../designer/props"),l=e("../../i18n/index"),s=e("../../util/converter"),r=e("../designer");t.default=r.default.extend({ctor(){this.set({view:"elements/repeat/index"})}},{type:"repeat",role:"repeat",title:"aI",icon:"&#xe78f;",modifier:{width:1,height:1,rotate:1},scales:["x","y","width","height","imageWidth","imageHeight"],moved:[{key:"x",use:"x"},{key:"y",use:"y"}],json:{x:s.default._b_,y:s.default._b_,width:s.default._b_,height:s.default._b_,alpha:1,rotate:1,background:1,image:1,repeat:1,imageWidth:1,imageHeight:1,hor:1,ver:1},getProps:(e,t)=>({height:100,alpha:1,x:e,y:t,rotate:0,width:200,radius:0,image:"",repeat:"repeat",imageWidth:0,imageHeight:0,hor:0,ver:0,locked:!1}),props:[{tip:"U",type:a.default._a_,key:"x",read:s.default._b_,write:s.default._ba},{tip:"V",type:a.default._a_,key:"y",read:s.default._b_,write:s.default._ba},{tip:"L",type:a.default._a_,key:"width",min:0,read:s.default._b_,write:s.default._ba},{tip:"W",key:"height",type:a.default._a_,min:0,read:s.default._b_,write:s.default._ba},{tip:"X",type:a.default._a_,key:"rotate",min:-360,max:360},{type:a.default._ab},{tip:"M",key:"alpha",type:a.default._a_,step:.1,fixed:1,min:0,max:1},{tip:"aH",key:"radius",type:a.default._a_,min:0},{tip:"am",key:"image",type:a.default._ag,refresh:!0,write:(e,t,i)=>(t.imageWidth=s.default._ba(i.width),t.imageHeight=s.default._ba(i.height),e)},{tip:"aC",key:"imageWidth",type:a.default._a_,min:0,read:s.default._b_,write:s.default._ba,ifShow:e=>e.image},{tip:"aD",key:"imageHeight",type:a.default._a_,min:0,read:s.default._b_,write:s.default._ba,ifShow:e=>e.image},{tip:"aE",key:"hor",type:a.default._a_,ifShow:e=>e.image},{tip:"aF",key:"ver",type:a.default._a_,ifShow:e=>e.image},{tip:"aw",key:"repeat",type:a.default._ah,ifShow:e=>e.image,items:[{text:l.default("aB"),value:"repeat"},{text:l.default("az"),value:"repeat-x"},{text:l.default("aA"),value:"repeat-y"}]},{type:a.default._ab},{tip:"S",key:"locked",type:a.default._ac,refresh:!0,free:!0}]})}),define("elements/repeat/index",["magix"],(e,t,i)=>{let a={style:"display:flex;align-items:center;justify-content:center;height:100%"};Object.defineProperty(t,"__esModule",{value:!0});const l=e("magix");t.default=l.default.View.extend({tmpl:(e,t,i,l)=>{let s,r,o,d,n=[],{props:p,i18n:c}=e;return r=[],p.image||(d=[t(0,0,c("aJ"))],o=[t("div",a,d)],r.push(...o)),s="position:absolute;left:"+l(p.x)+"px;top:"+l(p.y)+"px;height:"+l(p.height)+"px;opacity:"+l(p.alpha)+";width:"+l(p.width)+"px;transform:rotate("+l(p.rotate)+"deg);",p.radius&&(s+="border-radius:"+l(p.radius)+"px;"),p.image&&(s+="background-image:url("+l(p.image)+");background-size:"+l(p.imageWidth)+"px "+l(p.imageHeight)+"px;background-repeat:"+l(p.repeat)+";background-position:"+l(p.hor)+"% "+l(p.ver)+"%"),n.push(t("div",{style:s},r)),t(i,0,n)},init(e){this.assign(e)},assign(e){return this.set(e),!0},render(){this.digest()}})}),define("elements/text/designer",["../designer","../../designer/props","../../util/converter"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("../designer"),l=e("../../designer/props"),s=e("../../util/converter");t.default=a.default.extend({ctor(){this.set({view:"elements/text/index"})}},{type:"text",role:"text",title:"aK",icon:"&#xe6bc;",modifier:{width:1,height:1,rotate:1},scales:["x","y","width","height","fontsize","ls"],moved:[{key:"x",use:"x"},{key:"y",use:"y"}],json:{x:s.default._b_,y:s.default._b_,width:s.default._b_,height:s.default._b_,alpha:1,text:1,rotate:1,ls:1,background:1,forecolor:1,fontsize:1,style:1,align:1},getProps:(e,t)=>({background:"",height:25,alpha:1,text:"",ls:0,x:e,y:t,rotate:0,width:200,forecolor:"#000000",fontsize:14,locked:!1,style:{bold:!1,underline:!1,italic:!1},align:{h:"center",v:"center"}}),props:[{tip:"U",type:l.default._a_,key:"x",read:s.default._b_,write:s.default._ba},{tip:"V",type:l.default._a_,key:"y",read:s.default._b_,write:s.default._ba},{tip:"L",type:l.default._a_,key:"width",min:0,read:s.default._b_,write:s.default._ba},{tip:"W",key:"height",type:l.default._a_,min:0,read:s.default._b_,write:s.default._ba},{tip:"X",type:l.default._a_,key:"rotate",min:-360,max:360},{type:l.default._ab},{tip:"aL",key:"fontsize",type:l.default._a_,min:0,read:s.default._b_,write:s.default._ba},{tip:"M",key:"alpha",type:l.default._a_,step:.1,fixed:1,min:0,max:1},{tip:"aM",key:"ls",type:l.default._a_,min:0,read:s.default._b_,write:s.default._ba},{tip:"Y",key:"background",clear:!0,alpha:!0,type:l.default._aa},{tip:"aN",key:"forecolor",type:l.default._aa},{tip:"aO",key:"style",type:l.default._ad},{tip:"aP",key:"align",type:l.default._ae},{tip:"aQ",key:"text",type:l.default._af,dockTop:!0},{type:l.default._ab},{tip:"S",key:"locked",type:l.default._ac,refresh:!0,free:!0}]})}),define("elements/text/index",["magix"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix");t.default=a.default.View.extend({tmpl:(e,t,i,a)=>{let l,s,r,o=[],{props:d,i18n:n}=e;return r="",d.text?r+=" "+d.text+" ":r+=" "+n("aR")+" ",s=[t(0,0,r)],l="position:absolute;left:"+a(d.x)+"px;top:"+a(d.y)+"px;display:flex;color:"+a(d.forecolor)+";",d.background&&(l+="background:"+a(d.background)+";"),l+="font-size:"+a(d.fontsize)+"px;height:"+a(d.height)+"px;letter-spacing:"+a(d.ls)+"px;opacity:"+a(d.alpha)+";",d.style.bold&&(l+="font-weight:bold;"),d.style.italic&&(l+="font-style:italic;"),d.style.underline&&(l+="text-decoration:underline;"),l+="align-items:"+a(d.align.v)+";justify-content:"+a(d.align.h)+";overflow:hidden;width:"+a(d.width)+"px;transform:rotate("+a(d.rotate)+"deg);",o.push(t("div",{style:l},s)),t(i,0,o)},init(e){this.assign(e)},assign(e){return this.set(e),!0},render(){this.digest()}})}),define("designer/axis",["magix","../gallery/mx-dragdrop/index","../gallery/mx-pointer/cursor","./history"],(e,t,i)=>{let a,l={class:"pU"},s={class:"pS"};Object.defineProperty(t,"__esModule",{value:!0});const r=e("magix"),o=e("../gallery/mx-dragdrop/index"),d=e("../gallery/mx-pointer/cursor"),n=e("./history");r.default.applyStyle("pa",".pG{height:20px;border-bottom:1px solid #ccc;overflow:hidden;width:100%;background:#fff;z-index:200;position:relative}.pH{top:0;width:1px}.pH,.pI{position:absolute;background:#fa742b;z-index:200;display:none;pointer-events:none}.pI{left:0;height:1px}.pJ{float:left;overflow:hidden;z-index:200;position:relative}.pK,.pJ{width:20px;border-right:1px solid #ccc;background:#fff}.pK{position:absolute;left:0;top:0;height:20px;border-bottom:1px solid #ccc;z-index:201}.pL{left:5px;top:22px}.pL,.pM{cursor:default;position:absolute;font-size:10px}.pM{top:2px;left:24px}.pN,.pO{position:relative;z-index:100}.pN{top:20px}.pO{left:20px}.pP{width:4px;border-left:1px solid #fa742b}.pP,.pQ{position:absolute;pointer-events:none}.pQ{height:1px;background:#fa742b}.pR{position:absolute;left:-15px;top:4px;font-size:10px;color:#666;cursor:pointer;pointer-events:all}.pS{top:2px;cursor:default}.pS,.pT{position:absolute;left:4px;font-size:10px;color:#666}.pT{top:-15px;cursor:pointer;pointer-events:all}.pU{position:absolute;left:4px;top:2px;font-size:10px;color:#666;cursor:default}.pV{width:25px;top:-1px;height:3px;left:30px;cursor:ns-resize}.pW,.pV{position:absolute;overflow:hidden;background:#fa742b;pointer-events:all}.pW{width:3px;left:-2px;height:25px;top:20px;cursor:ew-resize}");let p={.5:{space:200,step:10},1:{space:100,step:10},1.5:{space:80,step:10},2:{space:60,step:10},2.5:{space:48,step:8},3:{space:40,step:8},3.5:{space:32,step:8},4:{space:24,step:8},4.5:{space:16,step:8},5:{space:16,step:8}};t.default=r.default.View.extend({tmpl:(e,t,i,r,o,d,n,p)=>{let c,u,h,f,g,_,x,b,m,y,w=[],{sTop:v,id:k,yHelpers:A,yStart:S,scale:M,vWidth:z,i18n:j,sLeft:E,xHelpers:P,xStart:T,vHeight:X,width:I,step:Y,space:O,hbar:C,barColor:L,bar:N,xEnd:F,height:V,yEnd:R}=e;c=[];for(let e=0,a=A,s=a.length;e<s;e++){let s=a[e];y=Math.abs(S)+s.mm*M+20,f=[t(0,0,"\ue600")],h=[t("i",{class:"pw pT",title:r(j("_")),"mx-click":i+"\x1e_w({type:'y',id:'"+p(s.id)+"'})"},f)],f=[t(0,0,s.mm)],h.push(t("span",l,f),t("span",{class:"pV","mx-mousedown":i+"\x1e_A({type:'y',id:'"+p(s.id)+"',c:"+r(y)+"})",title:r(j("a"))})),u=[t("div",{class:"pQ",style:"width:"+r(z)+"px;top:"+r(y)+"px;"},h)],c.push(...u)}w.push(t("div",{class:"pO",style:"top:-"+r(v)+"px",id:r(k)+"_y_help","mx-contextmenu":i+"\x1e_B()"},c)),c=[];for(let e=0,a=P,l=a.length;e<l;e++){let l=a[e];y=Math.abs(T)+l.mm*M,f=[t(0,0,"\ue600")],h=[t("i",{class:"pw pR",title:r(j("_")),"mx-click":i+"\x1e_w({type:'x',id:'"+p(l.id)+"'})"},f)],f=[t(0,0,l.mm)],h.push(t("span",s,f),t("span",{class:"pW","mx-mousedown":i+"\x1e_A({type:'x',id:'"+p(l.id)+"',c:"+r(y)+"})",title:r(j("a"))})),u=[t("div",{class:"pP",style:"height:"+r(X)+"px;left:"+r(y)+"px;"},h)],c.push(...u)}w.push(t("div",{class:"pN",style:"left:-"+r(E)+"px",id:r(k)+"_x_help","mx-contextmenu":i+"\x1e_B()"},c)),f=[];for(let e=0;e<T;e+=Y)g=[],e&&(_=[],(m=e/M)%O==0?(x=[t("rect",{width:"1",height:r(C),x:r(T-e),y:r(20-C-1),style:"fill:"+r(L)+";"},0,1)],b=[t(0,0,-m)],x.push(t("text",{x:r(T-e+2),y:"14",style:"font-size:10px;fill:#999;"},b)),_.push(...x)):(x=[t("rect",{width:"1",height:r(N),x:r(T-e),y:r(20-N-1),style:"fill:"+r(L)+";"},0,1)],_.push(...x)),g.push(..._)),f.push(...g);for(let e=0;e<F;e+=Y)g=[],(m=e/M)%O==0?(_=[t("rect",{width:"1",height:r(C),x:r(T+e),y:r(20-C-1),style:"fill:"+r(L)+";"},0,1)],x=[t(0,0,m)],_.push(t("text",{x:r(T+e+2),y:"14",style:"font-size:10px;fill:#999;"},x)),g.push(..._)):(_=[t("rect",{width:"1",height:r(N),x:r(T+e),y:r(20-N-1),style:"fill:"+r(L)+";"},0,1)],g.push(..._)),f.push(...g);h=[t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 "+r(I)+" 19",style:"cursor:default;"},f)],u=[t("div",{style:"width:"+r(I)+"px;height:100%"},h)],c=[t("div",{class:"pG",id:r(k)+"_x"},u)],h=[t(0,0,"-")],u=[t("span",{class:"pL",id:r(k)+"_x_tip"},h)],c.push(t("div",{class:"pH",id:r(k)+"_x_line",style:"height:"+r(X+20)+"px"},u)),w.push(t("div",{"mx-mousemove":i+"\x1e_p()","mx-mouseout":i+"\x1e_q()","mx-click":i+"\x1e_u()"},c)),f=[];for(let e=0;e<S;e+=Y)g=[],e&&(_=[],(m=e/M)%O==0?(x=[t("rect",{width:r(C),height:"1",x:r(20-C),y:r(S-e),style:"fill:"+r(L)+";"},0,1)],b=[t(0,0,-m)],x.push(t("text",{x:"14",y:r(S-e+2),style:"font-size:10px;fill:#999;",transform:"rotate(-90,13,"+r(S-e)+")"},b)),_.push(...x)):(x=[t("rect",{width:r(N),height:"1",x:r(20-N),y:r(S-e),style:"fill:"+r(L)+";"},0,1)],_.push(...x)),g.push(..._)),f.push(...g);for(let e=0;e<R;e+=Y)g=[],(m=e/M)%O==0?(_=[t("rect",{width:r(C),height:"1",x:r(20-C),y:r(S+e),style:"fill:"+r(L)+";"},0,1)],x=[t(0,0,m)],_.push(t("text",{x:"14",y:r(S+e),style:"font-size:10px;fill:#999;;",transform:"rotate(-90,13,"+r(S+e-2)+")"},x)),g.push(..._)):(_=[t("rect",{width:r(N),height:"1",x:r(20-N),y:r(S+e),style:"fill:"+r(L)+";"},0,1)],g.push(..._)),f.push(...g);return h=[t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 19 "+r(V),style:"cursor:default"},f)],u=[t("div",{style:"height:"+r(V)+"px;"},h)],c=[t("div",{class:"pJ",style:"height:"+r(X)+"px;",id:r(k)+"_y"},u)],h=[t(0,0,"-")],u=[t("span",{class:"pM",id:r(k)+"_y_tip"},h)],c.push(t("div",{class:"pI",id:r(k)+"_y_line",style:"width:"+r(z+20)+"px"},u)),w.push(t("div",{"mx-mousemove":i+"\x1e_r()","mx-mouseout":i+"\x1e_s()","mx-click":i+"\x1e_v()"},c)),a?w.push(a):w.push(a=t("div",{mxs:"p_:_",class:"pK"})),t(i,0,w)},mixins:[o.default],init(e){let t=r.node(e.scroll);t.addEventListener("scroll",()=>{this.__()},{passive:!0}),this._a=t,this.set({bar:4,hbar:12,barColor:"#aaa"});let i=this.render.bind(this);r.State.on("_",i),r.State.on("a",i),r.State.on("b",i)},_m(){if(this._b){let e=this._a,t=r.State.get("_c"),i=r.State.get("_d"),{width:a,height:l}=i,s=Math.max(a*t,window.innerWidth)+500,o=Math.max(l*t,window.innerHeight)+300,d=0,n=0,c=20,u=0,h=0,f=10,g=10,_=r.node("stage_canvas"),x=r.node("stage_outer"),b=_.getBoundingClientRect(),m=x.getBoundingClientRect();n=s-(d=Math.round(b.left-m.left)+c),h=o-(u=Math.round(b.top-m.top)),f=e.offsetHeight,g=e.offsetWidth;let y=p[t];this.digest({sTop:e.scrollTop,sLeft:e.scrollLeft,width:s,scale:t,space:y.space,step:y.step,height:o,xStart:d,xEnd:n,yStart:u,vHeight:f,vWidth:g,yEnd:h}),this._e=r.node(this.id+"_x"),this._f=r.node(this.id+"_y"),this._g=r.node(this.id+"_x_line"),this._h=r.node(this.id+"_y_line"),this._i=r.node(this.id+"_x_tip"),this._j=r.node(this.id+"_y_tip"),this._k=r.node(this.id+"_x_help"),this._l=r.node(this.id+"_y_help")}},__(){let e=this._e,t=this._f,i=this._l,a=this._k,l=this._a,s=l.scrollTop,r=l.scrollLeft;e&&(e.scrollLeft=r),t&&(t.scrollTop=s),a&&(a.style.left=-r+"px"),i&&(i.style.top=-s+"px"),this.set({sLeft:r,sTop:s})},render(){this.set({xHelpers:r.State.get("_n"),yHelpers:r.State.get("_o")});let e=()=>{r.node("stage_canvas")?(this._b=1,this._m()):setTimeout(e,30)};setTimeout(e,0)},"_p<mousemove>"(e){let t=this._e,i=e.pageX,a=this.get("xStart"),l=this._g.style;l.display="block",l.left=i+"px";let s=i-a+t.scrollLeft,r=this.get("scale");this._i.innerHTML=(s/r).toFixed(0)},"_q<mouseout>"(e){r.default.inside(e.relatedTarget,e.eventTarget)||(this._g.style.display="none")},"_r<mousemove>"(e){let t=this.root.getBoundingClientRect(),i=e.pageY-t.top,a=this.get("yStart"),l=this._f,s=this._h.style;s.display="block",s.top=i+"px";let r=i-a-20+l.scrollTop,o=this.get("scale");this._j.innerHTML=(r/o).toFixed(0)},"_s<mouseout>"(e){r.default.inside(e.relatedTarget,e.eventTarget)||(this._h.style.display="none")},"_u<click>"(e){let t=(e.pageX-this.get("xStart")+this._e.scrollLeft)/this.get("scale")|0,i=this.get("xHelpers");i.push({mm:t,id:r.default.guid("x_")}),this.digest({xHelpers:i}),n.default._t()},"_v<click>"(e){let t=this.root.getBoundingClientRect(),i=(e.pageY-t.top-this.get("yStart")-20+this._f.scrollTop)/this.get("scale")|0,a=this.get("yHelpers");a.push({mm:i,id:r.default.guid("x_")}),this.digest({yHelpers:a}),n.default._t()},"_w<click>"(e){let{type:t,id:i}=e.params,a=t+"Helpers",l=this.get(a);for(let e=l.length;e--;){if(l[e].id==i){l.splice(e,1);break}}this.digest({[a]:l}),n.default._t()},"_A<mousedown>"(e){if(e.target!=e.eventTarget)return;let t,{type:i,id:a,c:l}=e.params,s=i+"Helpers",r=this.get(s);for(let e of r)if(e.id==a){t=e;break}if(t){let a=this.get(i+"Start"),o=0;this._x(e,n=>{let p;o||(o=1,d.default._y(e.eventTarget)),p="x"==i?n.pageX-e.pageX+l:n.pageY-e.pageY+l-20,t.mm=(p-a)/this.get("scale")|0,this.digest({[s]:r})},()=>{o&&(d.default._z(),n.default._t())})}},"_B<contextmenu>"(e){e.preventDefault()},"$win<resize>"(){setTimeout(()=>{this._m()},0)}})}),define("designer/const",[],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={_C:50,_c:1,_D:1280,_E:800}}),define("designer/content",["magix"],(e,t,i)=>{let a={class:"po"},l={class:"pp",style:"word-break:break-all;"};Object.defineProperty(t,"__esModule",{value:!0});const s=e("magix");s.default.applyStyle("pb",".pX{width:100%;height:500px}"),t.default=s.default.View.extend({tmpl:(e,t,i,s)=>{let r,o,d=[],{i18n:n,body:p}=e;return o=[t(0,0,n("b"))],r=[t("h5",0,o)],d.push(t("div",a,r)),r=[t("textarea",{class:"pu pX",value:s(p)})],d.push(t("div",l,r)),t(i,0,d)},render(){let e=s.State.get("_F"),t=s.State.get("_d"),i=[];for(let t of e){let e,a={type:t.type,props:{}},l=t.ctrl.json;if(l)for(let i in t.props)1===(e=l[i])?a.props[i]=t.props[i]:e&&(a.props[i]=e(t.props[i]));else a.props=t.props;i.push(a)}let a={page:t,elements:i};this.digest({body:JSON.stringify(a,null,4)})}})}),define("designer/contextmenu",["magix","../i18n/index"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix"),l=e("../i18n/index");let s={spliter:!0},r={id:0,text:"c",short:" (Ctrl+A)"},o={id:1,text:"d",short:" (Ctrl+C)"},d={id:14,text:"e",short:" (Ctrl+X)"},n={id:2,text:"f",short:" (Ctrl+V)"},p={id:5,text:"g"},c={id:6,text:"h"},u={id:3,text:"i"},h={id:4,text:"j"},f={id:7,text:"k",short:" (Delete)"},g={},_=e=>t=>{e["@{menu@u.id}"]||(e["@{menu@u.id}"]=a.default.guid("_m"));let i=t+e["@{menu@u.id}"];if(!g[i]){let t=[];for(let i of e)i.spliter?t.push(i):t.push({id:i.id,text:l.default(i.text)+(i.short||"")});g[i]=t}return g[i]};t.default={allId:r.id,pasteId:n.id,topId:u.id,upId:p.id,bottomId:h.id,downId:c.id,cutId:d.id,copyId:o.id,deleteId:f.id,singleElement:_([o,d,f,s,p,u,s,c,h]),multipleElement:_([o,d,f]),stage:_([r,n])}}),define("designer/header",["magix","../elements/index","../gallery/mx-dragdrop/index","../gallery/mx-pointer/select","../gallery/mx-pointer/cursor","../gallery/mx-dialog/index"],(e,t,i)=>{let a,l,s,r,o,d,n,p,c,u,h={class:"pE pd"},f={class:"pE pd pC pj"},g={class:"pY pa_ pg"},_={class:"pw pab"},x={class:"pac"},b={class:"paa"};Object.defineProperty(t,"__esModule",{value:!0});const m=e("magix"),y=e("../elements/index"),w=e("../gallery/mx-dragdrop/index"),v=e("../gallery/mx-pointer/select"),k=e("../gallery/mx-pointer/cursor"),A=e("../gallery/mx-dialog/index");m.default.applyStyle("pc",".pY,.pZ{width:60px;height:40px;display:grid;grid-template-rows:20px 20px;justify-items:center;align-items:center;cursor:pointer;margin:0 2px}.pa_{grid-template-columns:50px 10px}.pZ{float:left;border-radius:2px}.pZ:hover{background:#bd361b}.paa{display:none;position:absolute;cursor:default;top:100%;left:0;width:264px;padding:4px}.paa,.pY:hover{background:#e64e30}.pY:hover .paa{display:block}.pab{grid-column:1/2;grid-row:1/2;align-self:flex-end}.pac{font-size:12px;font-weight:400;line-height:12px;grid-column:1/2;grid-row:2/3}.pad{font-size:10px;margin-left:-10px;grid-row:1/3;grid-column:2/3}.pae{height:30px;width:1px;background:-webkit-gradient(linear,left top,left bottom,from(hsla(0,0%,100%,.27)),color-stop(.3,#fff),color-stop(.7,#fff),to(hsla(0,0%,100%,.27)));margin:2px 12px;float:left}");let S=["requestFullscreen","webkitRequestFullScreen","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen"];t.default=m.default.View.extend({tmpl:(e,t,i,m,y,w,v)=>{let k,A,S,M,z,j,E,P,T,X=[],{i18n:I,elements:Y}=e;a?k=[a]:(A=[t(0,0,"\ue679")],k=[a=t("i",{mxs:"pb:_",class:"pw pa"},A)]),k.push(t(0,0,I("l")+"\u2122")),X.push(t("div",h,k)),k=[];for(let e=0,a=Y,r=a.length;e<r;e++){let r=a[e];if(A=[],r.spliter)S=l?[l]:[l=t("div",{mxs:"pb:a",class:"pae"})],A.push(...S);else{if(S=[],r.subs){j=[t(0,1,r.icon)],z=[t("i",_,j)],j=[t(0,0,I(r.title))],z.push(t("b",x,j)),s?z.push(s):(j=[t(0,0,"\ue73a")],z.push(s=t("i",{mxs:"pb:b",class:"pad pw"},j))),j=[];for(let e=0,a=r.subs,l=a.length;e<l;e++){let l=a[e];T=[t(0,1,l.icon)],P=[t("i",_,T)],T=[t(0,0,I(l.title))],P.push(t("b",x,T)),E=[t("div",{class:"pZ","mx-mousedown":i+"\x1e_M({ctrl:'"+v(w,l)+"',hide:true})"},P)],j.push(...E)}z.push(t("div",b,j)),M=[t("div",g,z)],S.push(...M)}else j=[t(0,1,r.icon)],z=[t("i",_,j)],j=[t(0,0,I(r.title))],z.push(t("b",x,j)),M=[t("div",{class:"pY pg","mx-mousedown":i+"\x1e_M({ctrl:'"+v(w,r)+"'})"},z)],S.push(...M);A.push(...S)}k.push(...A)}return X.push(t("div",f,k)),r?X.push(r):(A=[t(0,0,"\u8054\u7cfbQQ:84685009")],k=[t("div",{style:"font-size:14px;margin-right:20px"},A)],o?A=[o]:(S=[t(0,0,"\ue64a")],A=[o=t("i",{class:"pw"},S)]),d?A.push(d):(S=[t(0,0,"\u9884\u89c8")],A.push(d=t("b",{class:"pac"},S))),k.push(t("div",{class:"pY","mx-click":i+"\x1e_N()"},A)),n?A=[n]:(S=[t(0,0,"\ue6b0")],A=[n=t("i",{class:"pw"},S)]),p?A.push(p):(S=[t(0,0,"\u4fdd\u5b58")],A.push(p=t("b",{class:"pac"},S))),k.push(t("div",{class:"pY","mx-click":i+"\x1e_t()"},A)),c?A=[c]:(S=[t(0,0,"\ue764")],A=[c=t("i",{class:"pw"},S)]),u?A.push(u):(S=[t(0,0,"\u5c55\u793a")],A.push(u=t("b",{class:"pac"},S))),k.push(t("div",{class:"pY","mx-click":i+"\x1e_O()"},A)),X.push(r=t("div",{mxs:"pb:c",class:"pE pe pD pj"},k))),t(i,0,X)},mixins:[w.default,A.default],render(){this.digest({elements:y.default._G()})},"_M<mousedown>"(e){let{ctrl:t,hide:i}=e.params,a=e.eventTarget.parentNode,l=!1,s=null;m.State.set({_H:t});let r=t.getProps(0,0),{width:o,height:d}=r,n=m.State.get("_c");o*=n,d*=n,v.default._I(),k.default._J("move"),this._x(e,e=>{l||i&&(a.style.display="none"),m.State.fire("c",{width:o,height:d,node:w.default._K(e.clientX,e.clientY),pageX:e.pageX-o/2,pageY:e.pageY-d/2}),l=!0},e=>{i&&(a.style.display=""),v.default._z(),k.default._L(),l?e&&(s=w.default._K(e.clientX,e.clientY),m.State.fire("e",{node:s,pageX:e.pageX-o/2,pageY:e.pageY-d/2})):m.State.fire("d",{pageX:50*Math.random()|0,pageY:50*Math.random()|0})})},"_N<click>"(){let e=m.node("stage_outer");for(let t of S)if(e[t]){e[t]();break}},"_t<click>"(){this.mxDialog("designer/content",{width:800})},"_O<click>"(){window.open("./display.html")},"$doc<webkitfullscreenchange,mozfullscreenchange,fullscreenchange>"(e){let t=document,i=t.fullscreenElement||t.webkitCurrentFullScreenElement||t.mozFullScreenElement||null;m.State.fire("f",{fullscreen:!0,full:!!i})}})}),define("designer/history",["magix","./const"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix"),l=e("./const");let s=[],r=[],o=null,d=-1,n="",p=null,c=()=>JSON.stringify({page:a.State.get("_d"),scale:a.State.get("_c"),elements:a.State.get("_F"),select:a.State.get("_P"),xLines:a.State.get("_n"),yLines:a.State.get("_o")}),u=e=>{let t=JSON.parse(e),i=a.State.get("_c"),l=t.scale||i;a.State.fire("g",{json:t}),a.State.fire("_",{scale:i!==l})};t.default={_Q(){p||(p=c())},_R:()=>({canRedo:r.length,canUndo:s.length}),_S(){s.length=0,r.length=0},_T(){if(s.length>0){let e=s.pop();r.push(e);let t=s[s.length-1]||p;u(t)}},_U(){let e=r.pop();e&&(s.push(e),u(e))},_t(e="_save",t=0){let i=c();e!=n&&(o&&(s.push(o),o=null),n=e),r.length=0;let u=e=>{s.push(e),s.length>l.default._C&&(p=s.shift()),a.State.fire("h")};t?(o=i,clearTimeout(d),d=setTimeout(()=>{u(o),o=null},t)):u(i)}}}),define("designer/index",["magix","../elements/index","../gallery/mx-dialog/index","./const","./history","../panels/index"],(e,t,i)=>{let a,l,s,r;Object.defineProperty(t,"__esModule",{value:!0});const o=e("magix"),d=e("../elements/index"),n=e("../gallery/mx-dialog/index"),p=e("./const"),c=e("./history"),u=e("../panels/index");let h=d.default._V();o.default.applyStyle("pd",".paf{background:#fa742b;height:40px;line-height:40px;font-size:16px;padding:0 10px;color:#fff;z-index:202}.paf,.pag{position:relative}.pag{padding:0 26px;background:#fafafa;color:#333;height:26px;z-index:201;border-bottom:1px solid #eee}.pah{width:calc(100% - 20px);overflow:scroll;height:calc(100% - 85px);background-color:#edeef3;transition:all .3s;margin-left:20px}.pai{box-shadow:inset 1px 1px 6px 2px #dadada}");t.default=o.default.View.extend({tmpl:(e,t,i)=>{let o=[];return a?o.push(a):o.push(a=t("div",{mxs:"pc:_","mx-view":"designer/header",class:"paf"})),l?o.push(l):o.push(l=t("div",{mxs:"pc:a","mx-view":"designer/toolbar",class:"pag pj"})),s?o.push(s):o.push(s=t("div",{mxs:"pc:b","mx-view":"designer/axis?scroll=stage",class:"pj pg"})),r?o.push(r):o.push(r=t("div",{mxs:"pc:c","mx-view":"designer/stage",id:"stage",class:"pah pk pai"})),t(i,0,o)},mixins:[n.default],init(){o.State.on("g",e=>{(e=>{let t=o.State.get("_d"),i=o.State.get("_F"),a=o.State.get("_P"),l=o.State.get("_n"),s=o.State.get("_o"),{elements:r,map:n}=d.default._W(e.elements);i.length=0,i.push(...r),l.length=0,e.xLines&&l.push(...e.xLines),s.length=0,e.yLines&&s.push(...e.yLines);let p={};if(a.length=0,e.select)for(let t of e.select){let e=n[t.id];e&&(p[e.id]=1,a.push(e))}Object.assign(t,e.page),o.State.set({_c:e.scale||1,_X:p})})(e.json)}),o.State.set({_Y:h,_d:h.getProps(),_c:p.default._c,_F:[],_P:[],_X:{},_n:[],_o:[]}),c.default._Q()},render(){this.digest(),u.default._Z()}})}),define("designer/keys",[],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={UP:38,DOWN:40,LEFT:37,RIGHT:39,DELETE:8,TAB:9,C:67,V:86,A:65,N:78,X:88,Z:90,Y:89}}),define("designer/props",[],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={_a_:2,_aa:4,_ab:8,_ac:16,_ad:32,_ae:64,_af:128,_ag:256,_ah:512,_ai:1024,_aj:2048}}),define("designer/service",["magix"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix");let l=a.default.Service.extend((e,t)=>{let i=e.get("method")||"GET";fetch(e.get("url"),{method:i,credentials:"include"}).then(e=>{if(e.ok)return e.json();throw new Error("Network response error")}).then(i=>{e.set("data",i.data),t()}).catch(e=>{t({msg:e.message})})});l.add([{name:"_ak",url:a.default.config("getImageUrl"),cache:18e5}]),t.default={ctor(){let e=this;e._al={};let t=()=>{delete e._am;for(let t in e._al){e._al[t].destroy()}};e.on("rendercall",t),e.on("destroy",t)},request(e){e=e||a.default.guid("r");let t=this._al[e];return t&&t.destroy(),t=new l,this._al[e]=t,t},fetch(e,t){let i=JSON.stringify(e);this.request(i).all(e,t)},save(e,t){let i=this,a=JSON.stringify(e);i.lock(a,()=>{i.request(a+"_request").save(e,t)})},lock(e,t){this._am||(this._am={});let i=this._am;i[e]||(i[e]=t,t())},unlock(e){let t=this._am;t&&delete t[e]}}}),define("designer/stage-clipboard",["magix","./stage-elements","./stage-select"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix"),l=e("./stage-elements"),s=e("./stage-select");let r=e=>{if(Array.isArray(e)){let t=[];for(let i of e)t.push(r(i));e=t}else if("Object"==a.default.type(e)){let t={};for(let i in e)t[i]=r(e[i]);e=t}return e};t.default={_ao(){return(this._an||[]).length},_ap(){return this._an||[]},_aq(){let e=[],t=a.State.get("_P");for(let i of t)e.push(i);this._an=e},_as(){let e=a.State.get("_P");1==e.length&&e[0].props.locked||(this._aq(),this._ar=!0)},_av(e){let t=this,i=t._an,o=a.State.get("_F"),d=!1;if(i){d=!0;let n=[],p=0,c=0,u=0,h=e=>{for(let t of o)if(t.props.x==e.x&&t.props.y==e.y)return 1;return 0},f=({props:t,ctrl:i})=>{if(0===p)if(e)c=e.x-t.x,u=e.y-t.y;else{let e={x:t.x,y:t.y};for(;h(e);)e.x+=20,e.y+=20;for(e.x+t.width<0&&(e.x=-t.width/2),e.y+t.height<0&&(e.y=-t.height/2);h(e);)e.x-=4,e.y-=4;c=e.x-t.x,u=e.y-t.y}for(let e of i.moved)t[e.key]=t[e.key]+("x"==e.use?c:u);t.locked=!1};for(let e of i){let i=r(e);f(i),p++,i.id=a.default.guid("e_"),o.push(i),n.push(i),t._ar&&l.default._at(e.id,!0)}t._ar&&(delete t._ar,delete t._an),a.State.fire("i"),s.default._au(n)}return d}}}),define("designer/stage-elements",["magix","./stage-select","./history","../gallery/mx-pointer/cursor","../util/transform"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix"),l=e("./stage-select"),s=e("./history"),r=e("../gallery/mx-pointer/cursor"),o=e("../util/transform");let d=(e,t)=>{let i=e.start,a=e.end,l=t.start,s=t.end,r=((a.x-i.x)*(l.y-i.y)-(a.y-i.y)*(l.x-i.x))*((a.x-i.x)*(s.y-i.y)-(a.y-i.y)*(s.x-i.x)),o=((s.x-l.x)*(i.y-l.y)-(s.y-l.y)*(i.x-l.x))*((s.x-l.x)*(a.y-l.y)-(s.y-l.y)*(a.x-l.x));return r<0&&o<0};t.default={_M(e,t){let i=a.State.get("_H");if(i){let s=a.State.get("_F"),r=i.getProps(e.pageX,e.pageY),o=a.State.get("_c"),d={};for(let e of i.scales)d[e]=r[e]*o;let n=d.x-r.x,p=d.y-r.y;for(let e of i.moved)"x"==e.use?d[e.key]-=n:d[e.key]-=p;for(let e in d)r[e]=d[e];let c={id:a.default.guid("e_"),ctrl:i,type:i.type,props:r};return s.push(c),t&&l.default._aw(c),s}},_az(e,t){if(e.shiftKey||e.ctrlKey||e.metaKey){if(!t.props.locked){let e=a.State.get("_P"),i=!1;for(let a=e.length;a--;){let l=e[a];l.id==t.id&&(i=!0),l.props.locked&&e.splice(a,1)}if(i&&e.length>1)return void(l.default._ax(t)&&s.default._t());l.default._ay(t)&&s.default._t()}}else l.default._aw(t)&&s.default._t()},_aB(e,t){let{element:i}=e.params,o=a.State.get("_P");if(void 0===e.button||0==e.button)if(e.shiftKey||e.ctrlKey||e.metaKey)this._az(e,i);else{r.default._aA("move");let d=[],n=!1;for(let{id:e,ctrl:t,props:a}of o){i.id==e&&(n=!0);let l={};for(let e of t.moved)l[e.key]=a[e.key];d.push(l)}if(!n){l.default._aw(i)&&s.default._t(),d.length=0;let e={};for(let t of i.ctrl.moved)e[t.key]=i.props[t.key];d.push(e),o.length=0,o.push(i)}let p=!1;a.State.fire("j",{show:1}),t._x(e,t=>{let i=t.pageX-e.pageX,l=t.pageY-e.pageY,s=0;for(let e of o){let t=d[s++];if(!e.props.locked){p=!0;for(let a of e.ctrl.moved)e.props[a.key]=t[a.key]+("x"==a.use?i:l);let s=a.Vframe.byNode(a.node(e.id));s&&s.invoke("assign",[{element:e,onlyMove:!0}])&&s.invoke("render")}}a.State.fire("k")},()=>{p&&s.default._t(),r.default._z(),a.State.fire("j")})}else{let e=!1;for(let t of o)if(t.id===i.id){e=!0;break}e||l.default._aw(i)&&s.default._t()}},_aC(){let e=a.State.get("_P"),t=a.State.get("_F"),i=!1;if(e.length){let s=a.toMap(e,"id");for(let e=t.length;e--;)s[t[e].id]&&(i=!0,t.splice(e,1));i&&l.default._aw()}return i},_aE(){let e,t,i=a.State.get("_F"),l=[];for(let a of i){if((e=a.props).locked)continue;t=e.rotate||0;let i={x:e.x,y:e.y,width:e.width,height:e.height},s=o.default._aD(i,t),r=s.point[0],d=s.point[2],n=s.point[6],p=s.point[4],c=r,u=r,h=r,f=r;for(let e of[d,n,p])e.x<c.x&&(c=e),e.x>h.x&&(h=e),e.y<u.y&&(u=e),e.y>f.y&&(f=e);l.push({element:a,left:c,top:u,right:h,bottom:f,points:[r,d,n,p],lines:[{start:r,end:d},{start:d,end:p},{start:p,end:n},{start:n,end:r}]})}return l},_aF(e,t,i){let a,l=[],s=[{start:{x:t.x,y:t.y},end:{x:t.x+t.width,y:t.y}},{start:{x:t.x+t.width,y:t.y},end:{x:t.x+t.width,y:t.y+t.height}},{start:{x:t.x+t.width,y:t.y+t.height},end:{x:t.x,y:t.y+t.height}},{start:{x:t.x,y:t.y+t.height},end:{x:t.x,y:t.y}}];for(let r of e)if(a=!1,i&&i[r.element.id])i&&l.push(r.element);else{for(let e of r.points)if(e.x>=t.x&&e.y>=t.y&&e.x<=t.x+t.width&&e.y<=t.y+t.height){l.push(r.element),a=!0;break}if(!a)for(let e of r.lines){for(let t of s)if(d(e,t)){a=!0,l.push(r.element);break}if(a)break}}return l},_at(e,t){let i=a.State.get("_F");for(let t=i.length;t--;){e==i[t].id&&i.splice(t,1)}t||l.default._au()},_aH(){let e=a.State.get("_X"),t=a.State.get("_F"),i=[];for(let e of t)e.props.locked||i.push(e);l.default._au(i),l.default._aG(e)&&s.default._t()},_aI(e,t){let i=a.State.get("_F"),l=-1;for(let e=i.length;e--;){if(i[e].id===t.id){i.splice(l=e,1);break}}return 3==e?i.push(t):4==e?i.unshift(t):5==e?i.splice(l+1,0,t):6==e&&(0===l&&(l=1),i.splice(l-1,0,t)),!0},_aJ(e){let t=a.State.get("_P"),i=a.State.get("_F"),s=t.length,r=t[0];if(0===s||s>1)r=i[e.shiftKey?0:i.length-1],l.default._aw(r);else{let t,a;for(let e=i.length;e--;){let l=i[e];if(l.id==r.id){t=i[e-1];break}a=l}let s=null;e.shiftKey?(t||(t=i[i.length-1]),s=t):(a||(a=i[0]),s=a),s.id!=r.id&&l.default._aw(s)}}}}),define("designer/stage-select",["magix"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix");t.default={_aw(e){let t=a.State.get("_P"),i=t.length;if(i||e){let l=i>1?null:t[0];t.length=0;let s=!1;if(e?(t.push(e),s=e!=l):i&&(s=!0),s)return a.State.set({_X:a.toMap(t,"id")}),a.State.fire("l"),!0}},_ay(e){let t=a.State.get("_P"),i=!1;for(let a of t)if(a.id===e.id){i=!0;break}if(!i)return t.push(e),a.State.set({_X:a.toMap(t,"id")}),a.State.fire("l"),!0},_ax(e){let t=a.State.get("_P"),i=!1,l=-1;for(let a of t)if(l++,a.id===e.id){i=!0;break}if(i)return t.splice(l,1),a.State.set({_X:a.toMap(t,"id")}),a.State.fire("l"),!0},_au(e){let t=a.State.get("_P");t.length=0,e&&t.push.apply(t,e),a.State.set({_X:a.toMap(t,"id")}),a.State.fire("l")},_aG(e){let t=a.State.get("_X"),i=0;for(let a in e)if(!t[a]){i=1;break}if(!i)for(let a in t)if(!e[a]){i=1;break}return i}}}),define("designer/stage",["magix","../gallery/mx-dragdrop/index","./history","./keys","./stage-elements","./stage-select","./stage-clipboard","../util/converter","../gallery/mx-pointer/select","../gallery/mx-pointer/cursor","../gallery/mx-menu/index","./contextmenu"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix"),l=e("../gallery/mx-dragdrop/index"),s=e("./history"),r=e("./keys"),o=e("./stage-elements"),d=e("./stage-select"),n=e("./stage-clipboard"),p=e("../util/converter"),c=e("../gallery/mx-pointer/select"),u=e("../gallery/mx-pointer/cursor"),h=e("../gallery/mx-menu/index"),f=e("./contextmenu");a.default.applyStyle("pe",".paj{outline:0;display:flex;position:relative}.pak{padding:50px 240px 50px 120px}.pal .pak{padding:0}.pam{background:#fff;box-shadow:0 3px 6px 0 rgba(0,0,0,.3)}"),t.default=a.default.View.extend({tmpl:(e,t,i,a,l,s,r)=>{let o,d,n,p,c,u,h=[],{fullscreen:f,rx:g,ry:_,marginTop:x,marginLeft:b,page:m,scale:y,elements:w,id:v}=e;c=[];for(let e=0,l=w,o=l.length;e<o;e++){let o=l[e];u=[t("div",{mxv:"elements,scale,fullscreen",id:a(o.id),"mx-view":"elements/"+a(o.type)+"/designer?element="+r(s,o)+"&scale="+r(s,y)+"&onlyMove="+r(s,!1)+"&fullscreen="+r(s,f),"mx-mousedown":i+"\x1e_aM({element:'"+r(s,o)+"'})"})],c.push(...u)}return n="width:"+a(m.width*y)+"px;height:"+a(m.height*y)+"px;background:"+a(m.background)+";",m.backgroundImage&&(n+="background-image:url("+a(m.backgroundImage)+");background-repeat:"+a("full"==m.backgroundRepeat?"no-repeat":m.backgroundRepeat)+";background-size:","full"==m.backgroundRepeat?n+="100% 100%":n+=a(m.backgroundWidth*y)+"px "+a(m.backgroundHeight*y)+"px;background-position:"+a(m.hor)+"% "+a(m.ver)+"%"),p=[t("div",{class:"pam pg",id:"stage_canvas",style:n},c)],n="",f&&(n+="transform:scaleX("+a(g)+") scaleY("+a(_)+");transform-origin:0 0;margin:"+a(x)+"px 0 0 "+a(b)+"px;"),d=[t("div",{class:"pak",style:n},p)],o="paj",f&&(o+=" pal"),h.push(t("div",{id:"stage_outer","mx-contextmenu":i+"\x1e_B()","mx-mousedown":i+"\x1e_aO()",tabindex:"0","mx-focusin":i+"\x1e_aQ()","mx-focusout":i+"\x1e_aR()","mx-keydown":i+"\x1e_aP()",class:o},d),t("div",{id:"pole_"+a(v),style:"margin-top:-"+a(m.height*y+100)+"px;display:none;"})),t(i,0,h)},mixins:[l.default],init(){let e=e=>{if(e.node){if(!a.default.inside(e.node,a.node("stage_outer")))return;{let t=p.default._aK({x:e.pageX,y:e.pageY});e.pageX=t.x,e.pageY=t.y}}else e.pageX+=this.root.scrollLeft,e.pageY+=this.root.scrollTop;o.default._M(e,!0)&&(a.State.fire("i"),s.default._t())},t=e=>{let t=a.State.get("_F");e?this.digest({elements:t}):this.set({elements:t})},i=0,l=e=>{if(e.step||e.fullscreen){let t=a.State.get("_F");if(e.fullscreen){let t=a.State.get("_d");if(e.full){let l=screen.width/t.width,s=screen.height/t.height,r=Math.min(l,s),o=0,d=0;"auto"==t.scaleType?(o=r,d=r):(o=l,d=s);let n=(screen.height-d*t.height)/2,p=(screen.width-o*t.width)/2,c=a.State.get("_c");1!=c?(e.step=1/c,i=c):i=0,a.State.set({_c:1}),this.set({rx:o,ry:d,marginTop:n,marginLeft:p})}else 0!=i&&(e.step=i,a.State.set({_c:i}));this.set({fullscreen:e.full})}if(e.step)for(let{props:i,ctrl:a}of t)if(a.scales)for(let t of a.scales)i[t]*=e.step;this.set({elements:t})}this.render()};a.State.on("f",l),a.State.on("_",l),a.State.on("a",l),a.State.on("b",l),a.State.on("d",e),a.State.on("e",e),a.State.on("i",t),a.State.on("j",e=>{let t=this.root,i=a.node("pole_"+this.id).style;e.show?(i.width=t.scrollWidth+"px",i.height=t.scrollHeight+"px",i.display="block"):i.display="none"}),a.State.on("c",e=>{a.default.inside(e.node,a.node("stage_outer"))?c.default._aL(e.pageX,e.pageY,e.width,e.height):c.default._z()}),t()},render(){let e=a.State.get("_d");this.digest({scale:a.State.get("_c"),page:e})},"_aM<mousedown>"(e){this.get("fullscreen")||o.default._aB(e,this)},"_aO<mousedown>"(e){if(this.get("fullscreen"))return;let t=e.target;if("stage_canvas"==t.id||a.default.inside(a.node("stage_canvas"),t)){let t=null,i=0,l=a.State.get("_X");if(e.shiftKey){t={};let e=a.State.get("_P");for(let a of e)t[a.id]=1,i++}else d.default._aw();this._aN=i,c.default._I();let r=0,n=o.default._aE();this._x(e,i=>{r||(r=1,u.default._aA("default"));let a=Math.abs(e.pageX-i.pageX),l=Math.abs(e.pageY-i.pageY),s=Math.min(e.pageX,i.pageX),h=Math.min(e.pageY,i.pageY);c.default._aL(s,h,a,l);let f=p.default._aK({x:s,y:h});if(f.width=a,f.height=l,n.length){let e=o.default._aF(n,f,t),i=e.length;i!==this._aN&&(this._aN=i,d.default._au(e))}},()=>{r&&(c.default._z(),u.default._z()),d.default._aG(l)&&s.default._t()})}},"_aP<keydown>"(e){if(!this.get("fullscreen"))if(e.metaKey||e.ctrlKey)e.keyCode==r.default.Z?(e.preventDefault(),e.shiftKey?s.default._U():s.default._T()):e.keyCode==r.default.Y?(e.preventDefault(),s.default._U()):e.keyCode==r.default.A?(e.preventDefault(),o.default._aH()):e.keyCode==r.default.X?(e.preventDefault(),n.default._as()):e.keyCode==r.default.C?(e.preventDefault(),n.default._aq()):e.keyCode==r.default.V&&(e.preventDefault(),n.default._av());else if(e.keyCode==r.default.TAB)e.preventDefault(),o.default._aJ(e);else if(e.keyCode==r.default.DELETE)e.preventDefault(),o.default._aC()&&(a.State.fire("i"),s.default._t());else{let t=e.shiftKey?10:1;t*=a.State.get("_c");let i=a.State.get("_P");if(i.length){let l=!1,o=0,d="";for(let s of i)if(!s.props.locked&&(e.keyCode==r.default.UP?(l=!0,o=-t,d="y"):e.keyCode==r.default.DOWN?(l=!0,o=t,d="y"):e.keyCode==r.default.LEFT?(l=!0,o=-t,d="x"):e.keyCode==r.default.RIGHT&&(l=!0,o=t,d="x"),l)){let e=a.Vframe.byNode(a.node(s.id));if(e){for(let e of s.ctrl.moved)e.use==d&&(s.props[e.key]+=o);e.invoke("assign",[{element:s}])&&e.invoke("render")}}l&&(e.preventDefault(),a.State.fire("k"),s.default._t("_",500))}}},"_B<contextmenu>"(e){if(e.preventDefault(),a.default.inside(e.target,a.node("stage_canvas"))){let t=a.default.config("lang"),i=f.default.stage(t),l={},r=a.State.get("_F"),d=a.State.get("_P"),c=n.default._ao();l[f.default.allId]=!r.length,l[f.default.pasteId]=!c;let u=d.length,g=d[0];if(1==u){i=f.default.singleElement(t);let e=r[r.length-1],a=r[0],s=e.id==g.id,o=a.id==g.id,d=g.props.locked;l[f.default.cutId]=d,l[f.default.upId]=d||s,l[f.default.topId]=d||s,l[f.default.bottomId]=d||o,l[f.default.downId]=d||o}else u>1&&(i=f.default.multipleElement(t));h.default.show(this,e,{list:i,disabled:l,picked(t){if(t.id==f.default.allId)o.default._aH();else if(t.id==f.default.copyId)n.default._aq();else if(t.id==f.default.pasteId){let t=p.default._aK({x:e.pageX,y:e.pageY});n.default._av(t)&&s.default._t()}else t.id==f.default.cutId?n.default._as():t.id==f.default.deleteId?o.default._aC()&&(a.State.fire("i"),s.default._t()):t.id>=3&&t.id<=6&&o.default._aI(t.id,g)&&(a.State.fire("i"),s.default._t())}})}},"_aQ<focusin>"(){this.root.classList.remove("pai")},"_aR<focusout>"(){this.root.classList.add("pai")}})}),define("designer/toolbar-align",["magix","./history"],(e,t,i)=>{let a;Object.defineProperty(t,"__esModule",{value:!0});const l=e("magix"),s=e("./history");t.default=l.default.View.extend({tmpl:(e,t,i,l)=>{let s,r,o=[],{elements:d,i18n:n}=e,p=d.length;return a?o.push(a):o.push(a=t("i",{mxs:"pe:_",class:"paq"})),r=[t(0,0,"\ue70b")],s="pw pao",p<2&&(s+=" par"),o.push(t("i",{title:l(n("m")),"mx-click":i+"\x1e_aS({to:'left'})",class:s},r)),r=[t(0,0,"\ue711")],s="pw pao",p<2&&(s+=" par"),o.push(t("i",{title:l(n("n")),"mx-click":i+"\x1e_aS({to:'center'})",class:s},r)),r=[t(0,0,"\ue70c")],s="pw pao",p<2&&(s+=" par"),o.push(t("i",{title:l(n("o")),"mx-click":i+"\x1e_aS({to:'right'})",class:s},r)),r=[t(0,0,"\ue70d")],s="pw pao",p<2&&(s+=" par"),o.push(t("i",{title:l(n("p")),"mx-click":i+"\x1e_aS({to:'top'})",class:s},r)),r=[t(0,0,"\ue712")],s="pw pao",p<2&&(s+=" par"),o.push(t("i",{title:l(n("q")),"mx-click":i+"\x1e_aS({to:'middle'})",class:s},r)),r=[t(0,0,"\ue70e")],s="pw pao",p<2&&(s+=" par"),o.push(t("i",{title:l(n("r")),"mx-click":i+"\x1e_aS({to:'bottom'})",class:s},r)),t(i,0,o)},init(){let e=this.render.bind(this);l.State.on("_",e),l.State.on("l",e)},render(){this.digest({elements:l.State.get("_P")})},"_aS<click>"(e){if(e.eventTarget.classList.contains("par"))return;let{to:t}=e.params,i=l.State.get("_P"),a=-Number.MAX_SAFE_INTEGER,r=Number.MAX_SAFE_INTEGER,o=Number.MAX_SAFE_INTEGER,d=-Number.MAX_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER,p=Number.MAX_SAFE_INTEGER;for(let e of i){let i=l.node("mask_"+e.id).getBoundingClientRect();if("right"==t)i.right>a&&(a=i.right);else if("left"==t)i.left<r&&(r=i.left);else if("top"==t)i.top<o&&(o=i.top);else if("bottom"==t)i.bottom>d&&(d=i.bottom);else if("middle"==t){let e=(i.bottom-i.top)/2;i.top+e<n&&(n=i.top+e)}else if("center"==t){let e=(i.right-i.left)/2;i.left+e<p&&(p=i.left+e)}}let c=0;for(let e of i){let i,s=l.node("mask_"+e.id).getBoundingClientRect(),u=0,h="";if("right"==t?0!=(i=a-s.right)&&(c=1,u=1,h="x"):"left"==t?0!=(i=r-s.left)&&(c=1,u=1,h="x"):"top"==t?0!=(i=o-s.top)&&(c=1,u=1,h="y"):"bottom"==t?0!=(i=d-s.bottom)&&(c=1,u=1,h="y"):"middle"==t?0!=(i=n-(s.top+(s.bottom-s.top)/2))&&(c=1,u=1,h="y"):"center"==t&&0!=(i=p-(s.left+(s.right-s.left)/2))&&(c=1,u=1,h="x"),u){let t=l.Vframe.byNode(l.node(e.id));if(t){for(let t of e.ctrl.moved)t.use==h&&(e.props[t.key]+=i);t.invoke("assign",[{element:e}])&&t.invoke("render")}}}c&&(l.State.fire("k"),s.default._t())}})}),define("designer/toolbar-del",["magix","./stage-elements","./history"],(e,t,i)=>{let a;Object.defineProperty(t,"__esModule",{value:!0});const l=e("magix"),s=e("./stage-elements"),r=e("./history");t.default=l.default.View.extend({tmpl:(e,t,i,l)=>{let s,r,o=[],{elements:d,i18n:n}=e,p=d.length;return a?o.push(a):o.push(a=t("i",{mxs:"pf:_",class:"paq"})),r=[t(0,0,"\ue600")],s="pw pao",p<1&&(s+=" par"),o.push(t("i",{title:l(n("k"))+"(Delete)","mx-click":i+"\x1e_aT()",class:s},r)),t(i,0,o)},init(){let e=this.render.bind(this);l.State.on("_",e),l.State.on("l",e)},render(){this.digest({elements:l.State.get("_P")})},"_aT<click>"(e){e.eventTarget.classList.contains("par")||s.default._aC()&&(l.State.fire("i"),r.default._t())}})}),define("designer/toolbar-do",["magix","./history"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix"),l=e("./history");t.default=a.default.View.extend({tmpl:(e,t,i,a)=>{let l,s,r=[],{status:o,i18n:d}=e;return s=[t(0,0,"\ue682")],l="pw pao",o.canUndo||(l+=" par"),r.push(t("i",{title:a(d("s")),"mx-click":i+"\x1e_aU({s:'-',b:"+a(o.canUndo)+"})",class:l},s)),s=[t(0,0,"\ue682")],l="pw pao pB",o.canRedo||(l+=" par"),r.push(t("i",{title:a(d("t")),"mx-click":i+"\x1e_aU({s:'+',b:"+a(o.canRedo)+"})",class:l},s)),t(i,0,r)},init(){let e=this.render.bind(this);a.State.on("_",e),a.State.on("h",e)},render(){this.digest({status:l.default._R()})},"_aU<click>"(e){if(e.eventTarget.classList.contains("par"))return;let{s:t,b:i}=e.params;i&&("-"==t?l.default._T():l.default._U())}})}),define("designer/toolbar-layer",["magix","./history","./stage-elements"],(e,t,i)=>{let a;Object.defineProperty(t,"__esModule",{value:!0});const l=e("magix"),s=e("./history"),r=e("./stage-elements");t.default=l.default.View.extend({tmpl:(e,t,i,l)=>{let s,r,o,d=[],{elements:n,top:p,i18n:c,bottom:u}=e;s="";let h=n.length;s+=" ";let f=n[0];return a?d.push(a):d.push(a=t("i",{mxs:"ph:_",class:"paq"})),o=[t(0,0,"\ue632")],r="pw pao",(1!=h||f.props.locked||p.id==f.id)&&(r+=" par"),d.push(t("i",{title:l(c("g")),"mx-click":i+"\x1e_aI({to:5})",class:r},o)),o=[t(0,0,"\ue607")],r="pw pao",(1!=h||f.props.locked||p.id==f.id)&&(r+=" par"),d.push(t("i",{title:l(c("i")),"mx-click":i+"\x1e_aI({to:3})",class:r},o)),o=[t(0,0,"\ue632")],r="pw pao pz",(1!=h||f.props.locked||u.id==f.id)&&(r+=" par"),d.push(t("i",{title:l(c("h")),"mx-click":i+"\x1e_aI({to:6})",class:r},o)),o=[t(0,0,"\ue607")],r="pw pao pz",(1!=h||f.props.locked||u.id==f.id)&&(r+=" par"),d.push(t("i",{title:l(c("j")),"mx-click":i+"\x1e_aI({to:4})",class:r},o)),t(i,0,d)},init(){let e=this.render.bind(this);l.State.on("_",e),l.State.on("i",e),l.State.on("l",e)},render(){let e=l.State.get("_F");this.digest({top:e[e.length-1],bottom:e[0],elements:l.State.get("_P")})},"_aI<click>"(e){if(e.eventTarget.classList.contains("par"))return;let{to:t}=e.params,i=this.get("elements")[0];r.default._aI(t,i)&&(l.State.fire("i"),s.default._t())}})}),define("designer/toolbar-panels",["magix","../panels/index"],(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix"),l=e("../panels/index");t.default=a.default.View.extend({tmpl:(e,t,i,a,l,s,r,o)=>{let d,n,p,c=[],{panels:u,i18n:h}=e;for(let e=0,l=u,s=l.length;e<s;e++){let s=l[e];p=[t(0,1,s.icon)],n="pw pao",s.opened&&(n+=" pap"),d=[t("i",{"mx-click":i+"\x1e_aW({id:'"+o(s.id)+"'})",title:a(h(s.opened?"u":"v",s.title)),class:n},p)],c.push(...d)}return t(i,0,c)},init(){a.State.on("m",()=>{this.render()})},render(){this.digest({panels:l.default._aV()})},"_aW<click>"(e){let{id:t}=e.params;l.default._aW(t)}})}),define("designer/toolbar-scale",["magix","./history"],(e,t,i)=>{let a={class:"pas"};Object.defineProperty(t,"__esModule",{value:!0});const l=e("magix"),s=e("./history");t.default=l.default.View.extend({tmpl:(e,t,i,l)=>{let s,r=[],{i18n:o,scale:d}=e;return s=[t(0,0,"\ue602")],r.push(t("i",{class:"pw pao","mx-click":i+"\x1e_aX({s:'-'})",title:l(o("w"))},s)),s=[t(0,0,100*d+"%")],r.push(t("b",a,s)),s=[t(0,0,"\ue699")],r.push(t("i",{class:"pw pao","mx-click":i+"\x1e_aX({s:'+'})",title:l(o("x"))},s)),t(i,0,r)},init(){let e=this.render.bind(this);l.State.on("a",e),l.State.on("_",e)},render(){this.digest({scale:l.State.get("_c")})},"_aX<click>"(e){let{s:t}=e.params,i=this.get("scale"),a=i;"+"==t?(i+=.5)>5&&(i=5):(i-=.5)<.5&&(i=.5),a!=i&&(l.State.set({_c:i}),l.State.fire("a",{step:i/a}),s.default._t())}})}),define("designer/toolbar-space",["magix","./history"],(e,t,i)=>{let a;Object.defineProperty(t,"__esModule",{value:!0});const l=e("magix"),s=e("./history");t.default=l.default.View.extend({tmpl:(e,t,i,l)=>{let s,r,o=[],{elements:d,bezier:n,i18n:p}=e,c=d.length;return a?o.push(a):o.push(a=t("i",{mxs:"pk:_",class:"paq"})),r=[t(0,0,"\ue604")],s="pw pao",(c<2||n)&&(s+=" par"),o.push(t("i",{title:l(p("y")),"mx-click":i+"\x1e_aY({to:'width'})",class:s},r)),r=[t(0,0,"\ue605")],s="pw pao",(c<2||n)&&(s+=" par"),o.push(t("i",{title:l(p("z")),"mx-click":i+"\x1e_aY({to:'height'})",class:s},r)),r=[t(0,0,"\ue608")],s="pw pao",c<3&&(s+=" par"),o.push(t("i",{title:l(p("A")),"mx-click":i+"\x1e_aZ({to:'hor'})",class:s},r)),r=[t(0,0,"\ue608")],s="pw pA pao",c<3&&(s+=" par"),o.push(t("i",{title:l(p("B")),"mx-click":i+"\x1e_aZ({to:'ver'})",class:s},r)),t(i,0,o)},init(){let e=this.render.bind(this);l.State.on("_",e),l.State.on("l",e)},render(){let e=l.State.get("_P"),t=!1;for(let i of e)if("bezier"==i.type){t=!0;break}this.digest({elements:e,bezier:t})},"_aY<click>"(e){if(e.eventTarget.classList.contains("par"))return;let{to:t}=e.params,i=l.State.get("_P"),a=-Number.MAX_SAFE_INTEGER,r=-Number.MAX_SAFE_INTEGER,o=Number.MAX_SAFE_INTEGER,d=Number.MAX_SAFE_INTEGER;for(let e of i){let t=e.props;t.width>a&&(a=t.width),t.width<o&&(o=t.width),t.height>r&&(r=t.height),t.height<d&&(d=t.height)}let n=0;for(let s of i){let i,p=s.props,c=0;if("width"==t?(i=e.shiftKey?o:a,p.width!=i&&(c=1,n=1,p.width=i)):(i=e.shiftKey?d:r,p.height!=i&&(c=1,n=1,p.height=i)),c){let e=l.Vframe.byNode(l.node(s.id));e&&e.invoke("assign",[{element:s}])&&e.invoke("render")}}n&&(l.State.fire("k"),s.default._t())},"_aZ<click>"(e){if(e.eventTarget.classList.contains("par"))return;let{to:t}=e.params,i=l.State.get("_P"),a=-Number.MAX_SAFE_INTEGER,r=Number.MAX_SAFE_INTEGER,o=-Number.MAX_SAFE_INTEGER,d=Number.MAX_SAFE_INTEGER,n=[];for(let e of i){let t=e.props,i=t.x+t.width/2,l=t.y+t.height/2;i>a&&(a=i),i<r&&(r=i),l>o&&(o=l),l<d&&(d=l),n.push({m:e,mx:i,my:l})}let p=(n="ver"==t?n.sort((e,t)=>e.my-t.my):n.sort((e,t)=>e.mx-t.mx))[0],c=n.length-1,u=c,h=p.m,f=0,g=(o-d)/u,_=(a-r)/u;for(let e=1;e<c;e++){let i=n[e].m,a=0,s="",r=0;if("ver"==t){let e=h.props.y+h.props.height/2;e+=g,e-=i.props.height/2,i.props.y!=e&&(f=1,a=1,r=e-i.props.y,s="y")}else{let e=h.props.x+h.props.width/2;e+=_,e-=i.props.width/2,i.props.x!=e&&(f=1,a=1,r=e-i.props.x,s="x")}if(a){let e=l.Vframe.byNode(l.node(i.id));if(e){for(let e of i.ctrl.moved)e.use==s&&(i.props[e.key]+=r);e.invoke("assign",[{element:i}])&&e.invoke("render")}}h=i}f&&(l.State.fire("k"),s.default._t())}})}),define("designer/toolbar",["magix"],(e,t,i)=>{let a,l;Object.defineProperty(t,"__esModule",{value:!0});const s=e("magix");s.default.applyStyle("pf",".pan{height:22px}.pao{cursor:pointer;height:22px;width:22px;margin:0 2px;display:inline-flex;align-items:center;justify-content:center;border-radius:2px}.pao:hover{background:#e6e6e6;color:#333}.pap,.pap:hover{background:#c4c4c4}.paq{height:16px;width:1px;background:#eee;margin:3px 12px;float:left}.par{color:#aaa;cursor:not-allowed}.par:hover{color:#aaa;background:transparent}.pas{font-weight:400;font-size:14px;width:40px;display:inline-block;text-align:center}"),t.default=s.default.View.extend({tmpl:(e,t,i)=>{let s,r=[];return a?r.push(a):(s=[t("div",{class:"pan","mx-view":"designer/toolbar-do"}),t("div",{class:"pan","mx-view":"designer/toolbar-align"}),t("div",{class:"pan","mx-view":"designer/toolbar-space"}),t("div",{class:"pan","mx-view":"designer/toolbar-layer"}),t("div",{class:"pan","mx-view":"designer/toolbar-del"})],r.push(a=t("div",{mxs:"pl:_",class:"pd pE pb"},s))),l?r.push(l):(s=[t("div",{class:"pan","mx-view":"designer/toolbar-scale"}),t("i",{class:"paq"}),t("div",{class:"pan","mx-view":"designer/toolbar-panels"})],r.push(l=t("div",{mxs:"pl:a",class:"pe pb pE"},s))),t(i,0,r)},render(){this.digest()}})});